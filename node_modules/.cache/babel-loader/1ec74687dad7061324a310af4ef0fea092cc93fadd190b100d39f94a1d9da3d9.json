{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\App\\\\gamified-survey\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { motion } from \"framer-motion\";\n\n// Gamified Survey — cinematic page-change scroller with dramatic animations\n// Tailwind + Framer Motion required.\n// Paste into a React app (e.g., src/components/GamifiedSurveyForm.jsx)\n\n/*\n  Performance fixes and UX tweaks in this version:\n  - Early-complete for the mini-game: if player charges to 100% by tapping, the mini-game finishes immediately (no need to wait for the full timer).\n  - Slightly reduced auto-advance delays so page changes feel snappier without being jumpy.\n  - All previous performance improvements kept (no per-frame blur, minimal re-renders).\n*/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QUESTIONS = [{\n  id: \"intro\",\n  type: \"stage\",\n  title: \"Nightfall at HackPlay\",\n  subtitle: \"Step into a neon-lit hall. Your choices tune the journey.\"\n}, {\n  id: \"q1\",\n  type: \"mcq\",\n  title: \"Entrance — choose your mindset\",\n  choices: [\"Build something cool\", \"Learn fast\", \"Meet people\", \"Chase the prizes\"],\n  points: {\n    \"Build something cool\": 20,\n    \"Learn fast\": 10,\n    \"Meet people\": 15,\n    \"Chase the prizes\": 5\n  },\n  flavor: \"The doors close. A low bass. Pick the vibe that follows you.\"\n}, {\n  id: \"q2\",\n  type: \"rating\",\n  title: \"Charge Meter — how hyped are you?\",\n  scale: 5,\n  pointsPerStar: 6,\n  flavor: \"The stage lights react to your energy.\"\n}, {\n  id: \"q3\",\n  type: \"text\",\n  title: \"One-line pitch — what's the idea?\",\n  maxLength: 140,\n  points: 15,\n  flavor: \"A single line — the fragment your team will build around.\"\n}, {\n  id: \"q4\",\n  type: \"minigame\",\n  title: \"Charge the core — tap to power your idea\",\n  timeLimit: 6000,\n  pointsOnSuccess: 30,\n  flavor: \"Fast reflexes prove prototype-ready energy.\"\n}, {\n  id: \"q5\",\n  type: \"mcq\",\n  title: \"Team vibe — pick your tribe\",\n  choices: [\"Chill coders\", \"All-nighters\", \"Balanced squad\", \"Solo hero\"],\n  points: {\n    \"Chill coders\": 10,\n    \"All-nighters\": 20,\n    \"Balanced squad\": 15,\n    \"Solo hero\": 5\n  },\n  flavor: \"Who will you ride the night with?\",\n  dependsOn: {\n    q1: \"Build something cool\"\n  }\n}, {\n  id: \"end\",\n  type: \"stage\",\n  title: \"Curtain Call\",\n  subtitle: \"Collect badges, revisit your pitch, and step back into the light.\"\n}];\nfunction lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n}\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext(\"2d\");\n  const W = canvas.width = window.innerWidth;\n  const H = canvas.height = window.innerHeight;\n  const pieces = [];\n  for (let i = 0; i < 80; i++) pieces.push({\n    x: W / 2,\n    y: H / 4,\n    vx: (Math.random() - 0.5) * 12,\n    vy: (Math.random() - 1.5) * 10,\n    r: Math.random() * 6 + 3,\n    color: [\"#ff6b6b\", \"#ffd93d\", \"#6bcB77\", \"#6b8aff\", \"#ff85e3\"][Math.floor(Math.random() * 5)],\n    rot: Math.random() * 360,\n    vr: Math.random() * 8 - 4\n  });\n  let t = 0;\n  function frame() {\n    t++;\n    ctx.clearRect(0, 0, W, H);\n    for (let p of pieces) {\n      p.x += p.vx;\n      p.y += p.vy + 0.3;\n      p.vy += 0.06;\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate(p.rot * Math.PI / 180);\n      ctx.fillStyle = p.color;\n      ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 0.6);\n      ctx.restore();\n    }\n    if (t < 180) requestAnimationFrame(frame);else ctx.clearRect(0, 0, W, H);\n  }\n  frame();\n}\n\n// MiniGame now supports early completion if charge reaches 100% via tapping.\nfunction MiniGame({\n  timeLimit = 6000,\n  onComplete,\n  flavor\n}) {\n  _s();\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0); // extra charge from taps, applied on top of time-based fill\n\n  useEffect(() => {\n    return () => cancelAnimationFrame(raf.current);\n  }, []);\n  function start() {\n    if (runningRef.current) return;\n    runningRef.current = true;\n    manualBoost.current = 0;\n    startedAt.current = performance.now();\n    tick();\n  }\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round(elapsed / timeLimit * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n      if (total >= 100) {\n        // complete early\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(true);\n        return;\n      }\n      if (elapsed >= timeLimit) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(total >= 60);\n        return;\n      }\n      tick();\n    });\n  }\n  function handleTap() {\n    if (!runningRef.current) {\n      start();\n    } else {\n      manualBoost.current = Math.min(100, manualBoost.current + 12); // bigger tap boost so user can reach 100 faster\n      // update UI immediately\n      setCharge(c => Math.min(100, c + 12));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full flex flex-col items-center gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-gray-400 italic\",\n      children: flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-56 h-56 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        onClick: handleTap,\n        whileTap: {\n          scale: 0.9\n        },\n        whileHover: {\n          scale: 1.04\n        },\n        transition: {\n          type: \"spring\",\n          stiffness: 300\n        },\n        className: \"w-40 h-40 rounded-full bg-gradient-to-tr from-indigo-500 to-pink-500 shadow-2xl flex items-center justify-center cursor-pointer relative overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(motion.div, {\n          animate: {\n            rotate: [0, 360]\n          },\n          transition: {\n            repeat: Infinity,\n            duration: 8,\n            ease: \"linear\"\n          },\n          className: \"absolute inset-0 opacity-20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-white font-extrabold text-xl\",\n          children: \"TAP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm mb-2 text-gray-300\",\n        children: [\"Charge: \", charge, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-4 bg-gray-800 rounded-full overflow-hidden border border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"h-full rounded-full\",\n          style: {\n            background: \"linear-gradient(90deg,#7c3aed,#06b6d4)\"\n          },\n          animate: {\n            width: `${charge}%`\n          },\n          transition: {\n            type: \"spring\",\n            stiffness: 140,\n            damping: 16\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n_s(MiniGame, \"7W1Gbp5uQvXAuYfcKgP+cnkG9w8=\");\n_c = MiniGame;\nexport default function GamifiedSurveyForm() {\n  _s2();\n  // state\n  const [answers, setAnswers] = useState(() => {\n    try {\n      const raw = localStorage.getItem(\"gamifiedSurveyAnswers\");\n      return raw ? JSON.parse(raw) : {};\n    } catch (e) {\n      return {};\n    }\n  });\n  const [score, setScore] = useState(() => Number(localStorage.getItem(\"gamifiedSurveyScore\")) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n  const canvasRef = useRef(null);\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyAnswers\", JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyScore\", String(score)), [score]);\n  const visible = QUESTIONS.filter(q => {\n    if (!q.dependsOn) return true;\n    const keys = Object.keys(q.dependsOn);\n    return keys.every(k => answers[k] === q.dependsOn[k]);\n  });\n\n  // cinematic scroller\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = el => {\n    if (el) chapterRefs.current.push(el);\n  };\n  const [height, setHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\n  useEffect(() => {\n    function onResize() {\n      setHeight(window.innerHeight);\n    }\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  // hide native scrollbar\n  useEffect(() => {\n    const prev = {\n      overflow: document.documentElement.style.overflow,\n      touchAction: document.body.style.touchAction\n    };\n    document.documentElement.style.overflow = 'hidden';\n    document.body.style.touchAction = 'none';\n    return () => {\n      document.documentElement.style.overflow = prev.overflow;\n      document.body.style.touchAction = prev.touchAction;\n    };\n  }, []);\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n  const SNAP_DELAY = 120; // ms of inactivity before snapping\n  const LERP = 0.28; // smoothing — snappier\n\n  // avoid re-renders: keep activeIndex in ref and only set state when changed\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n  useEffect(() => {\n    const isTouching = {\n      v: false\n    };\n    const touchStartY = {\n      v: 0\n    };\n    function clampTarget() {\n      const max = Math.max(0, (visible.length - 1) * height);\n      if (targetY.current < 0) targetY.current = 0;\n      if (targetY.current > max) targetY.current = max;\n    }\n    function onWheel(e) {\n      e.preventDefault();\n      targetY.current += e.deltaY * 1.2; // amplify for dramatic feel\n      clampTarget();\n      lastWheelAt.current = performance.now();\n    }\n    function onTouchStart(e) {\n      touchStartY.v = e.touches[0].clientY;\n      isTouching.v = true;\n    }\n    function onTouchMove(e) {\n      if (!isTouching.v) return;\n      const y = e.touches[0].clientY;\n      const delta = touchStartY.v - y;\n      targetY.current += delta;\n      touchStartY.v = y;\n      clampTarget();\n      lastWheelAt.current = performance.now();\n    }\n    function onTouchEnd() {\n      isTouching.v = false;\n    }\n    function onKey(e) {\n      if (e.key === 'ArrowDown') {\n        targetY.current += height * 0.95;\n        clampTarget();\n        lastWheelAt.current = performance.now();\n      }\n      if (e.key === 'ArrowUp') {\n        targetY.current -= height * 0.95;\n        clampTarget();\n        lastWheelAt.current = performance.now();\n      }\n    }\n    const el = containerRef.current || window;\n    el.addEventListener('wheel', onWheel, {\n      passive: false\n    });\n    window.addEventListener('touchstart', onTouchStart, {\n      passive: false\n    });\n    window.addEventListener('touchmove', onTouchMove, {\n      passive: false\n    });\n    window.addEventListener('touchend', onTouchEnd, {\n      passive: false\n    });\n    window.addEventListener('keydown', onKey);\n    return () => {\n      el.removeEventListener('wheel', onWheel);\n      window.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('touchend', onTouchEnd);\n      window.removeEventListener('keydown', onKey);\n    };\n  }, [height, visible.length]);\n\n  // animation loop that also applies per-chapter transforms for dramatic page-change\n  useEffect(() => {\n    function frame() {\n      currentY.current = lerp(currentY.current, targetY.current, LERP);\n      const el = containerRef.current;\n      if (el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n\n      // per-chapter transforms (no blur, no per-frame transition writes)\n      chapterRefs.current.forEach((node, i) => {\n        if (!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height; // how far the chapter is from center in pages\n        const abs = Math.abs(offset);\n        const translateY = offset * 40; // subtle vertical offset\n        const rotate = offset * 8; // small rotation\n        const scale = 1 - Math.min(0.12, abs * 0.12); // scale down when away\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n\n        // apply only transform & opacity (GPU-friendly)\n        node.style.transform = `translate3d(0, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n\n      // snap behavior after inactivity\n      if (performance.now() - lastWheelAt.current > SNAP_DELAY) {\n        const nearest = Math.round(currentY.current / height);\n        const dest = Math.max(0, Math.min(nearest * height, Math.max(0, (visible.length - 1) * height)));\n        // gently move targetY towards dest\n        targetY.current = lerp(targetY.current, dest, 0.3);\n      }\n\n      // update active index (rounded) but only if changed\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) {\n        activeIndexRef.current = idx;\n        setActiveIndex(idx);\n      }\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n  function scrollToIndex(i) {\n    const max = Math.max(0, (visible.length - 1) * height);\n    const dest = Math.max(0, Math.min(i * height, max));\n    targetY.current = dest;\n    lastWheelAt.current = performance.now();\n  }\n\n  // AUTO ADVANCE constants (slightly reduced delays for snappier feel)\n  const AUTO_ADVANCE_DELAY_MS = 240; // used for MCQ/rating\n  const MINIGAME_ADVANCE_MS = 300; // used after mini-game completion\n\n  function handleAnswer(qid, value) {\n    setAnswers(prev => ({\n      ...prev,\n      [qid]: value\n    }));\n    const questionDef = QUESTIONS.find(x => x.id === qid) || {};\n    let gained = 0;\n    if (questionDef.type === \"mcq\" && questionDef.points) gained = questionDef.points[value] || 0;else if (questionDef.type === \"rating\") gained = value * (questionDef.pointsPerStar || 1);else if (questionDef.type === \"text\") gained = questionDef.points || 0;\n    if (gained) {\n      setScore(s => s + gained);\n      pulseScore();\n    }\n\n    // Auto-advance for MCQ and rating types (shorter delay now)\n    if (questionDef.type === \"mcq\" || questionDef.type === \"rating\") {\n      const next = Math.min(activeIndexRef.current + 1, visible.length - 1);\n      setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS);\n    }\n  }\n  function pulseScore() {\n    const el = document.getElementById(\"score-badge\");\n    if (!el) return;\n    el.animate([{\n      transform: \"translateY(0) scale(1)\"\n    }, {\n      transform: \"translateY(-6px) scale(1.06)\"\n    }, {\n      transform: \"translateY(0) scale(1)\"\n    }], {\n      duration: 520,\n      easing: \"ease-out\"\n    });\n  }\n  function onMiniGameComplete(success) {\n    if (success) {\n      setScore(s => s + 30);\n      pulseScore();\n    }\n    setAnswers(prev => ({\n      ...prev,\n      q4: success ? 'success' : 'fail'\n    }));\n    setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), MINIGAME_ADVANCE_MS);\n  }\n  function finish() {\n    setShowFinish(true);\n    if (canvasRef.current) confettiBurst(canvasRef.current);\n  }\n  function resetAll() {\n    if (!confirm(\"Reset survey? This clears local progress.\")) return;\n    setAnswers({});\n    setScore(0);\n    setShowFinish(false);\n    localStorage.removeItem(\"gamifiedSurveyAnswers\");\n    localStorage.removeItem(\"gamifiedSurveyScore\");\n    targetY.current = 0;\n    currentY.current = 0;\n    if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)';\n  }\n\n  // chapter renderer\n  function ChapterContent({\n    item,\n    idx\n  }) {\n    if (item.type === \"stage\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center max-w-2xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(motion.h1, {\n          initial: {\n            y: 40,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            duration: 0.8\n          },\n          className: \"text-4xl md:text-6xl font-extrabold tracking-tight bg-clip-text text-transparent\",\n          style: {\n            backgroundImage: 'linear-gradient(90deg,#8b5cf6,#06b6d4)'\n          },\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), item.subtitle && /*#__PURE__*/_jsxDEV(motion.p, {\n          initial: {\n            y: 20,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 0.95\n          },\n          transition: {\n            delay: 0.15\n          },\n          className: \"mt-4 text-gray-300\",\n          children: item.subtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 inline-flex gap-3\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => scrollToIndex(Math.min(idx + 1, visible.length - 1)),\n            className: \"px-5 py-3 rounded-lg bg-gradient-to-r from-indigo-600 to-cyan-500 text-white\",\n            children: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === \"mcq\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-2xl w-full mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-400 italic mb-4\",\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: item.choices.map(c => /*#__PURE__*/_jsxDEV(motion.button, {\n            whileHover: {\n              scale: 1.04\n            },\n            onClick: () => handleAnswer(item.id, c),\n            className: `py-5 px-6 rounded-2xl border ${answers[item.id] === c ? 'bg-gradient-to-r from-indigo-600 to-cyan-500 text-white shadow-2xl transform-gpu' : 'bg-gray-900 text-gray-300 border-gray-800'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold text-lg\",\n              children: c\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-400 mt-1\",\n              children: item.points && item.points[c] ? `${item.points[c]} pts` : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this)]\n          }, c, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === \"rating\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-400 italic mb-4\",\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-4\",\n          children: Array.from({\n            length: item.scale\n          }).map((_, i) => /*#__PURE__*/_jsxDEV(motion.button, {\n            onClick: () => handleAnswer(item.id, i + 1),\n            whileTap: {\n              scale: 0.95\n            },\n            className: `w-14 h-14 rounded-full flex items-center justify-center ${answers[item.id] === i + 1 ? 'bg-yellow-400 text-black' : 'bg-gray-800 text-gray-300'}`,\n            children: i + 1\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === \"text\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-2xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-400 italic mb-4\",\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          maxLength: item.maxLength,\n          rows: 5,\n          value: answers[item.id] || \"\",\n          onChange: e => handleAnswer(item.id, e.target.value),\n          className: \"w-full p-4 rounded-xl border bg-gray-900 text-gray-100 border-gray-700\",\n          placeholder: \"One-line pitch...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-400 mt-2\",\n          children: [(answers[item.id] || \"\").length, \"/\", item.maxLength]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === \"minigame\") {\n      return /*#__PURE__*/_jsxDEV(MiniGame, {\n        timeLimit: item.timeLimit,\n        onComplete: onMiniGameComplete,\n        flavor: item.flavor\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 14\n      }, this);\n    }\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-black text-gray-100 relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .cinema-stack { will-change: transform; }\n        .nav-dot { width:12px; height:12px; border-radius:9999px; }\n        .chapter-node { will-change: transform, opacity; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 -z-30 bg-gradient-to-b from-transparent to-black/80\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"pointer-events-none fixed inset-0 z-40\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed right-6 top-6 z-50 flex flex-col gap-3 items-end\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"score-badge\",\n        className: \"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-semibold rounded-full text-sm shadow-lg\",\n        children: [score, \" pts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-gray-400\",\n        children: [\"Level \", Math.floor(score / 50) + 1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"fixed left-6 top-1/2 -translate-y-1/2 z-50 hidden md:flex flex-col gap-3\",\n      children: visible.map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => scrollToIndex(i),\n        className: `nav-dot ${i === activeIndex ? 'bg-gradient-to-r from-indigo-400 to-pink-400 shadow-2xl' : 'bg-gray-700/40'}`,\n        \"aria-label\": `Go to chapter ${i + 1}`\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"cinema-stack fixed inset-0 top-0 left-0 w-full will-change-transform\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: `${visible.length * height}px`\n        },\n        children: visible.map((item, i) => /*#__PURE__*/_jsxDEV(\"section\", {\n          ref: addChapterRef,\n          style: {\n            height: `${height}px`\n          },\n          className: \"flex items-center justify-center px-6 md:px-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 items-center chapter-node\",\n            children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n              className: \"col-span-1 hidden lg:flex flex-col gap-4 items-start\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-400\",\n                children: \"Chapter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                animate: {\n                  rotate: activeIndex === i ? 6 : 0\n                },\n                transition: {\n                  type: \"spring\"\n                },\n                className: \"text-3xl font-extrabold\",\n                children: String(i + 1).padStart(2, '0')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1 h-full bg-gradient-to-b from-indigo-600 to-pink-500 rounded-full opacity-30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-2 bg-transparent rounded-xl p-6 text-center\",\n              children: /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0,\n                  y: 30\n                },\n                animate: {\n                  opacity: 1,\n                  y: 0\n                },\n                transition: {\n                  duration: 0.8\n                },\n                children: /*#__PURE__*/_jsxDEV(ChapterContent, {\n                  item: item,\n                  idx: i\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this)\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this), showFinish && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-60 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black/70 backdrop-blur-sm rounded-xl p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-4xl font-bold\",\n          children: \"All done \\uD83C\\uDF89\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 text-gray-300\",\n          children: [\"You earned \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 58\n          }, this), \" points. Thanks for playing!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex gap-3 justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => resetAll(),\n            className: \"px-4 py-2 rounded bg-red-700/20 text-red-300\",\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 444,\n    columnNumber: 5\n  }, this);\n}\n_s2(GamifiedSurveyForm, \"9plfyVh92h8bS2bWNHHHDc0Fa/o=\");\n_c2 = GamifiedSurveyForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"MiniGame\");\n$RefreshReg$(_c2, \"GamifiedSurveyForm\");","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","jsxDEV","_jsxDEV","QUESTIONS","id","type","title","subtitle","choices","points","flavor","scale","pointsPerStar","maxLength","timeLimit","pointsOnSuccess","dependsOn","q1","lerp","a","b","n","confettiBurst","canvas","ctx","getContext","W","width","window","innerWidth","H","height","innerHeight","pieces","i","push","x","y","vx","Math","random","vy","r","color","floor","rot","vr","t","frame","clearRect","p","save","translate","rotate","PI","fillStyle","fillRect","restore","requestAnimationFrame","MiniGame","onComplete","_s","charge","setCharge","runningRef","raf","startedAt","manualBoost","cancelAnimationFrame","current","start","performance","now","tick","elapsed","base","min","round","total","handleTap","c","className","children","fileName","_jsxFileName","lineNumber","columnNumber","div","onClick","whileTap","whileHover","transition","stiffness","animate","repeat","Infinity","duration","ease","style","background","damping","_c","GamifiedSurveyForm","_s2","answers","setAnswers","raw","localStorage","getItem","JSON","parse","e","score","setScore","Number","showFinish","setShowFinish","canvasRef","setItem","stringify","String","visible","filter","q","keys","Object","every","k","containerRef","chapterRefs","addChapterRef","el","setHeight","onResize","addEventListener","removeEventListener","prev","overflow","document","documentElement","touchAction","body","targetY","currentY","rafRef","lastWheelAt","SNAP_DELAY","LERP","activeIndexRef","activeIndex","setActiveIndex","isTouching","v","touchStartY","clampTarget","max","length","onWheel","preventDefault","deltaY","onTouchStart","touches","clientY","onTouchMove","delta","onTouchEnd","onKey","key","passive","transform","forEach","node","center","offset","abs","translateY","opacity","nearest","dest","idx","scrollToIndex","AUTO_ADVANCE_DELAY_MS","MINIGAME_ADVANCE_MS","handleAnswer","qid","value","questionDef","find","gained","s","pulseScore","next","setTimeout","getElementById","easing","onMiniGameComplete","success","q4","finish","resetAll","confirm","removeItem","ChapterContent","item","h1","initial","backgroundImage","delay","map","button","Array","from","_","rows","onChange","target","placeholder","ref","padStart","_c2","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/App/gamified-survey/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { motion } from \"framer-motion\";\n\n// Gamified Survey — cinematic page-change scroller with dramatic animations\n// Tailwind + Framer Motion required.\n// Paste into a React app (e.g., src/components/GamifiedSurveyForm.jsx)\n\n/*\n  Performance fixes and UX tweaks in this version:\n  - Early-complete for the mini-game: if player charges to 100% by tapping, the mini-game finishes immediately (no need to wait for the full timer).\n  - Slightly reduced auto-advance delays so page changes feel snappier without being jumpy.\n  - All previous performance improvements kept (no per-frame blur, minimal re-renders).\n*/\n\nconst QUESTIONS = [\n  { id: \"intro\", type: \"stage\", title: \"Nightfall at HackPlay\", subtitle: \"Step into a neon-lit hall. Your choices tune the journey.\" },\n  {\n    id: \"q1\",\n    type: \"mcq\",\n    title: \"Entrance — choose your mindset\",\n    choices: [\"Build something cool\", \"Learn fast\", \"Meet people\", \"Chase the prizes\"],\n    points: { \"Build something cool\": 20, \"Learn fast\": 10, \"Meet people\": 15, \"Chase the prizes\": 5 },\n    flavor: \"The doors close. A low bass. Pick the vibe that follows you.\",\n  },\n  {\n    id: \"q2\",\n    type: \"rating\",\n    title: \"Charge Meter — how hyped are you?\",\n    scale: 5,\n    pointsPerStar: 6,\n    flavor: \"The stage lights react to your energy.\",\n  },\n  {\n    id: \"q3\",\n    type: \"text\",\n    title: \"One-line pitch — what's the idea?\",\n    maxLength: 140,\n    points: 15,\n    flavor: \"A single line — the fragment your team will build around.\",\n  },\n  {\n    id: \"q4\",\n    type: \"minigame\",\n    title: \"Charge the core — tap to power your idea\",\n    timeLimit: 6000,\n    pointsOnSuccess: 30,\n    flavor: \"Fast reflexes prove prototype-ready energy.\",\n  },\n  {\n    id: \"q5\",\n    type: \"mcq\",\n    title: \"Team vibe — pick your tribe\",\n    choices: [\"Chill coders\", \"All-nighters\", \"Balanced squad\", \"Solo hero\"],\n    points: { \"Chill coders\": 10, \"All-nighters\": 20, \"Balanced squad\": 15, \"Solo hero\": 5 },\n    flavor: \"Who will you ride the night with?\",\n    dependsOn: { q1: \"Build something cool\" },\n  },\n  { id: \"end\", type: \"stage\", title: \"Curtain Call\", subtitle: \"Collect badges, revisit your pitch, and step back into the light.\" },\n];\n\nfunction lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n}\n\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext(\"2d\");\n  const W = (canvas.width = window.innerWidth);\n  const H = (canvas.height = window.innerHeight);\n  const pieces = [];\n  for (let i = 0; i < 80; i++) pieces.push({ x: W / 2, y: H / 4, vx: (Math.random() - 0.5) * 12, vy: (Math.random() - 1.5) * 10, r: Math.random() * 6 + 3, color: [\"#ff6b6b\", \"#ffd93d\", \"#6bcB77\", \"#6b8aff\", \"#ff85e3\"][Math.floor(Math.random() * 5)], rot: Math.random() * 360, vr: Math.random() * 8 - 4 });\n  let t = 0;\n  function frame() {\n    t++;\n    ctx.clearRect(0, 0, W, H);\n    for (let p of pieces) {\n      p.x += p.vx;\n      p.y += p.vy + 0.3;\n      p.vy += 0.06;\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate((p.rot * Math.PI) / 180);\n      ctx.fillStyle = p.color;\n      ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 0.6);\n      ctx.restore();\n    }\n    if (t < 180) requestAnimationFrame(frame);\n    else ctx.clearRect(0, 0, W, H);\n  }\n  frame();\n}\n\n// MiniGame now supports early completion if charge reaches 100% via tapping.\nfunction MiniGame({ timeLimit = 6000, onComplete, flavor }) {\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0); // extra charge from taps, applied on top of time-based fill\n\n  useEffect(() => {\n    return () => cancelAnimationFrame(raf.current);\n  }, []);\n\n  function start() {\n    if (runningRef.current) return;\n    runningRef.current = true;\n    manualBoost.current = 0;\n    startedAt.current = performance.now();\n    tick();\n  }\n\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round((elapsed / timeLimit) * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n\n      if (total >= 100) {\n        // complete early\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(true);\n        return;\n      }\n\n      if (elapsed >= timeLimit) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(total >= 60);\n        return;\n      }\n\n      tick();\n    });\n  }\n\n  function handleTap() {\n    if (!runningRef.current) {\n      start();\n    } else {\n      manualBoost.current = Math.min(100, manualBoost.current + 12); // bigger tap boost so user can reach 100 faster\n      // update UI immediately\n      setCharge((c) => Math.min(100, c + 12));\n    }\n  }\n\n  return (\n    <div className=\"w-full flex flex-col items-center gap-4\">\n      <div className=\"text-sm text-gray-400 italic\">{flavor}</div>\n      <div className=\"relative w-56 h-56 flex items-center justify-center\">\n        <motion.div\n          onClick={handleTap}\n          whileTap={{ scale: 0.9 }}\n          whileHover={{ scale: 1.04 }}\n          transition={{ type: \"spring\", stiffness: 300 }}\n          className=\"w-40 h-40 rounded-full bg-gradient-to-tr from-indigo-500 to-pink-500 shadow-2xl flex items-center justify-center cursor-pointer relative overflow-hidden\"\n        >\n          <motion.div animate={{ rotate: [0, 360] }} transition={{ repeat: Infinity, duration: 8, ease: \"linear\" }} className=\"absolute inset-0 opacity-20\" />\n          <div className=\"text-white font-extrabold text-xl\">TAP</div>\n        </motion.div>\n      </div>\n\n      <div className=\"w-full max-w-xl\">\n        <div className=\"text-sm mb-2 text-gray-300\">Charge: {charge}%</div>\n        <div className=\"w-full h-4 bg-gray-800 rounded-full overflow-hidden border border-gray-700\">\n          <motion.div className=\"h-full rounded-full\" style={{ background: \"linear-gradient(90deg,#7c3aed,#06b6d4)\" }} animate={{ width: `${charge}%` }} transition={{ type: \"spring\", stiffness: 140, damping: 16 }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function GamifiedSurveyForm() {\n  // state\n  const [answers, setAnswers] = useState(() => {\n    try {\n      const raw = localStorage.getItem(\"gamifiedSurveyAnswers\");\n      return raw ? JSON.parse(raw) : {};\n    } catch (e) {\n      return {};\n    }\n  });\n  const [score, setScore] = useState(() => Number(localStorage.getItem(\"gamifiedSurveyScore\")) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n  const canvasRef = useRef(null);\n\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyAnswers\", JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyScore\", String(score)), [score]);\n\n  const visible = QUESTIONS.filter((q) => {\n    if (!q.dependsOn) return true;\n    const keys = Object.keys(q.dependsOn);\n    return keys.every((k) => answers[k] === q.dependsOn[k]);\n  });\n\n  // cinematic scroller\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = (el) => { if (el) chapterRefs.current.push(el); };\n\n  const [height, setHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\n  useEffect(() => {\n    function onResize() { setHeight(window.innerHeight); }\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  // hide native scrollbar\n  useEffect(() => {\n    const prev = { overflow: document.documentElement.style.overflow, touchAction: document.body.style.touchAction };\n    document.documentElement.style.overflow = 'hidden';\n    document.body.style.touchAction = 'none';\n    return () => {\n      document.documentElement.style.overflow = prev.overflow;\n      document.body.style.touchAction = prev.touchAction;\n    };\n  }, []);\n\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n\n  const SNAP_DELAY = 120; // ms of inactivity before snapping\n  const LERP = 0.28; // smoothing — snappier\n\n  // avoid re-renders: keep activeIndex in ref and only set state when changed\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  useEffect(() => {\n    const isTouching = { v: false };\n    const touchStartY = { v: 0 };\n\n    function clampTarget() {\n      const max = Math.max(0, (visible.length - 1) * height);\n      if (targetY.current < 0) targetY.current = 0;\n      if (targetY.current > max) targetY.current = max;\n    }\n\n    function onWheel(e) {\n      e.preventDefault();\n      targetY.current += e.deltaY * 1.2; // amplify for dramatic feel\n      clampTarget();\n      lastWheelAt.current = performance.now();\n    }\n    function onTouchStart(e) { touchStartY.v = e.touches[0].clientY; isTouching.v = true; }\n    function onTouchMove(e) {\n      if (!isTouching.v) return;\n      const y = e.touches[0].clientY;\n      const delta = touchStartY.v - y;\n      targetY.current += delta;\n      touchStartY.v = y;\n      clampTarget();\n      lastWheelAt.current = performance.now();\n    }\n    function onTouchEnd() { isTouching.v = false; }\n    function onKey(e) {\n      if (e.key === 'ArrowDown') { targetY.current += height * 0.95; clampTarget(); lastWheelAt.current = performance.now(); }\n      if (e.key === 'ArrowUp') { targetY.current -= height * 0.95; clampTarget(); lastWheelAt.current = performance.now(); }\n    }\n\n    const el = containerRef.current || window;\n    el.addEventListener('wheel', onWheel, { passive: false });\n    window.addEventListener('touchstart', onTouchStart, { passive: false });\n    window.addEventListener('touchmove', onTouchMove, { passive: false });\n    window.addEventListener('touchend', onTouchEnd, { passive: false });\n    window.addEventListener('keydown', onKey);\n\n    return () => {\n      el.removeEventListener('wheel', onWheel);\n      window.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('touchend', onTouchEnd);\n      window.removeEventListener('keydown', onKey);\n    };\n  }, [height, visible.length]);\n\n  // animation loop that also applies per-chapter transforms for dramatic page-change\n  useEffect(() => {\n    function frame() {\n      currentY.current = lerp(currentY.current, targetY.current, LERP);\n      const el = containerRef.current;\n      if (el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n\n      // per-chapter transforms (no blur, no per-frame transition writes)\n      chapterRefs.current.forEach((node, i) => {\n        if (!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height; // how far the chapter is from center in pages\n        const abs = Math.abs(offset);\n\n        const translateY = offset * 40; // subtle vertical offset\n        const rotate = offset * 8; // small rotation\n        const scale = 1 - Math.min(0.12, abs * 0.12); // scale down when away\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n\n        // apply only transform & opacity (GPU-friendly)\n        node.style.transform = `translate3d(0, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n\n      // snap behavior after inactivity\n      if (performance.now() - lastWheelAt.current > SNAP_DELAY) {\n        const nearest = Math.round(currentY.current / height);\n        const dest = Math.max(0, Math.min(nearest * height, Math.max(0, (visible.length - 1) * height)));\n        // gently move targetY towards dest\n        targetY.current = lerp(targetY.current, dest, 0.3);\n      }\n\n      // update active index (rounded) but only if changed\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) {\n        activeIndexRef.current = idx;\n        setActiveIndex(idx);\n      }\n\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n\n  function scrollToIndex(i) {\n    const max = Math.max(0, (visible.length - 1) * height);\n    const dest = Math.max(0, Math.min(i * height, max));\n    targetY.current = dest;\n    lastWheelAt.current = performance.now();\n  }\n\n  // AUTO ADVANCE constants (slightly reduced delays for snappier feel)\n  const AUTO_ADVANCE_DELAY_MS = 240; // used for MCQ/rating\n  const MINIGAME_ADVANCE_MS = 300; // used after mini-game completion\n\n  function handleAnswer(qid, value) {\n    setAnswers((prev) => ({ ...prev, [qid]: value }));\n    const questionDef = QUESTIONS.find((x) => x.id === qid) || {};\n    let gained = 0;\n    if (questionDef.type === \"mcq\" && questionDef.points) gained = questionDef.points[value] || 0;\n    else if (questionDef.type === \"rating\") gained = value * (questionDef.pointsPerStar || 1);\n    else if (questionDef.type === \"text\") gained = questionDef.points || 0;\n    if (gained) {\n      setScore((s) => s + gained);\n      pulseScore();\n    }\n\n    // Auto-advance for MCQ and rating types (shorter delay now)\n    if (questionDef.type === \"mcq\" || questionDef.type === \"rating\") {\n      const next = Math.min(activeIndexRef.current + 1, visible.length - 1);\n      setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS);\n    }\n  }\n\n  function pulseScore() {\n    const el = document.getElementById(\"score-badge\");\n    if (!el) return;\n    el.animate([\n      { transform: \"translateY(0) scale(1)\" },\n      { transform: \"translateY(-6px) scale(1.06)\" },\n      { transform: \"translateY(0) scale(1)\" },\n    ], { duration: 520, easing: \"ease-out\" });\n  }\n\n  function onMiniGameComplete(success) {\n    if (success) { setScore((s) => s + 30); pulseScore(); }\n    setAnswers((prev) => ({ ...prev, q4: success ? 'success' : 'fail' }));\n    setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), MINIGAME_ADVANCE_MS);\n  }\n\n  function finish() {\n    setShowFinish(true);\n    if (canvasRef.current) confettiBurst(canvasRef.current);\n  }\n\n  function resetAll() {\n    if (!confirm(\"Reset survey? This clears local progress.\")) return;\n    setAnswers({}); setScore(0); setShowFinish(false); localStorage.removeItem(\"gamifiedSurveyAnswers\"); localStorage.removeItem(\"gamifiedSurveyScore\"); targetY.current = 0; currentY.current = 0; if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)';\n  }\n\n  // chapter renderer\n  function ChapterContent({ item, idx }) {\n    if (item.type === \"stage\") {\n      return (\n        <div className=\"text-center max-w-2xl mx-auto\">\n          <motion.h1 initial={{ y: 40, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ duration: 0.8 }} className=\"text-4xl md:text-6xl font-extrabold tracking-tight bg-clip-text text-transparent\" style={{ backgroundImage: 'linear-gradient(90deg,#8b5cf6,#06b6d4)' }}>{item.title}</motion.h1>\n          {item.subtitle && <motion.p initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 0.95 }} transition={{ delay: 0.15 }} className=\"mt-4 text-gray-300\">{item.subtitle}</motion.p>}\n          <div className=\"mt-8 inline-flex gap-3\">\n            <button onClick={() => scrollToIndex(Math.min(idx + 1, visible.length - 1))} className=\"px-5 py-3 rounded-lg bg-gradient-to-r from-indigo-600 to-cyan-500 text-white\">Continue</button>\n          </div>\n        </div>\n      );\n    }\n\n    if (item.type === \"mcq\") {\n      return (\n        <div className=\"max-w-2xl w-full mx-auto\">\n          <div className=\"text-sm text-gray-400 italic mb-4\">{item.flavor}</div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {item.choices.map((c) => (\n              <motion.button key={c} whileHover={{ scale: 1.04 }} onClick={() => handleAnswer(item.id, c)} className={`py-5 px-6 rounded-2xl border ${answers[item.id] === c ? 'bg-gradient-to-r from-indigo-600 to-cyan-500 text-white shadow-2xl transform-gpu' : 'bg-gray-900 text-gray-300 border-gray-800'}`}>\n                <div className=\"font-semibold text-lg\">{c}</div>\n                <div className=\"text-xs text-gray-400 mt-1\">{item.points && item.points[c] ? `${item.points[c]} pts` : ''}</div>\n              </motion.button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    if (item.type === \"rating\") {\n      return (\n        <div className=\"text-center\">\n          <div className=\"text-sm text-gray-400 italic mb-4\">{item.flavor}</div>\n          <div className=\"flex items-center justify-center gap-4\">\n            {Array.from({ length: item.scale }).map((_, i) => (\n              <motion.button key={i} onClick={() => handleAnswer(item.id, i + 1)} whileTap={{ scale: 0.95 }} className={`w-14 h-14 rounded-full flex items-center justify-center ${answers[item.id] === i + 1 ? 'bg-yellow-400 text-black' : 'bg-gray-800 text-gray-300'}`}>{i + 1}</motion.button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    if (item.type === \"text\") {\n      return (\n        <div className=\"w-full max-w-2xl mx-auto\">\n          <div className=\"text-sm text-gray-400 italic mb-4\">{item.flavor}</div>\n          <textarea maxLength={item.maxLength} rows={5} value={answers[item.id] || \"\"} onChange={(e) => handleAnswer(item.id, e.target.value)} className=\"w-full p-4 rounded-xl border bg-gray-900 text-gray-100 border-gray-700\" placeholder=\"One-line pitch...\" />\n          <div className=\"text-xs text-gray-400 mt-2\">{(answers[item.id] || \"\").length}/{item.maxLength}</div>\n        </div>\n      );\n    }\n\n    if (item.type === \"minigame\") {\n      return <MiniGame timeLimit={item.timeLimit} onComplete={onMiniGameComplete} flavor={item.flavor} />;\n    }\n\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-gray-100 relative overflow-hidden\">\n      <style>{`\n        .cinema-stack { will-change: transform; }\n        .nav-dot { width:12px; height:12px; border-radius:9999px; }\n        .chapter-node { will-change: transform, opacity; }\n      `}</style>\n\n      {/* decorative gradient & subtle star-like noise */}\n      <div className=\"fixed inset-0 -z-30 bg-gradient-to-b from-transparent to-black/80\" />\n      <canvas ref={canvasRef} className=\"pointer-events-none fixed inset-0 z-40\" />\n\n      {/* score only (removed export/reset/instruction buttons as requested) */}\n      <div className=\"fixed right-6 top-6 z-50 flex flex-col gap-3 items-end\">\n        <div id=\"score-badge\" className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-semibold rounded-full text-sm shadow-lg\">{score} pts</div>\n        <div className=\"text-xs text-gray-400\">Level {Math.floor(score / 50) + 1}</div>\n      </div>\n\n      {/* nav dots (kept) */}\n      <nav className=\"fixed left-6 top-1/2 -translate-y-1/2 z-50 hidden md:flex flex-col gap-3\">\n        {visible.map((_, i) => (\n          <button key={i} onClick={() => scrollToIndex(i)} className={`nav-dot ${i === activeIndex ? 'bg-gradient-to-r from-indigo-400 to-pink-400 shadow-2xl' : 'bg-gray-700/40'}`} aria-label={`Go to chapter ${i + 1}`} />\n        ))}\n      </nav>\n\n      {/* cinematic stack (container transformed) */}\n      <div ref={containerRef} className=\"cinema-stack fixed inset-0 top-0 left-0 w-full will-change-transform\">\n        <div style={{ height: `${visible.length * height}px` }}>\n          {visible.map((item, i) => (\n            <section key={item.id} ref={addChapterRef} style={{ height: `${height}px` }} className=\"flex items-center justify-center px-6 md:px-12\">\n              <div className=\"w-full max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 items-center chapter-node\">\n                <aside className=\"col-span-1 hidden lg:flex flex-col gap-4 items-start\">\n                  <div className=\"text-sm text-gray-400\">Chapter</div>\n                  <motion.div animate={{ rotate: activeIndex === i ? 6 : 0 }} transition={{ type: \"spring\" }} className=\"text-3xl font-extrabold\">{String(i + 1).padStart(2, '0')}</motion.div>\n                  <div className=\"w-1 h-full bg-gradient-to-b from-indigo-600 to-pink-500 rounded-full opacity-30\" />\n                </aside>\n\n                <div className=\"col-span-2 bg-transparent rounded-xl p-6 text-center\">\n                  <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.8 }}>\n                    <ChapterContent item={item} idx={i} />\n                  </motion.div>\n                </div>\n              </div>\n            </section>\n          ))}\n        </div>\n      </div>\n\n      {/* finish overlay (kept minimal) */}\n      {showFinish && (\n        <div className=\"fixed inset-0 z-60 flex items-center justify-center\">\n          <div className=\"bg-black/70 backdrop-blur-sm rounded-xl p-8 text-center\">\n            <h2 className=\"text-4xl font-bold\">All done 🎉</h2>\n            <p className=\"mt-3 text-gray-300\">You earned <span className=\"font-semibold\">{score}</span> points. Thanks for playing!</p>\n            <div className=\"mt-6 flex gap-3 justify-center\">\n              <button onClick={() => resetAll()} className=\"px-4 py-2 rounded bg-red-700/20 text-red-300\">Reset</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}