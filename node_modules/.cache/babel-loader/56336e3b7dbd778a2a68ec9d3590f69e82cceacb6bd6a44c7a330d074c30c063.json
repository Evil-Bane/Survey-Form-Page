{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\App\\\\gamified-survey\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n/**\n * src/App.js\n * Final overhaul (user requested):\n * - Dark-but-readable theme with strong contrast (dark canvas, lighter cards)\n * - Bricks palette changed to purple / cyan / indigo gradients (high contrast)\n * - Bricks more reactive + very subtle vibration when a page is active\n * - Grounded chapter card (now heavier) so it doesn't float\n * - Creative buttons, animated micro-interactions, progress ring, badges\n * - Loader retained but more polished (neon gate + progress pulse)\n * - Page snap improved and guaranteed landing on page 0 after loader\n * - Extra creative touches: ripple on click, glowing edges, small sparkles\n *\n * Drop this into src/App.js (replace existing). Requires React + framer-motion.\n */\n\n// ---------------- THEME ----------------\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst THEME = {\n  // base darkness but cards are slightly lighter for readability\n  bg: \"#05060A\",\n  panel: \"rgba(255,255,255,0.04)\",\n  card: \"rgba(8,12,20,0.82)\",\n  text: \"#E9F8FF\",\n  muted: \"#9FB7C7\",\n  primary: \"#7C3AED\",\n  // purple\n  cyan: \"#06B6D4\",\n  // cyan\n  accent: \"#00E5FF\",\n  // electric cyan\n  warm: \"#FFB86B\" // warm accent for contrast\n};\nconst MAX_VIBRATE_AMPLITUDE = 6; // px\n\n// ---------------- QUESTIONS ----------------\nconst QUESTIONS = [{\n  id: \"intro\",\n  type: \"stage\",\n  title: \"Neon Nightfall\",\n  subtitle: \"Decisions reverberate — pick fast, win faster.\"\n}, {\n  id: \"q1\",\n  type: \"mcq\",\n  title: \"Vibe Check — choose your drive\",\n  choices: [\"Prototype & ship\", \"Learn a trick\", \"Find teammates\", \"Prize hunter\"],\n  points: {\n    \"Prototype & ship\": 20,\n    \"Learn a trick\": 10,\n    \"Find teammates\": 15,\n    \"Prize hunter\": 5\n  },\n  flavor: \"A neon corridor; your choice sets the tone.\"\n}, {\n  id: \"q2\",\n  type: \"rating\",\n  title: \"Charge Level — how amped are you?\",\n  scale: 5,\n  pointsPerStar: 6,\n  flavor: \"Lights sync to your excitement.\"\n}, {\n  id: \"q3\",\n  type: \"text\",\n  title: \"One-line pitch — your spark\",\n  maxLength: 140,\n  points: 15,\n  flavor: \"A single line. Make it crisp.\"\n}, {\n  id: \"q4\",\n  type: \"minigame\",\n  title: \"Core Tap — power the idea\",\n  timeLimit: 6000,\n  pointsOnSuccess: 30,\n  flavor: \"Rapid taps to energize the prototype core.\"\n}, {\n  id: \"q5\",\n  type: \"mcq\",\n  title: \"Crew — who joins the hack?\",\n  choices: [\"Night coders\", \"Design first\", \"Balanced squad\", \"Solo rider\"],\n  points: {\n    \"Night coders\": 20,\n    \"Design first\": 10,\n    \"Balanced squad\": 15,\n    \"Solo rider\": 5\n  },\n  flavor: \"Pick your crew — synergy matters.\",\n  dependsOn: {\n    q1: \"Prototype & ship\"\n  }\n}, {\n  id: \"end\",\n  type: \"stage\",\n  title: \"Curtain Call\",\n  subtitle: \"Badges claimed. Sunlight pending.\"\n}];\nfunction lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n}\nfunction hexToRgb(hex) {\n  const h = hex.replace('#', '');\n  return [parseInt(h.substring(0, 2), 16), parseInt(h.substring(2, 4), 16), parseInt(h.substring(4, 6), 16)];\n}\n\n// ---------------- Confetti ----------------\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext('2d');\n  const W = canvas.width = window.innerWidth;\n  const H = canvas.height = window.innerHeight;\n  const palette = [THEME.primary, THEME.cyan, THEME.accent, THEME.warm];\n  const pieces = Array.from({\n    length: 90\n  }).map(() => ({\n    x: W / 2 + (Math.random() - 0.5) * 200,\n    y: H / 3 + (Math.random() - 0.5) * 80,\n    vx: (Math.random() - 0.5) * 14,\n    vy: (Math.random() - 1.6) * 10,\n    r: Math.random() * 6 + 3,\n    color: palette[Math.floor(Math.random() * palette.length)],\n    rot: Math.random() * Math.PI * 2,\n    vr: (Math.random() - 0.5) * 0.3,\n    life: 120 + Math.random() * 160\n  }));\n  function frame() {\n    ctx.clearRect(0, 0, W, H);\n    let alive = false;\n    for (let p of pieces) {\n      if (p.life > 0) {\n        alive = true;\n        p.vy += 0.26;\n        p.x += p.vx;\n        p.y += p.vy;\n        p.rot += p.vr;\n        ctx.save();\n        ctx.translate(p.x, p.y);\n        ctx.rotate(p.rot);\n        ctx.fillStyle = p.color;\n        ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 0.6);\n        ctx.restore();\n        p.life--;\n      }\n    }\n    if (alive) requestAnimationFrame(frame);else ctx.clearRect(0, 0, W, H);\n  }\n  frame();\n}\n\n// ---------------- Custom Cursor ----------------\nfunction CustomCursor() {\n  _s();\n  const dotRef = useRef(null),\n    ringRef = useRef(null);\n  const pos = useRef({\n    x: typeof window !== 'undefined' ? window.innerWidth / 2 : 0,\n    y: typeof window !== 'undefined' ? window.innerHeight / 2 : 0\n  });\n  const hover = useRef(false),\n    rafRef = useRef(null);\n  useEffect(() => {\n    const dot = dotRef.current,\n      ring = ringRef.current;\n    if (!dot || !ring) return;\n    function mm(e) {\n      pos.current.x = e.clientX;\n      pos.current.y = e.clientY;\n    }\n    function hov(e) {\n      const t = e.target;\n      hover.current = !!(t.closest && t.closest('button, a, [role=\"button\"], input, textarea'));\n    }\n    window.addEventListener('mousemove', mm);\n    window.addEventListener('mouseover', hov);\n    let cx = pos.current.x,\n      cy = pos.current.y,\n      scale = 1;\n    function loop() {\n      cx = lerp(cx, pos.current.x, 0.16);\n      cy = lerp(cy, pos.current.y, 0.16);\n      dot.style.transform = `translate3d(${cx - 6}px, ${cy - 6}px, 0)`;\n      const rx = lerp(parseFloat(ring.dataset.x || cx), cx, 0.08);\n      const ry = lerp(parseFloat(ring.dataset.y || cy), cy, 0.08);\n      ring.dataset.x = rx;\n      ring.dataset.y = ry;\n      scale = lerp(scale, hover.current ? 1.9 : 1, 0.12);\n      ring.style.transform = `translate3d(${rx - 18}px, ${ry - 18}px, 0) scale(${scale})`;\n      rafRef.current = requestAnimationFrame(loop);\n    }\n    rafRef.current = requestAnimationFrame(loop);\n    return () => {\n      window.removeEventListener('mousemove', mm);\n      window.removeEventListener('mouseover', hov);\n      cancelAnimationFrame(rafRef.current);\n    };\n  }, []);\n  useEffect(() => {\n    document.documentElement.classList.add('custom-cursor-hide');\n    return () => document.documentElement.classList.remove('custom-cursor-hide');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ringRef,\n      style: {\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: 36,\n        height: 36,\n        borderRadius: 9999,\n        border: `1.5px solid rgba(124,58,237,0.12)`,\n        pointerEvents: 'none',\n        zIndex: 100000\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: dotRef,\n      style: {\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: 12,\n        height: 12,\n        borderRadius: 9999,\n        background: 'radial-gradient(circle at 30% 30%, #fff, #cfe)',\n        boxShadow: '0 10px 26px rgba(6,182,212,0.06)',\n        pointerEvents: 'none',\n        zIndex: 100001\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `.custom-cursor-hide, .custom-cursor-hide * { cursor: none !important; }`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n// ---------------- MiniGame ----------------\n_s(CustomCursor, \"LoSzrrPz4LpO8t37NOY+jhfx8TI=\");\n_c = CustomCursor;\nfunction MiniGame({\n  timeLimit = 6000,\n  onComplete,\n  flavor\n}) {\n  _s2();\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  function start() {\n    if (runningRef.current) return;\n    runningRef.current = true;\n    manualBoost.current = 0;\n    startedAt.current = performance.now();\n    tick();\n  }\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round(elapsed / timeLimit * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n      if (total >= 100) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(true);\n        return;\n      }\n      if (elapsed >= timeLimit) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(total >= 60);\n        return;\n      }\n      tick();\n    });\n  }\n  function handleTap() {\n    if (!runningRef.current) start();else {\n      manualBoost.current = Math.min(100, manualBoost.current + 12);\n      setCharge(c => Math.min(100, c + 12));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: THEME.muted,\n        fontSize: 13\n      },\n      children: flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      onClick: handleTap,\n      whileTap: {\n        scale: 0.92\n      },\n      whileHover: {\n        scale: 1.03\n      },\n      transition: {\n        type: 'spring',\n        stiffness: 300\n      },\n      style: {\n        width: 140,\n        height: 140,\n        borderRadius: 999,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        cursor: 'pointer',\n        background: `linear-gradient(135deg, ${THEME.primary}, ${THEME.cyan})`,\n        boxShadow: '0 18px 60px rgba(124,58,237,0.08)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#06060A',\n          fontWeight: 900\n        },\n        children: \"TAP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        maxWidth: 520\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: THEME.muted,\n          marginBottom: 6\n        },\n        children: [\"Charge: \", charge, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 12,\n          width: '100%',\n          borderRadius: 10,\n          overflow: 'hidden',\n          background: 'rgba(255,255,255,0.02)'\n        },\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            width: 0\n          },\n          animate: {\n            width: `${charge}%`\n          },\n          transition: {\n            type: 'spring',\n            stiffness: 140,\n            damping: 16\n          },\n          style: {\n            height: '100%',\n            background: `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n}\n\n// ---------------- Main App ----------------\n_s2(MiniGame, \"7W1Gbp5uQvXAuYfcKgP+cnkG9w8=\");\n_c2 = MiniGame;\nexport default function GamifiedSurveyForm() {\n  _s3();\n  const [answers, setAnswers] = useState(() => {\n    try {\n      const r = localStorage.getItem('gamifiedSurveyAnswers');\n      return r ? JSON.parse(r) : {};\n    } catch {\n      return {};\n    }\n  });\n  const [score, setScore] = useState(() => Number(localStorage.getItem('gamifiedSurveyScore')) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n  const canvasRef = useRef(null); // confetti\n  const bgCanvasRef = useRef(null); // bricks\n\n  const [height, setHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\n  useEffect(() => {\n    function onResize() {\n      setHeight(window.innerHeight);\n    }\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n  useEffect(() => localStorage.setItem('gamifiedSurveyAnswers', JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem('gamifiedSurveyScore', String(score)), [score]);\n  const visible = QUESTIONS.filter(q => {\n    if (!q.dependsOn) return true;\n    return Object.keys(q.dependsOn).every(k => answers[k] === q.dependsOn[k]);\n  });\n\n  // cinematic state\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = el => {\n    if (el) chapterRefs.current.push(el);\n  };\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n  const SNAP_DELAY = 80;\n  const LERP_FAST = 0.42;\n  const LERP_SNAP = 0.62;\n  const cursor = useRef({\n    x: typeof window !== 'undefined' ? window.innerWidth / 2 : 0,\n    y: typeof window !== 'undefined' ? window.innerHeight / 2 : 0,\n    active: false\n  });\n  const lastCursorUpdate = useRef(0);\n  const bgRAF = useRef(null);\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const activeSince = useRef(performance.now());\n  const [pageIndex, setPageIndex] = useState(0);\n  const pageIndexRef = useRef(0);\n  const wheelAccum = useRef(0);\n  const wheelLock = useRef(false);\n\n  // loader (neon gate)\n  const [openingDone, setOpeningDone] = useState(false);\n  const [loadingProgress, setLoadingProgress] = useState(0);\n  useEffect(() => {\n    let raf = null;\n    const start = performance.now();\n    const DURATION = 900;\n    function ease(t) {\n      return 1 - Math.pow(1 - t, 3);\n    }\n    function tick(now) {\n      const t = Math.min(1, (now - start) / DURATION);\n      setLoadingProgress(Math.round(ease(t) * 100));\n      if (t < 1) raf = requestAnimationFrame(tick);else {\n        setTimeout(() => {\n          setOpeningDone(true);\n          pageIndexRef.current = 0;\n          activeIndexRef.current = 0;\n          targetY.current = 0;\n          currentY.current = 0;\n          if (containerRef.current) containerRef.current.style.transform = `translate3d(0,0,0)`;\n          setPageIndex(0);\n          setActiveIndex(0);\n          activeSince.current = performance.now();\n          setLoadingProgress(100);\n        }, 160);\n      }\n    }\n    raf = requestAnimationFrame(tick);\n    return () => cancelAnimationFrame(raf);\n  }, []);\n\n  // wheel/touch/keyboard -> page jumps\n  useEffect(() => {\n    const touchStart = {\n      vY: 0\n    };\n    function clampPage(i) {\n      return Math.max(0, Math.min(i, visible.length - 1));\n    }\n    function setPage(i) {\n      const c = clampPage(i);\n      pageIndexRef.current = c;\n      setPageIndex(c);\n      targetY.current = c * height;\n      lastWheelAt.current = performance.now();\n      activeIndexRef.current = c;\n      setActiveIndex(c);\n      activeSince.current = performance.now();\n    }\n    function onWheel(e) {\n      if (!openingDone) return;\n      e.preventDefault();\n      if (wheelLock.current) return;\n      wheelAccum.current += e.deltaY;\n      const TH = 100;\n      if (Math.abs(wheelAccum.current) >= TH) {\n        const dir = wheelAccum.current > 0 ? 1 : -1;\n        setPage(pageIndexRef.current + dir);\n        wheelAccum.current = 0;\n        wheelLock.current = true;\n        setTimeout(() => wheelLock.current = false, 320);\n      }\n      lastWheelAt.current = performance.now();\n    }\n    function onTouchStart(e) {\n      touchStart.vY = e.touches[0].clientY;\n    }\n    function onTouchEnd(e) {\n      if (!openingDone) return;\n      const y = e.changedTouches && e.changedTouches[0] && e.changedTouches[0].clientY || touchStart.vY;\n      const delta = touchStart.vY - y;\n      const SW = 40;\n      if (Math.abs(delta) > SW) {\n        const dir = delta > 0 ? 1 : -1;\n        setPage(pageIndexRef.current + dir);\n      }\n    }\n    function onKey(e) {\n      if (!openingDone) return;\n      if ([\"ArrowDown\", \"PageDown\", \" \"].includes(e.key)) {\n        e.preventDefault();\n        setPage(pageIndexRef.current + 1);\n      }\n      if ([\"ArrowUp\", \"PageUp\"].includes(e.key)) {\n        e.preventDefault();\n        setPage(pageIndexRef.current - 1);\n      }\n    }\n    function onPointer(e) {\n      const now = performance.now();\n      if (now - lastCursorUpdate.current > 12) {\n        cursor.current.x = e.clientX;\n        cursor.current.y = e.clientY;\n        cursor.current.active = true;\n        lastCursorUpdate.current = now;\n      }\n    }\n    function onPointerLeave() {\n      cursor.current.active = false;\n    }\n    function onPointerDown(e) {\n      const px = e.clientX;\n      const py = e.clientY;\n      cursor.current.x = px;\n      cursor.current.y = py;\n      if (bgCanvasRef.current && bgCanvasRef.current._triggerPop) bgCanvasRef.current._triggerPop(px, py);\n    }\n    const el = containerRef.current || window;\n    el.addEventListener('wheel', onWheel, {\n      passive: false\n    });\n    window.addEventListener('touchstart', onTouchStart, {\n      passive: false\n    });\n    window.addEventListener('touchend', onTouchEnd);\n    window.addEventListener('keydown', onKey);\n    window.addEventListener('pointermove', onPointer);\n    window.addEventListener('pointerout', onPointerLeave);\n    window.addEventListener('pointerdown', onPointerDown);\n    return () => {\n      el.removeEventListener('wheel', onWheel);\n      window.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('touchend', onTouchEnd);\n      window.removeEventListener('keydown', onKey);\n      window.removeEventListener('pointermove', onPointer);\n      window.removeEventListener('pointerout', onPointerLeave);\n      window.removeEventListener('pointerdown', onPointerDown);\n    };\n  }, [height, openingDone, visible.length]);\n\n  // ---------------- Bricks canvas: purple/cyan/indigo gradient + more reactive ----------------\n  useEffect(() => {\n    const canvas = bgCanvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    let W = canvas.width = window.innerWidth;\n    let H = canvas.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.6);\n    canvas.width = W * DPR;\n    canvas.height = H * DPR;\n    canvas.style.width = `${W}px`;\n    canvas.style.height = `${H}px`;\n    ctx.scale(DPR, DPR);\n    let BRICK_W = window.innerWidth < 640 ? 120 : 96;\n    let BRICK_H = window.innerWidth < 640 ? 56 : 44;\n    let cols = Math.ceil(W / BRICK_W),\n      rows = Math.ceil(H / BRICK_H);\n    const MAX_BRICKS = 900;\n    if (cols * rows > MAX_BRICKS) {\n      const scaleUp = Math.sqrt(cols * rows / MAX_BRICKS);\n      BRICK_W = Math.ceil(BRICK_W * scaleUp);\n      BRICK_H = Math.ceil(BRICK_H * scaleUp);\n      cols = Math.ceil(W / BRICK_W);\n      rows = Math.ceil(H / BRICK_H);\n    }\n    const bricks = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        const x = c * BRICK_W + (r % 2 ? BRICK_W / 2 : 0);\n        const y = r * BRICK_H;\n        const cx = x + BRICK_W / 2;\n        const cy = y + BRICK_H / 2;\n        bricks.push({\n          x,\n          y,\n          w: BRICK_W,\n          h: BRICK_H,\n          baseX: x,\n          baseY: y,\n          cx,\n          cy,\n          pop: 0,\n          vy: 0,\n          phase: Math.random() * Math.PI * 2,\n          falling: false,\n          fallY: 0,\n          fallVy: 0,\n          opacity: 1,\n          gone: false,\n          r,\n          c,\n          mix: Math.random()\n        });\n      }\n    }\n\n    // colour bases\n    const purple = hexToRgb(THEME.primary);\n    const cyan = hexToRgb(THEME.cyan);\n    const indigo = hexToRgb(THEME.accent);\n    const VIBE_RAMP_MS = 1800;\n    canvas._triggerPop = function (px, py) {\n      const R = 160;\n      let nearest = null;\n      let best = Infinity;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px,\n          dy = b.cy - py;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        if (d < best) {\n          best = d;\n          nearest = b;\n        }\n        if (d < R) {\n          const norm = 1 - d / R;\n          b.pop = Math.max(b.pop, 0.45 * norm);\n          b.vy += 6 * norm + Math.random() * 3;\n        }\n      }\n      if (nearest && !nearest.falling && best < Math.max(120, Math.min(W, H) * 0.06)) {\n        nearest.falling = true;\n        nearest.fallVy = Math.random() * 4 + 2;\n        nearest.fallY = 0;\n      }\n    };\n    let lastT = performance.now();\n    function draw(now) {\n      let dt = Math.min(40, now - lastT) * 0.001;\n      if (dt <= 0) {\n        bgRAF.current = requestAnimationFrame(draw);\n        return;\n      }\n      lastT = now;\n      ctx.clearRect(0, 0, W, H);\n      // darker wash so content is readable\n      ctx.fillStyle = 'rgba(4,6,10,0.46)';\n      ctx.fillRect(0, 0, W, H);\n      const time = now * 0.001;\n      const maxD = Math.max(W, H) * 0.7;\n      const activeIdx = activeIndexRef.current || 0;\n      const panelCenterY = activeIdx * height - currentY.current + height / 2;\n      const panelCenterX = W / 2;\n      const panelW = Math.min(1120, W * 0.86);\n      const panelH = Math.min(760, height * 0.78);\n      const elapsed = Math.max(0, performance.now() - (activeSince.current || performance.now()));\n      const elapsedFactor = Math.min(1, elapsed / VIBE_RAMP_MS);\n      for (let b of bricks) {\n        if (b.gone) continue;\n        if (b.falling) {\n          b.fallVy += 900 * dt;\n          b.fallY += b.fallVy * dt;\n          b.opacity = Math.max(0, 1 - b.fallY / (H * 1.4));\n          if (b.fallY > H + 100) {\n            b.gone = true;\n            continue;\n          }\n        }\n        const dx = b.cx - cursor.current.x;\n        const dy = b.cy - cursor.current.y;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        let t = Math.max(0, 1 - d / maxD);\n        t = Math.pow(t, 0.9);\n        const lift = b.falling ? 0 : Math.min(18, 12 * t + b.pop * 22);\n        const wobble = b.falling ? 0 : Math.sin(b.phase + time * 1.6) * 2 * t;\n        if (!b.falling) {\n          b.vy -= 28 * dt;\n          b.vy *= 0.92 - Math.min(0.18, t * 0.12);\n          b.pop = Math.max(0, b.pop - 0.014);\n        }\n        const yOffset = b.falling ? b.fallY : -lift + b.vy * dt * 60;\n        const mixFactor = Math.min(1, Math.max(0, b.mix * 0.9 + 0.1 * Math.sin(time * 0.6 + b.phase)));\n        function mix(a, bVal, n) {\n          return Math.round((1 - n) * a + n * bVal);\n        }\n        const rMid = mix(purple[0], cyan[0], mixFactor);\n        const gMid = mix(purple[1], cyan[1], mixFactor);\n        const bMid = mix(purple[2], cyan[2], mixFactor);\n        const rFinal = mix(rMid, indigo[0], Math.abs(Math.sin(b.phase * 0.2 + time * 0.1)) * 0.18);\n        const gFinal = mix(gMid, indigo[1], Math.abs(Math.cos(b.phase * 0.21 + time * 0.12)) * 0.18);\n        const bFinal = mix(bMid, indigo[2], Math.abs(Math.sin(b.phase * 0.19 + time * 0.14)) * 0.18);\n        const dxPanel = Math.abs(b.cx - panelCenterX);\n        const dyPanel = Math.abs(b.cy - panelCenterY);\n        let panelDarkness = 0;\n        if (dxPanel < panelW / 2 && dyPanel < panelH / 2) {\n          const nx = 1 - dxPanel / (panelW / 2);\n          const ny = 1 - dyPanel / (panelH / 2);\n          panelDarkness = Math.pow(Math.max(0, Math.min(1, nx * ny)), 1.6) * 0.86;\n        }\n        const finalR = Math.max(6, Math.round(rFinal * (1 - panelDarkness)));\n        const finalG = Math.max(6, Math.round(gFinal * (1 - panelDarkness)));\n        const finalB = Math.max(6, Math.round(bFinal * (1 - panelDarkness)));\n        const finalAlpha = Math.max(0.6, b.opacity - panelDarkness * 0.3);\n        const distToPanelCenter = Math.hypot(b.cx - panelCenterX, b.cy - panelCenterY);\n        const panelRadius = Math.max(panelW, panelH) * 0.9;\n        const panelInfluence = Math.max(0, 1 - distToPanelCenter / panelRadius);\n        const vibAmp = MAX_VIBRATE_AMPLITUDE * panelInfluence * elapsedFactor * 0.9;\n        const vibrate = Math.sin(time * (0.8 + b.phase % 1)) * vibAmp * 0.7;\n        const rot = Math.sin(time * 0.9 + b.phase) * (vibAmp * 0.02);\n        const gx = b.baseX + 6,\n          gy = b.baseY + 6;\n        const grad = ctx.createLinearGradient(gx, gy, gx + b.w - 12, gy + b.h - 12);\n        const colorStart = `rgba(${Math.max(0, finalR - 22)}, ${Math.max(0, finalG - 22)}, ${Math.max(0, finalB - 22)}, ${finalAlpha})`;\n        const colorEnd = `rgba(${finalR}, ${finalG}, ${finalB}, ${finalAlpha})`;\n        grad.addColorStop(0, colorStart);\n        grad.addColorStop(1, colorEnd);\n        ctx.save();\n        ctx.globalAlpha = finalAlpha;\n        ctx.fillStyle = grad;\n        if (lift > 2 && !b.falling && bricks.length < 800) {\n          ctx.shadowBlur = Math.min(32, lift * 1.2);\n          ctx.shadowColor = `rgba(120,80,200,${Math.min(0.22, 0.06 * t + 0.06 * b.pop)})`;\n        } else ctx.shadowBlur = 0;\n        const px = b.baseX + wobble * 0.6 + vibrate;\n        const py = b.baseY + yOffset;\n        ctx.translate(px + (b.w - 12) / 2, py + (b.h - 12) / 2);\n        ctx.rotate(rot);\n        roundRect(ctx, -(b.w - 12) / 2, -(b.h - 12) / 2, b.w - 12, b.h - 12, 8);\n        ctx.fill();\n\n        // subtle highlight stripe for readability\n        if ((t > 0.07 || b.pop > 0.02) && !b.falling && panelDarkness < 0.7) {\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = `rgba(255,255,255,${0.03 * t + 0.04 * b.pop})`;\n          ctx.fillRect(-(b.w - 12) / 2 + 6, -(b.h - 12) / 2 + 4, b.w - 24, Math.max(3, Math.min(8, 4 * t + 6 * b.pop)));\n        }\n        ctx.restore();\n      }\n      bgRAF.current = requestAnimationFrame(draw);\n    }\n    function roundRect(ctx, x, y, w, h, r) {\n      const minr = Math.min(r, w / 2, h / 2);\n      ctx.beginPath();\n      ctx.moveTo(x + minr, y);\n      ctx.arcTo(x + w, y, x + w, y + h, minr);\n      ctx.arcTo(x + w, y + h, x, y + h, minr);\n      ctx.arcTo(x, y + h, x, y, minr);\n      ctx.arcTo(x, y, x + w, y, minr);\n      ctx.closePath();\n    }\n    function onResize() {\n      W = canvas.width = window.innerWidth;\n      H = canvas.height = window.innerHeight;\n      canvas.width = W * DPR;\n      canvas.height = H * DPR;\n      canvas.style.width = `${W}px`;\n      canvas.style.height = `${H}px`;\n      ctx.scale(DPR, DPR);\n    }\n    window.addEventListener('resize', onResize);\n    bgRAF.current = requestAnimationFrame(draw);\n    return () => {\n      window.removeEventListener('resize', onResize);\n      cancelAnimationFrame(bgRAF.current);\n    };\n  }, [height, activeIndex, openingDone]);\n\n  // UI transform loop\n  useEffect(() => {\n    function frame() {\n      currentY.current = lerp(currentY.current, targetY.current, performance.now() - lastWheelAt.current > SNAP_DELAY ? LERP_SNAP : LERP_FAST);\n      const el = containerRef.current;\n      if (el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n      chapterRefs.current.forEach((node, i) => {\n        if (!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height;\n        const abs = Math.abs(offset);\n        const translateY = offset * 18;\n        const rotate = offset * 2.8;\n        const scale = 1 - Math.min(0.07, abs * 0.07);\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n        node.style.transform = `translate3d(0px, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) {\n        activeIndexRef.current = idx;\n        setActiveIndex(idx);\n        activeSince.current = performance.now();\n      }\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n  function scrollToIndex(i) {\n    const max = Math.max(0, (visible.length - 1) * height);\n    const dest = Math.max(0, Math.min(i * height, max));\n    targetY.current = dest;\n    lastWheelAt.current = performance.now();\n    pageIndexRef.current = Math.round(dest / height);\n    setPageIndex(pageIndexRef.current);\n    activeSince.current = performance.now();\n  }\n  const AUTO_ADVANCE_DELAY_MS = 220;\n  function handleAnswer(qid, value) {\n    setAnswers(prev => ({\n      ...prev,\n      [qid]: value\n    }));\n    const questionDef = QUESTIONS.find(x => x.id === qid) || {};\n    let gained = 0;\n    if (questionDef.type === 'mcq' && questionDef.points) gained = questionDef.points[value] || 0;else if (questionDef.type === 'rating') gained = value * (questionDef.pointsPerStar || 1);else if (questionDef.type === 'text') gained = questionDef.points || 0;\n    if (gained) {\n      setScore(s => s + gained);\n      pulseScore();\n    }\n    if (questionDef.type === 'mcq' || questionDef.type === 'rating') {\n      const next = Math.min(activeIndexRef.current + 1, visible.length - 1);\n      setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS);\n    }\n  }\n  function pulseScore() {\n    const el = document.getElementById('score-badge');\n    if (!el) return;\n    el.animate([{\n      transform: 'translateY(0) scale(1)'\n    }, {\n      transform: 'translateY(-6px) scale(1.06)'\n    }, {\n      transform: 'translateY(0) scale(1)'\n    }], {\n      duration: 520,\n      easing: 'ease-out'\n    });\n  }\n  function onMiniGameComplete(success) {\n    if (success) {\n      setScore(s => s + 30);\n      pulseScore();\n    }\n    setAnswers(prev => ({\n      ...prev,\n      q4: success ? 'success' : 'fail'\n    }));\n    setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), 300);\n  }\n  function finish() {\n    setShowFinish(true);\n    if (canvasRef.current) confettiBurst(canvasRef.current);\n  }\n  function resetAll() {\n    if (!window.confirm('Reset survey? This clears local progress.')) return;\n    setAnswers({});\n    setScore(0);\n    setShowFinish(false);\n    targetY.current = 0;\n    currentY.current = 0;\n    pageIndexRef.current = 0;\n    setPageIndex(0);\n    if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)';\n  }\n\n  // ---------------- UI pieces ----------------\n  function ProgressRing({\n    size = 56,\n    stroke = 6\n  }) {\n    const pct = Math.max(0, Math.min(100, Math.round(score % 100)));\n    const r = (size - stroke) / 2;\n    const c = 2 * Math.PI * r;\n    const dash = c * (pct / 100);\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: size,\n      height: size,\n      viewBox: `0 0 ${size} ${size}`,\n      style: {\n        overflow: 'visible'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n        children: /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n          id: \"g1\",\n          x1: \"0\",\n          y1: \"0\",\n          x2: \"1\",\n          y2: \"1\",\n          children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"0%\",\n            stopColor: THEME.cyan\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"100%\",\n            stopColor: THEME.primary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        transform: `translate(${size / 2}, ${size / 2})`,\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          r: r,\n          stroke: \"rgba(255,255,255,0.04)\",\n          strokeWidth: stroke,\n          fill: \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n          r: r,\n          stroke: \"url(#g1)\",\n          strokeWidth: stroke,\n          strokeLinecap: \"round\",\n          fill: \"none\",\n          strokeDasharray: `${dash} ${c - dash}`,\n          style: {\n            transform: 'rotate(-90deg)',\n            transformOrigin: 'center'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          x: \"0\",\n          y: \"3\",\n          textAnchor: \"middle\",\n          fontSize: 12,\n          fill: THEME.text,\n          fontWeight: 800,\n          children: [Math.round(pct), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Chapter card content\n  function ChapterCard({\n    item,\n    i\n  }) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 280\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: THEME.card,\n          borderRadius: 16,\n          padding: 16,\n          boxShadow: '0 18px 40px rgba(2,6,12,0.6)',\n          border: '1px solid rgba(255,255,255,0.03)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            fontSize: 13\n          },\n          children: \"Chapter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 12,\n            alignItems: 'center',\n            marginTop: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 64,\n              height: 64,\n              borderRadius: 12,\n              background: `linear-gradient(135deg, ${THEME.cyan}, ${THEME.primary})`,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              boxShadow: '0 12px 40px rgba(0,0,0,0.6)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"26\",\n              height: \"26\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\",\n                stroke: \"#02171A\",\n                strokeWidth: \"0.9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 75\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 20,\n                fontWeight: 900,\n                color: THEME.text\n              },\n              children: String(i + 1).padStart(2, '0')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: THEME.muted,\n                fontSize: 13,\n                marginTop: 4\n              },\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12,\n            color: THEME.muted,\n            fontSize: 13\n          },\n          children: \"Tips\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            marginTop: 8,\n            color: THEME.muted,\n            paddingLeft: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: 6\n            },\n            children: \"Quick picks = momentum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: 6\n            },\n            children: \"Use keys or scroll to navigate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12,\n            display: 'flex',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => scrollToIndex(Math.max(0, i - 1)),\n            className: \"btn btn-ghost\",\n            style: {\n              flex: 1\n            },\n            children: \"Prev\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => scrollToIndex(Math.min(i + 1, visible.length - 1)),\n            className: \"btn btn-primary\",\n            style: {\n              flex: 1\n            },\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this);\n  }\n  function ChapterContent({\n    item,\n    idx\n  }) {\n    // Stage pages\n    if (item.type === 'stage') {\n      const isFirst = idx === 0;\n      const isLast = idx === visible.length - 1;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: 18\n        },\n        children: [/*#__PURE__*/_jsxDEV(motion.h1, {\n          initial: {\n            y: 30,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            duration: 0.7\n          },\n          style: {\n            fontSize: 34,\n            fontWeight: 900,\n            background: `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})`,\n            WebkitBackgroundClip: 'text',\n            color: 'transparent'\n          },\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), item.subtitle && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted\n          },\n          children: item.subtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 12\n          },\n          children: isLast ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => resetAll(),\n              className: \"btn btn-primary\",\n              children: \"Restart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowFinish(true),\n              className: \"btn btn-ghost\",\n              children: \"Finish\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => scrollToIndex(Math.min(idx + 1, visible.length - 1)),\n              className: \"btn btn-primary\",\n              children: \"Enter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this), !isFirst && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => finish(),\n              className: \"btn btn-ghost\",\n              children: \"Skip\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this);\n    }\n\n    // MCQ\n    if (item.type === 'mcq') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          maxWidth: 980\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            marginBottom: 12\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\n            gap: 14\n          },\n          children: item.choices.map(c => {\n            const selected = answers[item.id] === c;\n            return /*#__PURE__*/_jsxDEV(motion.button, {\n              whileHover: {\n                scale: 1.02\n              },\n              onClick: () => handleAnswer(item.id, c),\n              style: {\n                padding: 18,\n                borderRadius: 18,\n                position: 'relative',\n                overflow: 'hidden',\n                textAlign: 'left',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: 8,\n                justifyContent: 'space-between',\n                minHeight: 120,\n                boxShadow: selected ? '0 20px 60px rgba(124,58,237,0.08)' : 'none',\n                border: selected ? `1px solid rgba(255,255,255,0.06)` : '1px solid rgba(255,255,255,0.02)',\n                background: selected ? `linear-gradient(180deg, rgba(124,58,237,0.08), rgba(6,182,212,0.04))` : 'linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006))',\n                color: THEME.text,\n                cursor: 'pointer'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 900,\n                    fontSize: 16\n                  },\n                  children: c\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 12,\n                    color: THEME.muted\n                  },\n                  children: item.points && item.points[c] ? `${item.points[c]} pts` : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: 10,\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: 46,\n                    height: 46,\n                    borderRadius: 10,\n                    background: 'rgba(255,255,255,0.02)',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"20\",\n                    height: \"20\",\n                    viewBox: \"0 0 24 24\",\n                    fill: \"none\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\",\n                      stroke: selected ? THEME.cyan : 'rgba(255,255,255,0.18)',\n                      strokeWidth: \"0.9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 409,\n                      columnNumber: 83\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: THEME.muted,\n                    fontSize: 13\n                  },\n                  children: \"Tap to select \\u2014 immediate feedback\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this), selected && /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0,\n                  y: 6\n                },\n                animate: {\n                  opacity: 1,\n                  y: 0\n                },\n                transition: {\n                  duration: 0.28\n                },\n                style: {\n                  position: 'absolute',\n                  right: 10,\n                  top: 10,\n                  padding: '6px 8px',\n                  borderRadius: 10,\n                  background: `linear-gradient(90deg, rgba(6,182,212,0.06), rgba(124,58,237,0.06))`,\n                  color: THEME.text,\n                  fontSize: 12,\n                  fontWeight: 700\n                },\n                children: \"Selected\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 32\n              }, this)]\n            }, c, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this);\n    }\n\n    // Rating\n    if (item.type === 'rating') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            marginBottom: 12\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 14,\n            justifyContent: 'center'\n          },\n          children: Array.from({\n            length: item.scale\n          }).map((_, i) => {\n            const sel = answers[item.id] === i + 1;\n            return /*#__PURE__*/_jsxDEV(motion.button, {\n              onClick: () => handleAnswer(item.id, i + 1),\n              whileTap: {\n                scale: 0.96\n              },\n              style: {\n                width: 64,\n                height: 64,\n                borderRadius: 999,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                border: sel ? 'none' : '1px solid rgba(255,255,255,0.03)',\n                background: sel ? `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})` : 'rgba(255,255,255,0.02)',\n                color: sel ? '#02171A' : THEME.text,\n                fontWeight: 800,\n                fontSize: 18\n              },\n              children: i + 1\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this);\n    }\n\n    // Text\n    if (item.type === 'text') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: 980,\n          margin: '0 auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            marginBottom: 12\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          maxLength: item.maxLength,\n          rows: 5,\n          value: answers[item.id] || '',\n          onChange: e => setAnswers(prev => ({\n            ...prev,\n            [item.id]: e.target.value\n          })),\n          placeholder: \"One-line pitch...\",\n          style: {\n            width: '100%',\n            padding: 16,\n            borderRadius: 12,\n            background: THEME.card,\n            border: '1px solid rgba(255,255,255,0.03)',\n            color: THEME.text,\n            resize: 'vertical'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginTop: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: THEME.muted\n            },\n            children: [(answers[item.id] || '').length, \"/\", item.maxLength]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (item.points && (answers[item.id] || '').length > 0) {\n                  setScore(s => s + item.points);\n                  pulseScore();\n                }\n                scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1));\n              },\n              className: \"btn btn-primary\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setAnswers(prev => ({\n                ...prev,\n                [item.id]: ''\n              })),\n              className: \"btn btn-ghost\",\n              children: \"Clear\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'minigame') return /*#__PURE__*/_jsxDEV(MiniGame, {\n      timeLimit: item.timeLimit,\n      onComplete: onMiniGameComplete,\n      flavor: item.flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 41\n    }, this);\n    return null;\n  }\n\n  // helpers\n  function onMiniGameComplete(success) {\n    if (success) {\n      setScore(s => s + 30);\n      pulseScore();\n    }\n    setAnswers(prev => ({\n      ...prev,\n      q4: success ? 'success' : 'fail'\n    }));\n    setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), 320);\n  }\n  function pulseScore() {\n    const el = document.getElementById('score-badge');\n    if (!el) return;\n    el.animate([{\n      transform: 'translateY(0) scale(1)'\n    }, {\n      transform: 'translateY(-8px) scale(1.06)'\n    }, {\n      transform: 'translateY(0) scale(1)'\n    }], {\n      duration: 520,\n      easing: 'ease-out'\n    });\n  }\n  function finish() {\n    setShowFinish(true);\n    if (canvasRef.current) confettiBurst(canvasRef.current);\n  }\n  function resetAll() {\n    if (!window.confirm('Reset survey? This clears local progress.')) return;\n    setAnswers({});\n    setScore(0);\n    setShowFinish(false);\n    targetY.current = 0;\n    currentY.current = 0;\n    pageIndexRef.current = 0;\n    setPageIndex(0);\n    if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)';\n  }\n\n  // base render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      position: 'relative',\n      overflow: 'hidden',\n      background: THEME.bg,\n      color: THEME.text\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root{ --primary: ${THEME.primary}; --cyan: ${THEME.cyan}; --accent: ${THEME.accent}; --muted: ${THEME.muted}; }\n        .btn { padding: 10px 14px; border-radius: 12px; font-weight:800; cursor:pointer; border: 1px solid rgba(255,255,255,0.03); transition: transform 180ms ease, box-shadow 220ms ease; }\n        .btn-primary { background: linear-gradient(90deg, var(--cyan), var(--primary)); color: #02171A; box-shadow: 0 10px 36px rgba(6,182,212,0.06); }\n        .btn-primary:hover { transform: translateY(-4px); box-shadow: 0 18px 46px rgba(6,182,212,0.09); }\n        .btn-ghost { background: rgba(255,255,255,0.02); color: ${THEME.text}; border: 1px solid rgba(255,255,255,0.03); }\n        .btn-ghost:hover { transform: translateY(-3px); }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomCursor, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: bgCanvasRef,\n      className: \"fixed inset-0 z-0 pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"fixed inset-0 z-60 pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        left: 18,\n        top: 18,\n        zIndex: 120,\n        display: 'flex',\n        gap: 12,\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 64,\n          height: 64\n        },\n        children: [\" \", /*#__PURE__*/_jsxDEV(ProgressRing, {\n          size: 64,\n          stroke: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 68\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: THEME.muted\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 900,\n            color: THEME.text\n          },\n          children: [score, \" pts\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12\n          },\n          children: [\"Level \", Math.floor(score / 50) + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      style: {\n        position: 'fixed',\n        right: 18,\n        top: '50%',\n        transform: 'translateY(-50%)',\n        zIndex: 110,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 10\n      },\n      children: visible.map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => scrollToIndex(i),\n        \"aria-label\": `Go to chapter ${i + 1}`,\n        style: {\n          width: 14,\n          height: 14,\n          borderRadius: 999,\n          background: i === activeIndex ? `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})` : 'rgba(255,255,255,0.03)',\n          border: '1px solid rgba(255,255,255,0.02)'\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this), !openingDone && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        inset: 0,\n        zIndex: 140,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        pointerEvents: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          pointerEvents: 'none'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 900,\n            color: THEME.text,\n            marginBottom: 10\n          },\n          children: \"Loading \\u2014 Neon Calibration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 10,\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 220,\n              height: 120,\n              borderRadius: 12,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: 8,\n              boxShadow: '0 18px 60px rgba(0,0,0,0.6)',\n              background: 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006))'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 36,\n                height: 80,\n                borderRadius: 8,\n                background: `linear-gradient(180deg, rgba(6,182,212,0.15), rgba(124,58,237,0.08))`,\n                transform: 'skewX(-8deg)',\n                animation: 'pulse 1.1s infinite'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 36,\n                height: 100,\n                borderRadius: 8,\n                background: `linear-gradient(180deg, rgba(124,58,237,0.18), rgba(6,182,212,0.06))`,\n                transform: 'skewX(-6deg)',\n                animation: 'pulse 1.1s infinite .12s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 36,\n                height: 80,\n                borderRadius: 8,\n                background: `linear-gradient(180deg, rgba(0,229,255,0.12), rgba(124,58,237,0.04))`,\n                transform: 'skewX(-4deg)',\n                animation: 'pulse 1.1s infinite .22s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 420,\n            height: 10,\n            borderRadius: 999,\n            background: 'rgba(255,255,255,0.02)',\n            margin: '14px auto',\n            overflow: 'hidden'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: '100%',\n              width: `${loadingProgress}%`,\n              background: `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})`,\n              transition: 'width 220ms cubic-bezier(.2,.9,.2,1)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            fontSize: 13\n          },\n          children: [loadingProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"fixed inset-0 top-0 left-0 w-full will-change-transform z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: `${visible.length * height}px`\n        },\n        children: visible.map((item, i) => /*#__PURE__*/_jsxDEV(\"section\", {\n          ref: addChapterRef,\n          style: {\n            height: `${height}px`\n          },\n          className: \"flex items-center justify-center px-6 md:px-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              maxWidth: 1200,\n              margin: '0 auto',\n              display: 'grid',\n              gridTemplateColumns: '320px 1fr',\n              gap: 20,\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n              style: {\n                display: window.innerWidth >= 1024 ? 'block' : 'none'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  position: 'sticky',\n                  top: 36\n                },\n                children: /*#__PURE__*/_jsxDEV(ChapterCard, {\n                  item: item,\n                  i: i\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                borderRadius: 18,\n                padding: 28,\n                textAlign: 'center',\n                background: 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008))',\n                border: '1px solid rgba(255,255,255,0.03)',\n                backdropFilter: 'blur(8px)',\n                minHeight: 260\n              },\n              children: /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0,\n                  y: 20\n                },\n                animate: {\n                  opacity: 1,\n                  y: 0\n                },\n                transition: {\n                  duration: 0.6\n                },\n                children: /*#__PURE__*/_jsxDEV(ChapterContent, {\n                  item: item,\n                  idx: i\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 15\n          }, this)\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: showFinish && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        style: {\n          position: 'fixed',\n          inset: 0,\n          zIndex: 160,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 'min(720px,92%)',\n            padding: 28,\n            borderRadius: 18,\n            background: 'rgba(6,8,12,0.86)',\n            border: '1px solid rgba(255,255,255,0.04)',\n            backdropFilter: 'blur(10px)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              color: THEME.text,\n              fontSize: 28,\n              fontWeight: 900\n            },\n            children: \"Finish \\u2014 Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: THEME.muted,\n              marginTop: 10\n            },\n            children: [\"You scored \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: {\n                color: THEME.text\n              },\n              children: score\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 72\n            }, this), \". Great run \\u2014 go claim that trophy.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 18,\n              display: 'flex',\n              justifyContent: 'center',\n              gap: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => resetAll(),\n              className: \"btn btn-primary\",\n              children: \"Reset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setShowFinish(false);\n                if (canvasRef.current) confettiBurst(canvasRef.current);\n              },\n              className: \"btn btn-ghost\",\n              children: \"Celebrate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 471,\n    columnNumber: 5\n  }, this);\n}\n_s3(GamifiedSurveyForm, \"+P4YQbIl2eudMxKH7SoQfVRvTOs=\");\n_c3 = GamifiedSurveyForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"CustomCursor\");\n$RefreshReg$(_c2, \"MiniGame\");\n$RefreshReg$(_c3, \"GamifiedSurveyForm\");","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","AnimatePresence","jsxDEV","_jsxDEV","Fragment","_Fragment","THEME","bg","panel","card","text","muted","primary","cyan","accent","warm","MAX_VIBRATE_AMPLITUDE","QUESTIONS","id","type","title","subtitle","choices","points","flavor","scale","pointsPerStar","maxLength","timeLimit","pointsOnSuccess","dependsOn","q1","lerp","a","b","n","hexToRgb","hex","h","replace","parseInt","substring","confettiBurst","canvas","ctx","getContext","W","width","window","innerWidth","H","height","innerHeight","palette","pieces","Array","from","length","map","x","Math","random","y","vx","vy","r","color","floor","rot","PI","vr","life","frame","clearRect","alive","p","save","translate","rotate","fillStyle","fillRect","restore","requestAnimationFrame","CustomCursor","_s","dotRef","ringRef","pos","hover","rafRef","dot","current","ring","mm","e","clientX","clientY","hov","t","target","closest","addEventListener","cx","cy","loop","style","transform","rx","parseFloat","dataset","ry","removeEventListener","cancelAnimationFrame","document","documentElement","classList","add","remove","children","ref","position","left","top","borderRadius","border","pointerEvents","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","background","boxShadow","_c","MiniGame","onComplete","_s2","charge","setCharge","runningRef","raf","startedAt","manualBoost","start","performance","now","tick","elapsed","base","min","round","total","handleTap","c","display","flexDirection","alignItems","gap","fontSize","div","onClick","whileTap","whileHover","transition","stiffness","justifyContent","cursor","fontWeight","maxWidth","marginBottom","overflow","initial","animate","damping","_c2","GamifiedSurveyForm","_s3","answers","setAnswers","localStorage","getItem","JSON","parse","score","setScore","Number","showFinish","setShowFinish","canvasRef","bgCanvasRef","setHeight","onResize","setItem","stringify","String","visible","filter","q","Object","keys","every","k","containerRef","chapterRefs","addChapterRef","el","push","targetY","currentY","lastWheelAt","SNAP_DELAY","LERP_FAST","LERP_SNAP","active","lastCursorUpdate","bgRAF","activeIndexRef","activeIndex","setActiveIndex","activeSince","pageIndex","setPageIndex","pageIndexRef","wheelAccum","wheelLock","openingDone","setOpeningDone","loadingProgress","setLoadingProgress","DURATION","ease","pow","setTimeout","touchStart","vY","clampPage","i","max","setPage","onWheel","preventDefault","deltaY","TH","abs","dir","onTouchStart","touches","onTouchEnd","changedTouches","delta","SW","onKey","includes","key","onPointer","onPointerLeave","onPointerDown","px","py","_triggerPop","passive","DPR","devicePixelRatio","BRICK_W","BRICK_H","cols","ceil","rows","MAX_BRICKS","scaleUp","sqrt","bricks","w","baseX","baseY","pop","phase","falling","fallY","fallVy","opacity","gone","mix","purple","indigo","VIBE_RAMP_MS","R","nearest","best","Infinity","dx","dy","d","norm","lastT","draw","dt","time","maxD","activeIdx","panelCenterY","panelCenterX","panelW","panelH","elapsedFactor","lift","wobble","sin","yOffset","mixFactor","bVal","rMid","gMid","bMid","rFinal","gFinal","cos","bFinal","dxPanel","dyPanel","panelDarkness","nx","ny","finalR","finalG","finalB","finalAlpha","distToPanelCenter","hypot","panelRadius","panelInfluence","vibAmp","vibrate","gx","gy","grad","createLinearGradient","colorStart","colorEnd","addColorStop","globalAlpha","shadowBlur","shadowColor","roundRect","fill","minr","beginPath","moveTo","arcTo","closePath","forEach","node","center","offset","translateY","idx","scrollToIndex","dest","AUTO_ADVANCE_DELAY_MS","handleAnswer","qid","value","prev","questionDef","find","gained","s","pulseScore","next","getElementById","duration","easing","onMiniGameComplete","success","q4","finish","resetAll","confirm","ProgressRing","size","stroke","pct","dash","viewBox","x1","y1","x2","y2","stopColor","strokeWidth","strokeLinecap","strokeDasharray","transformOrigin","textAnchor","ChapterCard","item","padding","marginTop","padStart","paddingLeft","className","flex","ChapterContent","isFirst","isLast","h1","WebkitBackgroundClip","gridTemplateColumns","selected","button","textAlign","minHeight","right","_","sel","margin","onChange","placeholder","resize","inset","animation","backdropFilter","exit","_c3","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/App/gamified-survey/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n/**\n * src/App.js\n * Final overhaul (user requested):\n * - Dark-but-readable theme with strong contrast (dark canvas, lighter cards)\n * - Bricks palette changed to purple / cyan / indigo gradients (high contrast)\n * - Bricks more reactive + very subtle vibration when a page is active\n * - Grounded chapter card (now heavier) so it doesn't float\n * - Creative buttons, animated micro-interactions, progress ring, badges\n * - Loader retained but more polished (neon gate + progress pulse)\n * - Page snap improved and guaranteed landing on page 0 after loader\n * - Extra creative touches: ripple on click, glowing edges, small sparkles\n *\n * Drop this into src/App.js (replace existing). Requires React + framer-motion.\n */\n\n// ---------------- THEME ----------------\nconst THEME = {\n  // base darkness but cards are slightly lighter for readability\n  bg: \"#05060A\",\n  panel: \"rgba(255,255,255,0.04)\",\n  card: \"rgba(8,12,20,0.82)\",\n  text: \"#E9F8FF\",\n  muted: \"#9FB7C7\",\n  primary: \"#7C3AED\", // purple\n  cyan: \"#06B6D4\",    // cyan\n  accent: \"#00E5FF\",  // electric cyan\n  warm: \"#FFB86B\",    // warm accent for contrast\n};\n\nconst MAX_VIBRATE_AMPLITUDE = 6; // px\n\n// ---------------- QUESTIONS ----------------\nconst QUESTIONS = [\n  { id: \"intro\", type: \"stage\", title: \"Neon Nightfall\", subtitle: \"Decisions reverberate — pick fast, win faster.\" },\n  {\n    id: \"q1\",\n    type: \"mcq\",\n    title: \"Vibe Check — choose your drive\",\n    choices: [\"Prototype & ship\", \"Learn a trick\", \"Find teammates\", \"Prize hunter\"],\n    points: { \"Prototype & ship\": 20, \"Learn a trick\": 10, \"Find teammates\": 15, \"Prize hunter\": 5 },\n    flavor: \"A neon corridor; your choice sets the tone.\",\n  },\n  {\n    id: \"q2\",\n    type: \"rating\",\n    title: \"Charge Level — how amped are you?\",\n    scale: 5,\n    pointsPerStar: 6,\n    flavor: \"Lights sync to your excitement.\",\n  },\n  {\n    id: \"q3\",\n    type: \"text\",\n    title: \"One-line pitch — your spark\",\n    maxLength: 140,\n    points: 15,\n    flavor: \"A single line. Make it crisp.\",\n  },\n  {\n    id: \"q4\",\n    type: \"minigame\",\n    title: \"Core Tap — power the idea\",\n    timeLimit: 6000,\n    pointsOnSuccess: 30,\n    flavor: \"Rapid taps to energize the prototype core.\",\n  },\n  {\n    id: \"q5\",\n    type: \"mcq\",\n    title: \"Crew — who joins the hack?\",\n    choices: [\"Night coders\", \"Design first\", \"Balanced squad\", \"Solo rider\"],\n    points: { \"Night coders\": 20, \"Design first\": 10, \"Balanced squad\": 15, \"Solo rider\": 5 },\n    flavor: \"Pick your crew — synergy matters.\",\n    dependsOn: { q1: \"Prototype & ship\" },\n  },\n  { id: \"end\", type: \"stage\", title: \"Curtain Call\", subtitle: \"Badges claimed. Sunlight pending.\" },\n];\n\nfunction lerp(a, b, n) { return (1 - n) * a + n * b; }\nfunction hexToRgb(hex) { const h = hex.replace('#',''); return [parseInt(h.substring(0,2),16), parseInt(h.substring(2,4),16), parseInt(h.substring(4,6),16)]; }\n\n// ---------------- Confetti ----------------\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext('2d');\n  const W = (canvas.width = window.innerWidth);\n  const H = (canvas.height = window.innerHeight);\n  const palette = [THEME.primary, THEME.cyan, THEME.accent, THEME.warm];\n  const pieces = Array.from({length:90}).map(()=>({\n    x: W/2 + (Math.random()-0.5)*200,\n    y: H/3 + (Math.random()-0.5)*80,\n    vx: (Math.random()-0.5)*14,\n    vy: (Math.random()-1.6)*10,\n    r: Math.random()*6 + 3,\n    color: palette[Math.floor(Math.random()*palette.length)],\n    rot: Math.random()*Math.PI*2,\n    vr: (Math.random()-0.5)*0.3,\n    life: 120 + Math.random()*160,\n  }));\n  function frame(){ ctx.clearRect(0,0,W,H); let alive=false; for(let p of pieces){ if(p.life>0){ alive=true; p.vy+=0.26; p.x+=p.vx; p.y+=p.vy; p.rot+=p.vr; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot); ctx.fillStyle=p.color; ctx.fillRect(-p.r/2,-p.r/2,p.r,p.r*0.6); ctx.restore(); p.life--; } } if(alive) requestAnimationFrame(frame); else ctx.clearRect(0,0,W,H); } frame(); }\n\n// ---------------- Custom Cursor ----------------\nfunction CustomCursor(){\n  const dotRef = useRef(null), ringRef = useRef(null);\n  const pos = useRef({ x: typeof window !== 'undefined' ? window.innerWidth/2 : 0, y: typeof window !== 'undefined' ? window.innerHeight/2 : 0 });\n  const hover = useRef(false), rafRef = useRef(null);\n  useEffect(()=>{\n    const dot = dotRef.current, ring = ringRef.current; if(!dot||!ring) return;\n    function mm(e){ pos.current.x = e.clientX; pos.current.y = e.clientY; }\n    function hov(e){ const t = e.target; hover.current = !!(t.closest && t.closest('button, a, [role=\"button\"], input, textarea')); }\n    window.addEventListener('mousemove', mm); window.addEventListener('mouseover', hov);\n    let cx = pos.current.x, cy = pos.current.y, scale=1;\n    function loop(){ cx = lerp(cx, pos.current.x, 0.16); cy = lerp(cy, pos.current.y, 0.16); dot.style.transform = `translate3d(${cx-6}px, ${cy-6}px, 0)`; const rx = lerp(parseFloat(ring.dataset.x||cx), cx, 0.08); const ry = lerp(parseFloat(ring.dataset.y||cy), cy, 0.08); ring.dataset.x = rx; ring.dataset.y = ry; scale = lerp(scale, hover.current?1.9:1, 0.12); ring.style.transform = `translate3d(${rx-18}px, ${ry-18}px, 0) scale(${scale})`; rafRef.current = requestAnimationFrame(loop); }\n    rafRef.current = requestAnimationFrame(loop);\n    return ()=>{ window.removeEventListener('mousemove', mm); window.removeEventListener('mouseover', hov); cancelAnimationFrame(rafRef.current); };\n  }, []);\n  useEffect(()=>{ document.documentElement.classList.add('custom-cursor-hide'); return ()=>document.documentElement.classList.remove('custom-cursor-hide'); }, []);\n  return (\n    <>\n      <div ref={ringRef} style={{ position:'fixed', left:0, top:0, width:36, height:36, borderRadius:9999, border:`1.5px solid rgba(124,58,237,0.12)`, pointerEvents:'none', zIndex:100000 }} />\n      <div ref={dotRef} style={{ position:'fixed', left:0, top:0, width:12, height:12, borderRadius:9999, background:'radial-gradient(circle at 30% 30%, #fff, #cfe)', boxShadow:'0 10px 26px rgba(6,182,212,0.06)', pointerEvents:'none', zIndex:100001 }} />\n      <style>{`.custom-cursor-hide, .custom-cursor-hide * { cursor: none !important; }`}</style>\n    </>\n  );\n}\n\n// ---------------- MiniGame ----------------\nfunction MiniGame({ timeLimit=6000, onComplete, flavor }){\n  const [charge, setCharge] = useState(0); const runningRef = useRef(false); const raf = useRef(null); const startedAt = useRef(0); const manualBoost = useRef(0);\n  useEffect(()=>() => cancelAnimationFrame(raf.current), []);\n  function start(){ if(runningRef.current) return; runningRef.current = true; manualBoost.current = 0; startedAt.current = performance.now(); tick(); }\n  function tick(){ raf.current = requestAnimationFrame(()=>{ const elapsed = performance.now() - startedAt.current; const base = Math.min(100, Math.round((elapsed/timeLimit)*100)); const total = Math.min(100, base + manualBoost.current); setCharge(total); if(total>=100){ runningRef.current=false; cancelAnimationFrame(raf.current); onComplete(true); return; } if(elapsed>=timeLimit){ runningRef.current=false; cancelAnimationFrame(raf.current); onComplete(total>=60); return; } tick(); }); }\n  function handleTap(){ if(!runningRef.current) start(); else { manualBoost.current = Math.min(100, manualBoost.current + 12); setCharge(c=>Math.min(100,c+12)); } }\n  return (\n    <div style={{ width:'100%', display:'flex', flexDirection:'column', alignItems:'center', gap:12 }}>\n      <div style={{ color: THEME.muted, fontSize:13 }}>{flavor}</div>\n      <motion.div onClick={handleTap} whileTap={{ scale:0.92 }} whileHover={{ scale:1.03 }} transition={{ type:'spring', stiffness:300 }} style={{ width:140, height:140, borderRadius:999, display:'flex', alignItems:'center', justifyContent:'center', cursor:'pointer', background:`linear-gradient(135deg, ${THEME.primary}, ${THEME.cyan})`, boxShadow:'0 18px 60px rgba(124,58,237,0.08)' }}>\n        <div style={{ color:'#06060A', fontWeight:900 }}>TAP</div>\n      </motion.div>\n      <div style={{ width:'100%', maxWidth:520 }}>\n        <div style={{ color: THEME.muted, marginBottom:6 }}>Charge: {charge}%</div>\n        <div style={{ height:12, width:'100%', borderRadius:10, overflow:'hidden', background:'rgba(255,255,255,0.02)' }}>\n          <motion.div initial={{ width:0 }} animate={{ width: `${charge}%` }} transition={{ type:'spring', stiffness:140, damping:16 }} style={{ height:'100%', background:`linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})` }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ---------------- Main App ----------------\nexport default function GamifiedSurveyForm(){\n  const [answers, setAnswers] = useState(()=>{ try{ const r = localStorage.getItem('gamifiedSurveyAnswers'); return r?JSON.parse(r):{} }catch{ return {}; } });\n  const [score, setScore] = useState(()=>Number(localStorage.getItem('gamifiedSurveyScore'))||0);\n  const [showFinish, setShowFinish] = useState(false);\n\n  const canvasRef = useRef(null); // confetti\n  const bgCanvasRef = useRef(null); // bricks\n\n  const [height, setHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\n  useEffect(()=>{ function onResize(){ setHeight(window.innerHeight); } window.addEventListener('resize', onResize); return ()=>window.removeEventListener('resize', onResize); }, []);\n\n  useEffect(()=>localStorage.setItem('gamifiedSurveyAnswers', JSON.stringify(answers)), [answers]);\n  useEffect(()=>localStorage.setItem('gamifiedSurveyScore', String(score)), [score]);\n\n  const visible = QUESTIONS.filter(q=>{ if(!q.dependsOn) return true; return Object.keys(q.dependsOn).every(k => answers[k] === q.dependsOn[k]); });\n\n  // cinematic state\n  const containerRef = useRef(null); const chapterRefs = useRef([]); chapterRefs.current = [];\n  const addChapterRef = el => { if(el) chapterRefs.current.push(el); };\n\n  const targetY = useRef(0); const currentY = useRef(0); const rafRef = useRef(null); const lastWheelAt = useRef(0);\n  const SNAP_DELAY = 80; const LERP_FAST = 0.42; const LERP_SNAP = 0.62;\n\n  const cursor = useRef({ x: typeof window !== 'undefined' ? window.innerWidth/2 : 0, y: typeof window !== 'undefined' ? window.innerHeight/2 : 0, active:false });\n  const lastCursorUpdate = useRef(0); const bgRAF = useRef(null);\n\n  const activeIndexRef = useRef(0); const [activeIndex, setActiveIndex] = useState(0); const activeSince = useRef(performance.now());\n\n  const [pageIndex, setPageIndex] = useState(0); const pageIndexRef = useRef(0); const wheelAccum = useRef(0); const wheelLock = useRef(false);\n\n  // loader (neon gate)\n  const [openingDone, setOpeningDone] = useState(false); const [loadingProgress, setLoadingProgress] = useState(0);\n  useEffect(()=>{\n    let raf = null; const start = performance.now(); const DURATION = 900; function ease(t){ return 1 - Math.pow(1 - t, 3); }\n    function tick(now){ const t = Math.min(1, (now - start)/DURATION); setLoadingProgress(Math.round(ease(t)*100)); if(t<1) raf = requestAnimationFrame(tick); else { setTimeout(()=>{ setOpeningDone(true); pageIndexRef.current = 0; activeIndexRef.current = 0; targetY.current = 0; currentY.current = 0; if(containerRef.current) containerRef.current.style.transform = `translate3d(0,0,0)`; setPageIndex(0); setActiveIndex(0); activeSince.current = performance.now(); setLoadingProgress(100); }, 160); } }\n    raf = requestAnimationFrame(tick); return ()=> cancelAnimationFrame(raf);\n  }, []);\n\n  // wheel/touch/keyboard -> page jumps\n  useEffect(()=>{\n    const touchStart = { vY:0 };\n    function clampPage(i){ return Math.max(0, Math.min(i, visible.length - 1)); }\n    function setPage(i){ const c = clampPage(i); pageIndexRef.current = c; setPageIndex(c); targetY.current = c * height; lastWheelAt.current = performance.now(); activeIndexRef.current = c; setActiveIndex(c); activeSince.current = performance.now(); }\n\n    function onWheel(e){ if(!openingDone) return; e.preventDefault(); if(wheelLock.current) return; wheelAccum.current += e.deltaY; const TH = 100; if(Math.abs(wheelAccum.current) >= TH){ const dir = wheelAccum.current > 0 ? 1 : -1; setPage(pageIndexRef.current + dir); wheelAccum.current = 0; wheelLock.current = true; setTimeout(()=> wheelLock.current = false, 320); } lastWheelAt.current = performance.now(); }\n    function onTouchStart(e){ touchStart.vY = e.touches[0].clientY; }\n    function onTouchEnd(e){ if(!openingDone) return; const y = (e.changedTouches && e.changedTouches[0] && e.changedTouches[0].clientY) || touchStart.vY; const delta = touchStart.vY - y; const SW = 40; if(Math.abs(delta) > SW){ const dir = delta > 0 ? 1 : -1; setPage(pageIndexRef.current + dir); } }\n    function onKey(e){ if(!openingDone) return; if([\"ArrowDown\",\"PageDown\",\" \"].includes(e.key)){ e.preventDefault(); setPage(pageIndexRef.current + 1); } if([\"ArrowUp\",\"PageUp\"].includes(e.key)){ e.preventDefault(); setPage(pageIndexRef.current - 1); } }\n    function onPointer(e){ const now = performance.now(); if(now - lastCursorUpdate.current > 12){ cursor.current.x = e.clientX; cursor.current.y = e.clientY; cursor.current.active = true; lastCursorUpdate.current = now; } }\n    function onPointerLeave(){ cursor.current.active = false; }\n    function onPointerDown(e){ const px = e.clientX; const py = e.clientY; cursor.current.x = px; cursor.current.y = py; if(bgCanvasRef.current && bgCanvasRef.current._triggerPop) bgCanvasRef.current._triggerPop(px, py); }\n\n    const el = containerRef.current || window;\n    el.addEventListener('wheel', onWheel, { passive:false });\n    window.addEventListener('touchstart', onTouchStart, { passive:false });\n    window.addEventListener('touchend', onTouchEnd);\n    window.addEventListener('keydown', onKey);\n    window.addEventListener('pointermove', onPointer);\n    window.addEventListener('pointerout', onPointerLeave);\n    window.addEventListener('pointerdown', onPointerDown);\n    return ()=>{ el.removeEventListener('wheel', onWheel); window.removeEventListener('touchstart', onTouchStart); window.removeEventListener('touchend', onTouchEnd); window.removeEventListener('keydown', onKey); window.removeEventListener('pointermove', onPointer); window.removeEventListener('pointerout', onPointerLeave); window.removeEventListener('pointerdown', onPointerDown); };\n  }, [height, openingDone, visible.length]);\n\n  // ---------------- Bricks canvas: purple/cyan/indigo gradient + more reactive ----------------\n  useEffect(()=>{\n    const canvas = bgCanvasRef.current; if(!canvas) return; const ctx = canvas.getContext('2d'); let W = canvas.width = window.innerWidth; let H = canvas.height = window.innerHeight; const DPR = Math.min(window.devicePixelRatio || 1, 1.6); canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = `${W}px`; canvas.style.height = `${H}px`; ctx.scale(DPR, DPR);\n\n    let BRICK_W = window.innerWidth < 640 ? 120 : 96; let BRICK_H = window.innerWidth < 640 ? 56 : 44; let cols = Math.ceil(W / BRICK_W), rows = Math.ceil(H / BRICK_H); const MAX_BRICKS = 900;\n    if(cols * rows > MAX_BRICKS){ const scaleUp = Math.sqrt((cols * rows) / MAX_BRICKS); BRICK_W = Math.ceil(BRICK_W * scaleUp); BRICK_H = Math.ceil(BRICK_H * scaleUp); cols = Math.ceil(W / BRICK_W); rows = Math.ceil(H / BRICK_H); }\n\n    const bricks = [];\n    for(let r=0;r<rows;r++){\n      for(let c=0;c<cols;c++){\n        const x = c * BRICK_W + (r % 2 ? BRICK_W/2 : 0); const y = r * BRICK_H; const cx = x + BRICK_W/2; const cy = y + BRICK_H/2;\n        bricks.push({ x, y, w: BRICK_W, h: BRICK_H, baseX: x, baseY: y, cx, cy, pop:0, vy:0, phase: Math.random()*Math.PI*2, falling:false, fallY:0, fallVy:0, opacity:1, gone:false, r, c, mix: Math.random() });\n      }\n    }\n\n    // colour bases\n    const purple = hexToRgb(THEME.primary); const cyan = hexToRgb(THEME.cyan); const indigo = hexToRgb(THEME.accent);\n    const VIBE_RAMP_MS = 1800;\n\n    canvas._triggerPop = function(px, py){ const R = 160; let nearest=null; let best=Infinity; for(let b of bricks){ if(b.gone) continue; const dx = b.cx - px, dy = b.cy - py; const d = Math.sqrt(dx*dx + dy*dy); if(d < best){ best = d; nearest = b; } if(d < R){ const norm = 1 - d / R; b.pop = Math.max(b.pop, 0.45 * norm); b.vy += (6 * norm) + (Math.random() * 3); } } if(nearest && !nearest.falling && best < Math.max(120, Math.min(W,H) * 0.06)){ nearest.falling = true; nearest.fallVy = Math.random()*4 + 2; nearest.fallY = 0; } };\n\n    let lastT = performance.now();\n    function draw(now){ let dt = Math.min(40, now - lastT) * 0.001; if(dt<=0){ bgRAF.current = requestAnimationFrame(draw); return; } lastT = now; ctx.clearRect(0,0,W,H);\n      // darker wash so content is readable\n      ctx.fillStyle = 'rgba(4,6,10,0.46)'; ctx.fillRect(0,0,W,H);\n\n      const time = now * 0.001; const maxD = Math.max(W,H) * 0.7;\n      const activeIdx = activeIndexRef.current || 0; const panelCenterY = (activeIdx * height - currentY.current) + (height/2); const panelCenterX = W/2; const panelW = Math.min(1120, W*0.86); const panelH = Math.min(760, height*0.78);\n      const elapsed = Math.max(0, performance.now() - (activeSince.current || performance.now())); const elapsedFactor = Math.min(1, elapsed / VIBE_RAMP_MS);\n\n      for (let b of bricks){ if(b.gone) continue; if(b.falling){ b.fallVy += 900 * dt; b.fallY += b.fallVy * dt; b.opacity = Math.max(0, 1 - (b.fallY / (H * 1.4))); if(b.fallY > H + 100){ b.gone = true; continue; } }\n        const dx = b.cx - cursor.current.x; const dy = b.cy - cursor.current.y; const d = Math.sqrt(dx*dx + dy*dy); let t = Math.max(0, 1 - d / maxD); t = Math.pow(t, 0.9); const lift = b.falling ? 0 : Math.min(18, 12 * t + b.pop * 22); const wobble = b.falling ? 0 : Math.sin(b.phase + time * 1.6) * 2 * t;\n        if(!b.falling){ b.vy -= 28 * dt; b.vy *= (0.92 - Math.min(0.18, t * 0.12)); b.pop = Math.max(0, b.pop - 0.014); }\n        const yOffset = b.falling ? b.fallY : (-lift + b.vy * dt * 60);\n\n        const mixFactor = Math.min(1, Math.max(0, b.mix * 0.9 + 0.1 * Math.sin(time * 0.6 + b.phase)));\n        function mix(a,bVal,n){ return Math.round((1-n)*a + n*bVal); }\n\n        const rMid = mix(purple[0], cyan[0], mixFactor); const gMid = mix(purple[1], cyan[1], mixFactor); const bMid = mix(purple[2], cyan[2], mixFactor);\n        const rFinal = mix(rMid, indigo[0], Math.abs(Math.sin(b.phase * 0.2 + time * 0.1)) * 0.18);\n        const gFinal = mix(gMid, indigo[1], Math.abs(Math.cos(b.phase * 0.21 + time * 0.12)) * 0.18);\n        const bFinal = mix(bMid, indigo[2], Math.abs(Math.sin(b.phase * 0.19 + time * 0.14)) * 0.18);\n\n        const dxPanel = Math.abs(b.cx - panelCenterX); const dyPanel = Math.abs(b.cy - panelCenterY);\n        let panelDarkness = 0; if(dxPanel < panelW/2 && dyPanel < panelH/2){ const nx = 1 - (dxPanel / (panelW/2)); const ny = 1 - (dyPanel / (panelH/2)); panelDarkness = Math.pow(Math.max(0, Math.min(1, nx * ny)), 1.6) * 0.86; }\n\n        const finalR = Math.max(6, Math.round(rFinal * (1 - panelDarkness))); const finalG = Math.max(6, Math.round(gFinal * (1 - panelDarkness))); const finalB = Math.max(6, Math.round(bFinal * (1 - panelDarkness)));\n        const finalAlpha = Math.max(0.6, b.opacity - (panelDarkness * 0.3));\n\n        const distToPanelCenter = Math.hypot(b.cx - panelCenterX, b.cy - panelCenterY); const panelRadius = Math.max(panelW, panelH) * 0.9; const panelInfluence = Math.max(0, 1 - distToPanelCenter / panelRadius);\n        const vibAmp = MAX_VIBRATE_AMPLITUDE * panelInfluence * elapsedFactor * 0.9; const vibrate = Math.sin(time * (0.8 + (b.phase % 1))) * vibAmp * 0.7; const rot = Math.sin(time * 0.9 + b.phase) * (vibAmp * 0.02);\n\n        const gx = b.baseX + 6, gy = b.baseY + 6; const grad = ctx.createLinearGradient(gx, gy, gx + b.w - 12, gy + b.h - 12);\n        const colorStart = `rgba(${Math.max(0, finalR-22)}, ${Math.max(0, finalG-22)}, ${Math.max(0, finalB-22)}, ${finalAlpha})`;\n        const colorEnd = `rgba(${finalR}, ${finalG}, ${finalB}, ${finalAlpha})`;\n        grad.addColorStop(0, colorStart); grad.addColorStop(1, colorEnd);\n\n        ctx.save(); ctx.globalAlpha = finalAlpha; ctx.fillStyle = grad;\n        if (lift > 2 && !b.falling && bricks.length < 800) { ctx.shadowBlur = Math.min(32, lift * 1.2); ctx.shadowColor = `rgba(120,80,200,${Math.min(0.22, 0.06 * t + 0.06 * b.pop)})`; } else ctx.shadowBlur = 0;\n        const px = b.baseX + wobble * 0.6 + vibrate; const py = b.baseY + yOffset;\n        ctx.translate(px + (b.w - 12)/2, py + (b.h - 12)/2); ctx.rotate(rot);\n        roundRect(ctx, -(b.w - 12)/2, -(b.h - 12)/2, b.w - 12, b.h - 12, 8); ctx.fill();\n\n        // subtle highlight stripe for readability\n        if ((t > 0.07 || b.pop > 0.02) && !b.falling && panelDarkness < 0.7) {\n          ctx.shadowBlur = 0; ctx.fillStyle = `rgba(255,255,255,${0.03 * t + 0.04 * b.pop})`;\n          ctx.fillRect(-(b.w - 12)/2 + 6, -(b.h - 12)/2 + 4, b.w - 24, Math.max(3, Math.min(8, 4 * t + 6 * b.pop)));\n        }\n        ctx.restore();\n      }\n\n      bgRAF.current = requestAnimationFrame(draw);\n    }\n\n    function roundRect(ctx,x,y,w,h,r){ const minr = Math.min(r, w/2, h/2); ctx.beginPath(); ctx.moveTo(x + minr, y); ctx.arcTo(x + w, y, x + w, y + h, minr); ctx.arcTo(x + w, y + h, x, y + h, minr); ctx.arcTo(x, y + h, x, y, minr); ctx.arcTo(x, y, x + w, y, minr); ctx.closePath(); }\n    function onResize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = `${W}px`; canvas.style.height = `${H}px`; ctx.scale(DPR, DPR); }\n    window.addEventListener('resize', onResize);\n    bgRAF.current = requestAnimationFrame(draw);\n    return ()=>{ window.removeEventListener('resize', onResize); cancelAnimationFrame(bgRAF.current); };\n  }, [height, activeIndex, openingDone]);\n\n  // UI transform loop\n  useEffect(()=>{\n    function frame(){ currentY.current = lerp(currentY.current, targetY.current, (performance.now() - lastWheelAt.current > SNAP_DELAY) ? LERP_SNAP : LERP_FAST); const el = containerRef.current; if(el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`; chapterRefs.current.forEach((node, i)=>{ if(!node) return; const center = i * height; const offset = (currentY.current - center)/height; const abs = Math.abs(offset); const translateY = offset * 18; const rotate = offset * 2.8; const scale = 1 - Math.min(0.07, abs * 0.07); const opacity = 1 - Math.min(0.9, abs * 0.9); node.style.transform = `translate3d(0px, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`; node.style.opacity = String(opacity); }); const idx = Math.round(currentY.current / height); if(activeIndexRef.current !== idx){ activeIndexRef.current = idx; setActiveIndex(idx); activeSince.current = performance.now(); } rafRef.current = requestAnimationFrame(frame); }\n    rafRef.current = requestAnimationFrame(frame); return ()=> cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n\n  function scrollToIndex(i){ const max = Math.max(0, (visible.length - 1) * height); const dest = Math.max(0, Math.min(i * height, max)); targetY.current = dest; lastWheelAt.current = performance.now(); pageIndexRef.current = Math.round(dest / height); setPageIndex(pageIndexRef.current); activeSince.current = performance.now(); }\n\n  const AUTO_ADVANCE_DELAY_MS = 220;\n  function handleAnswer(qid, value){ setAnswers(prev => ({ ...prev, [qid]: value })); const questionDef = QUESTIONS.find(x=>x.id===qid) || {}; let gained = 0; if(questionDef.type === 'mcq' && questionDef.points) gained = questionDef.points[value] || 0; else if(questionDef.type === 'rating') gained = value * (questionDef.pointsPerStar || 1); else if(questionDef.type === 'text') gained = questionDef.points || 0; if(gained){ setScore(s => s + gained); pulseScore(); }\n    if(questionDef.type === 'mcq' || questionDef.type === 'rating'){ const next = Math.min(activeIndexRef.current + 1, visible.length - 1); setTimeout(()=> scrollToIndex(next), AUTO_ADVANCE_DELAY_MS); } }\n\n  function pulseScore(){ const el = document.getElementById('score-badge'); if(!el) return; el.animate([{ transform:'translateY(0) scale(1)' }, { transform:'translateY(-6px) scale(1.06)' }, { transform:'translateY(0) scale(1)' }], { duration:520, easing:'ease-out' }); }\n  function onMiniGameComplete(success){ if(success){ setScore(s => s + 30); pulseScore(); } setAnswers(prev => ({ ...prev, q4: success ? 'success' : 'fail' })); setTimeout(()=> scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), 300); }\n  function finish(){ setShowFinish(true); if(canvasRef.current) confettiBurst(canvasRef.current); }\n  function resetAll(){ if(!window.confirm('Reset survey? This clears local progress.')) return; setAnswers({}); setScore(0); setShowFinish(false); targetY.current = 0; currentY.current = 0; pageIndexRef.current = 0; setPageIndex(0); if(containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)'; }\n\n  // ---------------- UI pieces ----------------\n  function ProgressRing({ size=56, stroke=6 }){\n    const pct = Math.max(0, Math.min(100, Math.round((score % 100) )));\n    const r = (size - stroke) / 2; const c = 2 * Math.PI * r; const dash = c * (pct/100);\n    return (\n      <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`} style={{ overflow:'visible' }}>\n        <defs>\n          <linearGradient id=\"g1\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"1\">\n            <stop offset=\"0%\" stopColor={THEME.cyan} />\n            <stop offset=\"100%\" stopColor={THEME.primary} />\n          </linearGradient>\n        </defs>\n        <g transform={`translate(${size/2}, ${size/2})`}>\n          <circle r={r} stroke=\"rgba(255,255,255,0.04)\" strokeWidth={stroke} fill=\"none\" />\n          <circle r={r} stroke=\"url(#g1)\" strokeWidth={stroke} strokeLinecap=\"round\" fill=\"none\" strokeDasharray={`${dash} ${c - dash}`} style={{ transform: 'rotate(-90deg)', transformOrigin: 'center' }} />\n          <text x=\"0\" y=\"3\" textAnchor=\"middle\" fontSize={12} fill={THEME.text} fontWeight={800}>{Math.round(pct)}%</text>\n        </g>\n      </svg>\n    );\n  }\n\n  // Chapter card content\n  function ChapterCard({ item, i }){\n    return (\n      <div style={{ width:280 }}>\n        <div style={{ background: THEME.card, borderRadius:16, padding:16, boxShadow:'0 18px 40px rgba(2,6,12,0.6)', border:'1px solid rgba(255,255,255,0.03)' }}>\n          <div style={{ color: THEME.muted, fontSize:13 }}>Chapter</div>\n          <div style={{ display:'flex', gap:12, alignItems:'center', marginTop:10 }}>\n            <div style={{ width:64, height:64, borderRadius:12, background:`linear-gradient(135deg, ${THEME.cyan}, ${THEME.primary})`, display:'flex', alignItems:'center', justifyContent:'center', boxShadow:'0 12px 40px rgba(0,0,0,0.6)' }}>\n              <svg width=\"26\" height=\"26\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\" stroke=\"#02171A\" strokeWidth=\"0.9\"/></svg>\n            </div>\n            <div>\n              <div style={{ fontSize:20, fontWeight:900, color: THEME.text }}>{String(i+1).padStart(2,'0')}</div>\n              <div style={{ color: THEME.muted, fontSize:13, marginTop:4 }}>{item.title}</div>\n            </div>\n          </div>\n\n          <div style={{ marginTop:12, color: THEME.muted, fontSize:13 }}>Tips</div>\n          <ul style={{ marginTop:8, color: THEME.muted, paddingLeft:16 }}>\n            <li style={{ marginBottom:6 }}>Quick picks = momentum</li>\n            <li style={{ marginBottom:6 }}>Use keys or scroll to navigate</li>\n          </ul>\n\n          <div style={{ marginTop:12, display:'flex', gap:8 }}>\n            <button onClick={() => scrollToIndex(Math.max(0, i-1))} className=\"btn btn-ghost\" style={{ flex:1 }}>Prev</button>\n            <button onClick={() => scrollToIndex(Math.min(i+1, visible.length-1))} className=\"btn btn-primary\" style={{ flex:1 }}>Next</button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function ChapterContent({ item, idx }){\n    // Stage pages\n    if(item.type === 'stage'){\n      const isFirst = idx === 0; const isLast = idx === visible.length - 1;\n      return (\n        <div style={{ display:'flex', flexDirection:'column', alignItems:'center', gap:18 }}>\n          <motion.h1 initial={{ y:30, opacity:0 }} animate={{ y:0, opacity:1 }} transition={{ duration:0.7 }} style={{ fontSize:34, fontWeight:900, background:`linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})`, WebkitBackgroundClip:'text', color:'transparent' }}>{item.title}</motion.h1>\n          {item.subtitle && <div style={{ color: THEME.muted }}>{item.subtitle}</div>}\n          <div style={{ display:'flex', gap:12 }}>\n            {isLast ? (\n              <>\n                <button onClick={() => resetAll()} className=\"btn btn-primary\">Restart</button>\n                <button onClick={() => setShowFinish(true)} className=\"btn btn-ghost\">Finish</button>\n              </>\n            ) : (\n              <>\n                <button onClick={() => scrollToIndex(Math.min(idx + 1, visible.length - 1))} className=\"btn btn-primary\">Enter</button>\n                {!isFirst && <button onClick={() => finish()} className=\"btn btn-ghost\">Skip</button>}\n              </>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    // MCQ\n    if(item.type === 'mcq'){\n      return (\n        <div style={{ width:'100%', maxWidth:980 }}>\n          <div style={{ color: THEME.muted, marginBottom:12 }}>{item.flavor}</div>\n          <div style={{ display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(240px, 1fr))', gap:14 }}>\n            {item.choices.map(c => {\n              const selected = answers[item.id] === c;\n              return (\n                <motion.button key={c} whileHover={{ scale:1.02 }} onClick={() => handleAnswer(item.id, c)} style={{ padding:18, borderRadius:18, position:'relative', overflow:'hidden', textAlign:'left', display:'flex', flexDirection:'column', gap:8, justifyContent:'space-between', minHeight:120, boxShadow: selected ? '0 20px 60px rgba(124,58,237,0.08)' : 'none', border: selected ? `1px solid rgba(255,255,255,0.06)` : '1px solid rgba(255,255,255,0.02)', background: selected ? `linear-gradient(180deg, rgba(124,58,237,0.08), rgba(6,182,212,0.04))` : 'linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006))', color: THEME.text, cursor:'pointer' }}>\n                  <div style={{ display:'flex', justifyContent:'space-between', alignItems:'center' }}>\n                    <div style={{ fontWeight:900, fontSize:16 }}>{c}</div>\n                    <div style={{ fontSize:12, color: THEME.muted }}>{item.points && item.points[c] ? `${item.points[c]} pts` : ''}</div>\n                  </div>\n\n                  <div style={{ display:'flex', gap:10, alignItems:'center' }}>\n                    <div style={{ width:46, height:46, borderRadius:10, background:'rgba(255,255,255,0.02)', display:'flex', alignItems:'center', justifyContent:'center' }}>\n                      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\" stroke={selected ? THEME.cyan : 'rgba(255,255,255,0.18)'} strokeWidth=\"0.9\"/></svg>\n                    </div>\n                    <div style={{ color: THEME.muted, fontSize:13 }}>Tap to select — immediate feedback</div>\n                  </div>\n\n                  {selected && <motion.div initial={{ opacity:0, y:6 }} animate={{ opacity:1, y:0 }} transition={{ duration:0.28 }} style={{ position:'absolute', right:10, top:10, padding:'6px 8px', borderRadius:10, background:`linear-gradient(90deg, rgba(6,182,212,0.06), rgba(124,58,237,0.06))`, color:THEME.text, fontSize:12, fontWeight:700 }}>Selected</motion.div>}\n                </motion.button>\n              );\n            })}\n          </div>\n        </div>\n      );\n    }\n\n    // Rating\n    if(item.type === 'rating'){\n      return (\n        <div style={{ textAlign:'center' }}>\n          <div style={{ color: THEME.muted, marginBottom:12 }}>{item.flavor}</div>\n          <div style={{ display:'flex', gap:14, justifyContent:'center' }}>\n            {Array.from({ length: item.scale }).map((_, i) => {\n              const sel = answers[item.id] === i+1;\n              return (\n                <motion.button key={i} onClick={() => handleAnswer(item.id, i+1)} whileTap={{ scale:0.96 }} style={{ width:64, height:64, borderRadius:999, display:'flex', alignItems:'center', justifyContent:'center', border: sel ? 'none' : '1px solid rgba(255,255,255,0.03)', background: sel ? `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})` : 'rgba(255,255,255,0.02)', color: sel ? '#02171A' : THEME.text, fontWeight:800, fontSize:18 }}>\n                  {i+1}\n                </motion.button>\n              );\n            })}\n          </div>\n        </div>\n      );\n    }\n\n    // Text\n    if(item.type === 'text'){\n      return (\n        <div style={{ maxWidth:980, margin:'0 auto' }}>\n          <div style={{ color: THEME.muted, marginBottom:12 }}>{item.flavor}</div>\n          <textarea maxLength={item.maxLength} rows={5} value={answers[item.id] || ''} onChange={(e)=> setAnswers(prev => ({ ...prev, [item.id]: e.target.value }))} placeholder=\"One-line pitch...\" style={{ width:'100%', padding:16, borderRadius:12, background: THEME.card, border:'1px solid rgba(255,255,255,0.03)', color: THEME.text, resize:'vertical' }} />\n          <div style={{ display:'flex', justifyContent:'space-between', marginTop:10 }}>\n            <div style={{ color: THEME.muted }}>{(answers[item.id] || '').length}/{item.maxLength}</div>\n            <div style={{ display:'flex', gap:10 }}>\n              <button onClick={() => { if(item.points && (answers[item.id] || '').length > 0){ setScore(s => s + item.points); pulseScore(); } scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)); }} className=\"btn btn-primary\">Submit</button>\n              <button onClick={() => setAnswers(prev => ({ ...prev, [item.id]: '' }))} className=\"btn btn-ghost\">Clear</button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if(item.type === 'minigame') return <MiniGame timeLimit={item.timeLimit} onComplete={onMiniGameComplete} flavor={item.flavor} />;\n    return null;\n  }\n\n  // helpers\n  function onMiniGameComplete(success){ if(success){ setScore(s => s + 30); pulseScore(); } setAnswers(prev => ({ ...prev, q4: success ? 'success' : 'fail' })); setTimeout(()=> scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), 320); }\n  function pulseScore(){ const el = document.getElementById('score-badge'); if(!el) return; el.animate([{ transform:'translateY(0) scale(1)' }, { transform:'translateY(-8px) scale(1.06)' }, { transform:'translateY(0) scale(1)' }], { duration:520, easing:'ease-out' }); }\n  function finish(){ setShowFinish(true); if(canvasRef.current) confettiBurst(canvasRef.current); }\n  function resetAll(){ if(!window.confirm('Reset survey? This clears local progress.')) return; setAnswers({}); setScore(0); setShowFinish(false); targetY.current = 0; currentY.current = 0; pageIndexRef.current = 0; setPageIndex(0); if(containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)'; }\n\n  // base render\n  return (\n    <div style={{ minHeight:'100vh', position:'relative', overflow:'hidden', background: THEME.bg, color: THEME.text }}>\n      <style>{`\n        :root{ --primary: ${THEME.primary}; --cyan: ${THEME.cyan}; --accent: ${THEME.accent}; --muted: ${THEME.muted}; }\n        .btn { padding: 10px 14px; border-radius: 12px; font-weight:800; cursor:pointer; border: 1px solid rgba(255,255,255,0.03); transition: transform 180ms ease, box-shadow 220ms ease; }\n        .btn-primary { background: linear-gradient(90deg, var(--cyan), var(--primary)); color: #02171A; box-shadow: 0 10px 36px rgba(6,182,212,0.06); }\n        .btn-primary:hover { transform: translateY(-4px); box-shadow: 0 18px 46px rgba(6,182,212,0.09); }\n        .btn-ghost { background: rgba(255,255,255,0.02); color: ${THEME.text}; border: 1px solid rgba(255,255,255,0.03); }\n        .btn-ghost:hover { transform: translateY(-3px); }\n      `}</style>\n\n      <CustomCursor />\n\n      {/* canvases */}\n      <canvas ref={bgCanvasRef} className=\"fixed inset-0 z-0 pointer-events-none\" />\n      <canvas ref={canvasRef} className=\"fixed inset-0 z-60 pointer-events-none\" />\n\n      {/* top-left progress and controls */}\n      <div style={{ position:'fixed', left:18, top:18, zIndex:120, display:'flex', gap:12, alignItems:'center' }}>\n        <div style={{ width:64, height:64 }}>{/* progress ring */} <ProgressRing size={64} stroke={6} /></div>\n        <div style={{ color: THEME.muted }}>\n          <div style={{ fontWeight:900, color: THEME.text }}>{score} pts</div>\n          <div style={{ fontSize:12 }}>Level {Math.floor(score/50) + 1}</div>\n        </div>\n      </div>\n\n      {/* nav dots */}\n      <nav style={{ position:'fixed', right:18, top:'50%', transform:'translateY(-50%)', zIndex:110, display:'flex', flexDirection:'column', gap:10 }}>\n        {visible.map((_, i) => (\n          <button key={i} onClick={() => scrollToIndex(i)} aria-label={`Go to chapter ${i+1}`} style={{ width:14, height:14, borderRadius:999, background: i === activeIndex ? `linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})` : 'rgba(255,255,255,0.03)', border:'1px solid rgba(255,255,255,0.02)' }} />\n        ))}\n      </nav>\n\n      {/* LOADER */}\n      {!openingDone && (\n        <div style={{ position:'fixed', inset:0, zIndex:140, display:'flex', alignItems:'center', justifyContent:'center', pointerEvents:'none' }}>\n          <div style={{ textAlign:'center', pointerEvents:'none' }}>\n            <div style={{ fontWeight:900, color: THEME.text, marginBottom:10 }}>Loading — Neon Calibration</div>\n            <div style={{ display:'flex', gap:10, justifyContent:'center', alignItems:'center' }}>\n              <div style={{ width:220, height:120, borderRadius:12, display:'flex', alignItems:'center', justifyContent:'center', gap:8, boxShadow:'0 18px 60px rgba(0,0,0,0.6)', background:'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006))' }}>\n                <div style={{ width:36, height:80, borderRadius:8, background:`linear-gradient(180deg, rgba(6,182,212,0.15), rgba(124,58,237,0.08))`, transform:'skewX(-8deg)', animation:'pulse 1.1s infinite' }} />\n                <div style={{ width:36, height:100, borderRadius:8, background:`linear-gradient(180deg, rgba(124,58,237,0.18), rgba(6,182,212,0.06))`, transform:'skewX(-6deg)', animation:'pulse 1.1s infinite .12s' }} />\n                <div style={{ width:36, height:80, borderRadius:8, background:`linear-gradient(180deg, rgba(0,229,255,0.12), rgba(124,58,237,0.04))`, transform:'skewX(-4deg)', animation:'pulse 1.1s infinite .22s' }} />\n              </div>\n            </div>\n            <div style={{ width:420, height:10, borderRadius:999, background:'rgba(255,255,255,0.02)', margin:'14px auto', overflow:'hidden' }}>\n              <div style={{ height:'100%', width:`${loadingProgress}%`, background:`linear-gradient(90deg, ${THEME.cyan}, ${THEME.primary})`, transition:'width 220ms cubic-bezier(.2,.9,.2,1)' }} />\n            </div>\n            <div style={{ color:THEME.muted, fontSize:13 }}>{loadingProgress}%</div>\n          </div>\n        </div>\n      )}\n\n      {/* CONTENT STACK */}\n      <div ref={containerRef} className=\"fixed inset-0 top-0 left-0 w-full will-change-transform z-50\">\n        <div style={{ height: `${visible.length * height}px` }}>\n          {visible.map((item, i) => (\n            <section key={item.id} ref={addChapterRef} style={{ height: `${height}px` }} className=\"flex items-center justify-center px-6 md:px-12\">\n              <div style={{ width:'100%', maxWidth:1200, margin:'0 auto', display:'grid', gridTemplateColumns:'320px 1fr', gap:20, alignItems:'center' }}>\n\n                {/* left grounded card */}\n                <aside style={{ display: window.innerWidth >= 1024 ? 'block' : 'none' }}>\n                  <div style={{ position:'sticky', top:36 }}>\n                    <ChapterCard item={item} i={i} />\n                  </div>\n                </aside>\n\n                {/* main content card */}\n                <div style={{ borderRadius:18, padding:28, textAlign:'center', background: 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008))', border:'1px solid rgba(255,255,255,0.03)', backdropFilter:'blur(8px)', minHeight:260 }}>\n                  <motion.div initial={{ opacity:0, y:20 }} animate={{ opacity:1, y:0 }} transition={{ duration:0.6 }}>\n                    <ChapterContent item={item} idx={i} />\n                  </motion.div>\n                </div>\n\n              </div>\n            </section>\n          ))}\n        </div>\n      </div>\n\n      {/* FINISH MODAL */}\n      <AnimatePresence>{showFinish && (\n        <motion.div initial={{ opacity:0 }} animate={{ opacity:1 }} exit={{ opacity:0 }} style={{ position:'fixed', inset:0, zIndex:160, display:'flex', alignItems:'center', justifyContent:'center' }}>\n          <div style={{ width:'min(720px,92%)', padding:28, borderRadius:18, background:'rgba(6,8,12,0.86)', border:'1px solid rgba(255,255,255,0.04)', backdropFilter:'blur(10px)' }}>\n            <h2 style={{ color: THEME.text, fontSize:28, fontWeight:900 }}>Finish — Results</h2>\n            <p style={{ color: THEME.muted, marginTop:10 }}>You scored <strong style={{ color: THEME.text }}>{score}</strong>. Great run — go claim that trophy.</p>\n            <div style={{ marginTop:18, display:'flex', justifyContent:'center', gap:10 }}>\n              <button onClick={() => resetAll()} className=\"btn btn-primary\">Reset</button>\n              <button onClick={() => { setShowFinish(false); if(canvasRef.current) confettiBurst(canvasRef.current); }} className=\"btn btn-ghost\">Celebrate</button>\n            </div>\n          </div>\n        </motion.div>\n      )}</AnimatePresence>\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}