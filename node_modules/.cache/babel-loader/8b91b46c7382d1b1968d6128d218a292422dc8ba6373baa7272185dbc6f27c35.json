{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\App\\\\gamified-survey\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// src/App.js\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n/**\n * GamifiedSurveyForm - updated\n * - Removed all background video logic (per your request)\n * - Bricks canvas: purple / cyan / blue gradient palette\n * - Per-brick variation, reactive to pointer clicks & movement\n * - Subtle vibration that ramps up slowly while a page is active\n * - Page-jump scrolling (clean snaps)\n *\n * Replace your src/App.js with this file.\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst THEME = {\n  purple: \"#7c3aed\",\n  cyan: \"#06b6d4\",\n  blue: \"#3b82f6\",\n  magenta: \"#ff4791\",\n  bg: \"#030317\",\n  panel: \"rgba(6,8,22,0.78)\",\n  text: \"#e8f0ff\",\n  muted: \"#9aa6b2\"\n};\nconst QUESTIONS = [{\n  id: \"intro\",\n  type: \"stage\",\n  title: \"Nightfall at HackPlay\",\n  subtitle: \"Step into a neon-lit hall. Your choices tune the journey.\"\n}, {\n  id: \"q1\",\n  type: \"mcq\",\n  title: \"Entrance — choose your mindset\",\n  choices: [\"Build something cool\", \"Learn fast\", \"Meet people\", \"Chase the prizes\"],\n  points: {\n    \"Build something cool\": 20,\n    \"Learn fast\": 10,\n    \"Meet people\": 15,\n    \"Chase the prizes\": 5\n  },\n  flavor: \"The doors close. A low bass. Pick the vibe that follows you.\"\n}, {\n  id: \"q2\",\n  type: \"rating\",\n  title: \"Charge Meter — how hyped are you?\",\n  scale: 5,\n  pointsPerStar: 6,\n  flavor: \"The stage lights react to your energy.\"\n}, {\n  id: \"q3\",\n  type: \"text\",\n  title: \"One-line pitch — what's the idea?\",\n  maxLength: 140,\n  points: 15,\n  flavor: \"A single line — the fragment your team will build around.\"\n}, {\n  id: \"q4\",\n  type: \"minigame\",\n  title: \"Charge the core — tap to power your idea\",\n  timeLimit: 6000,\n  pointsOnSuccess: 30,\n  flavor: \"Fast reflexes prove prototype-ready energy.\"\n}, {\n  id: \"q5\",\n  type: \"mcq\",\n  title: \"Team vibe — pick your tribe\",\n  choices: [\"Chill coders\", \"All-nighters\", \"Balanced squad\", \"Solo hero\"],\n  points: {\n    \"Chill coders\": 10,\n    \"All-nighters\": 20,\n    \"Balanced squad\": 15,\n    \"Solo hero\": 5\n  },\n  flavor: \"Who will you ride the night with?\",\n  dependsOn: {\n    q1: \"Build something cool\"\n  }\n}, {\n  id: \"end\",\n  type: \"stage\",\n  title: \"Curtain Call\",\n  subtitle: \"Collect badges, revisit your pitch, and step back into the light.\"\n}];\nfunction lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n}\nfunction hexToRgb(hex) {\n  const h = hex.replace(\"#\", \"\");\n  return [parseInt(h.substring(0, 2), 16), parseInt(h.substring(2, 4), 16), parseInt(h.substring(4, 6), 16)];\n}\n\n/* ---------------- confetti ---------------- */\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext(\"2d\");\n  const W = canvas.width = window.innerWidth;\n  const H = canvas.height = window.innerHeight;\n  const palette = [THEME.purple, THEME.cyan, THEME.blue, THEME.magenta, \"#ffd93d\"];\n  const pieces = [];\n  for (let i = 0; i < 80; i++) {\n    pieces.push({\n      x: W / 2 + (Math.random() - 0.5) * 160,\n      y: H / 3 + (Math.random() - 0.5) * 80,\n      vx: (Math.random() - 0.5) * 14,\n      vy: (Math.random() - 1.5) * 10,\n      r: Math.random() * 6 + 3,\n      color: palette[Math.floor(Math.random() * palette.length)],\n      rot: Math.random() * Math.PI * 2,\n      vr: (Math.random() - 0.5) * 0.15,\n      life: 140 + Math.random() * 80\n    });\n  }\n  function frame() {\n    ctx.clearRect(0, 0, W, H);\n    let alive = false;\n    for (let p of pieces) {\n      if (p.life > 0) {\n        alive = true;\n        p.vy += 0.18;\n        p.x += p.vx;\n        p.y += p.vy;\n        p.rot += p.vr;\n        ctx.save();\n        ctx.translate(p.x, p.y);\n        ctx.rotate(p.rot);\n        ctx.fillStyle = p.color;\n        ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 0.6);\n        ctx.restore();\n        p.life -= 1;\n      }\n    }\n    if (alive) requestAnimationFrame(frame);else ctx.clearRect(0, 0, W, H);\n  }\n  frame();\n}\n\n/* ---------------- Custom Cursor ---------------- */\nfunction CustomCursor() {\n  _s();\n  const dotRef = useRef(null);\n  const ringRef = useRef(null);\n  const pos = useRef({\n    x: typeof window !== \"undefined\" ? window.innerWidth / 2 : 0,\n    y: typeof window !== \"undefined\" ? window.innerHeight / 2 : 0\n  });\n  const hover = useRef(false);\n  const rafRef = useRef(null);\n  useEffect(() => {\n    const dot = dotRef.current;\n    const ring = ringRef.current;\n    if (!dot || !ring) return;\n    function onMouseMove(e) {\n      pos.current.x = e.clientX;\n      pos.current.y = e.clientY;\n    }\n    function onHoverChange(e) {\n      const t = e.target;\n      hover.current = !!(t.closest && t.closest('button, a, [role=\"button\"], input, textarea'));\n    }\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseover', onHoverChange);\n    let cx = pos.current.x;\n    let cy = pos.current.y;\n    let ringScale = 1;\n    function loop() {\n      cx = lerp(cx, pos.current.x, 0.18);\n      cy = lerp(cy, pos.current.y, 0.18);\n      dot.style.transform = `translate3d(${cx - 6}px, ${cy - 6}px, 0)`;\n      const rx = lerp(parseFloat(ring.dataset.x || cx), cx, 0.08);\n      const ry = lerp(parseFloat(ring.dataset.y || cy), cy, 0.08);\n      ring.dataset.x = rx;\n      ring.dataset.y = ry;\n      ringScale = lerp(ringScale, hover.current ? 1.9 : 1, 0.12);\n      ring.style.transform = `translate3d(${rx - 18}px, ${ry - 18}px, 0) scale(${ringScale})`;\n      rafRef.current = requestAnimationFrame(loop);\n    }\n    rafRef.current = requestAnimationFrame(loop);\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseover', onHoverChange);\n      cancelAnimationFrame(rafRef.current);\n    };\n  }, []);\n  useEffect(() => {\n    document.documentElement.classList.add('custom-cursor-hide');\n    return () => document.documentElement.classList.remove('custom-cursor-hide');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ringRef,\n      style: {\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: 36,\n        height: 36,\n        borderRadius: 9999,\n        border: '1.5px solid rgba(255,255,255,0.06)',\n        pointerEvents: 'none',\n        transform: 'translate3d(0,0,0)',\n        transition: 'background-color 160ms, border-color 160ms',\n        zIndex: 100000\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: dotRef,\n      style: {\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: 12,\n        height: 12,\n        borderRadius: 9999,\n        background: 'radial-gradient(circle at 30% 30%, #fff, #ddd)',\n        boxShadow: '0 6px 20px rgba(124,58,237,0.14)',\n        pointerEvents: 'none',\n        transform: 'translate3d(0,0,0)',\n        zIndex: 100001\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `.custom-cursor-hide, .custom-cursor-hide * { cursor: none !important; }`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n/* ---------------- MiniGame (kept) ---------------- */\n_s(CustomCursor, \"LoSzrrPz4LpO8t37NOY+jhfx8TI=\");\n_c = CustomCursor;\nfunction MiniGame({\n  timeLimit = 6000,\n  onComplete,\n  flavor\n}) {\n  _s2();\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  function start() {\n    if (runningRef.current) return;\n    runningRef.current = true;\n    manualBoost.current = 0;\n    startedAt.current = performance.now();\n    tick();\n  }\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round(elapsed / timeLimit * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n      if (total >= 100) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(true);\n        return;\n      }\n      if (elapsed >= timeLimit) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(total >= 60);\n        return;\n      }\n      tick();\n    });\n  }\n  function handleTap() {\n    if (!runningRef.current) start();else {\n      manualBoost.current = Math.min(100, manualBoost.current + 12);\n      setCharge(c => Math.min(100, c + 12));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: THEME.muted,\n        fontSize: 13\n      },\n      children: flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 160,\n        height: 160,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        onClick: handleTap,\n        whileTap: {\n          scale: 0.9\n        },\n        whileHover: {\n          scale: 1.04\n        },\n        transition: {\n          type: 'spring',\n          stiffness: 300\n        },\n        style: {\n          width: 140,\n          height: 140,\n          borderRadius: 999,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          cursor: 'pointer',\n          background: `linear-gradient(135deg, ${THEME.purple}, ${THEME.magenta})`,\n          boxShadow: '0 12px 40px rgba(124,58,237,0.09)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#fff',\n            fontWeight: 800,\n            fontSize: 16\n          },\n          children: \"TAP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        maxWidth: 520\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: THEME.muted,\n          marginBottom: 6\n        },\n        children: [\"Charge: \", charge, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: 12,\n          borderRadius: 10,\n          overflow: 'hidden',\n          background: 'rgba(255,255,255,0.02)'\n        },\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            width: 0\n          },\n          animate: {\n            width: `${charge}%`\n          },\n          transition: {\n            type: 'spring',\n            stiffness: 140,\n            damping: 16\n          },\n          style: {\n            height: '100%',\n            borderRadius: 10,\n            background: `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------------- Main component ---------------- */\n_s2(MiniGame, \"7W1Gbp5uQvXAuYfcKgP+cnkG9w8=\");\n_c2 = MiniGame;\nexport default function GamifiedSurveyForm() {\n  _s3();\n  const [answers, setAnswers] = useState(() => {\n    try {\n      const raw = localStorage.getItem('gamifiedSurveyAnswers');\n      return raw ? JSON.parse(raw) : {};\n    } catch (e) {\n      return {};\n    }\n  });\n  const [score, setScore] = useState(() => Number(localStorage.getItem('gamifiedSurveyScore')) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n  const canvasRef = useRef(null); // confetti\n  const bgCanvasRef = useRef(null); // bricks\n  const [height, setHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\n  useEffect(() => localStorage.setItem('gamifiedSurveyAnswers', JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem('gamifiedSurveyScore', String(score)), [score]);\n  const visible = QUESTIONS.filter(q => {\n    if (!q.dependsOn) return true;\n    const keys = Object.keys(q.dependsOn);\n    return keys.every(k => answers[k] === q.dependsOn[k]);\n  });\n  useEffect(() => {\n    function onResize() {\n      setHeight(window.innerHeight);\n    }\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  // lock page-style scrolling\n  useEffect(() => {\n    const prevOverflow = document.documentElement.style.overflow;\n    const prevTouch = document.body.style.touchAction;\n    document.documentElement.style.overflow = 'hidden';\n    document.body.style.touchAction = 'none';\n    return () => {\n      document.documentElement.style.overflow = prevOverflow;\n      document.body.style.touchAction = prevTouch;\n    };\n  }, []);\n\n  // refs & scrolling\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = el => {\n    if (el) chapterRefs.current.push(el);\n  };\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n  const isScrolling = useRef(false);\n  const SNAP_DELAY = 70;\n  const LERP_FAST = 0.42;\n  const LERP_SNAP = 0.62;\n  const cursor = useRef({\n    x: typeof window !== 'undefined' ? window.innerWidth / 2 : 0,\n    y: typeof window !== 'undefined' ? window.innerHeight / 2 : 0,\n    active: false\n  });\n  const lastCursorUpdate = useRef(0);\n  const bgRAF = useRef(null);\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const activeSince = useRef(performance.now());\n\n  // pageIndex & wheel accumulator for page jumps\n  const [pageIndex, setPageIndex] = useState(0);\n  const pageIndexRef = useRef(0);\n  const wheelAccum = useRef(0);\n  const wheelLock = useRef(false);\n\n  // loading simulation (simple)\n  const [loadProgress, setLoadProgress] = useState(100);\n  useEffect(() => {\n    setLoadProgress(100);\n  }, []);\n  useEffect(() => {\n    // pointer & wheel & keyboard handling (page jumps)\n    const touchStart = {\n      vY: 0,\n      time: 0\n    };\n    function clampPage(i) {\n      return Math.max(0, Math.min(i, visible.length - 1));\n    }\n    function setPage(i) {\n      const c = clampPage(i);\n      pageIndexRef.current = c;\n      setPageIndex(c);\n      targetY.current = c * height;\n      lastWheelAt.current = performance.now();\n      isScrolling.current = true;\n      activeIndexRef.current = c;\n      setActiveIndex(c);\n      activeSince.current = performance.now();\n    }\n    function onWheel(e) {\n      e.preventDefault();\n      if (wheelLock.current) return;\n      wheelAccum.current += e.deltaY;\n      const THRESH = 100; // tuned for predictable jumps (increase to make less sensitive)\n      if (Math.abs(wheelAccum.current) >= THRESH) {\n        const dir = wheelAccum.current > 0 ? 1 : -1;\n        setPage(pageIndexRef.current + dir);\n        wheelAccum.current = 0;\n        wheelLock.current = true;\n        setTimeout(() => wheelLock.current = false, 320);\n      }\n      lastWheelAt.current = performance.now();\n    }\n    function onTouchStart(e) {\n      touchStart.vY = e.touches[0].clientY;\n      touchStart.time = performance.now();\n    }\n    function onTouchEnd(e) {\n      const y = e.changedTouches && e.changedTouches[0] && e.changedTouches[0].clientY || touchStart.vY;\n      const delta = touchStart.vY - y;\n      const elapsed = performance.now() - touchStart.time;\n      const SWIPE_MIN = 40;\n      if (Math.abs(delta) > SWIPE_MIN) {\n        const dir = delta > 0 ? 1 : -1;\n        setPage(pageIndexRef.current + dir);\n      }\n    }\n    function onKey(e) {\n      if ([\"ArrowDown\", \"PageDown\", \" \"].includes(e.key)) {\n        e.preventDefault();\n        setPage(pageIndexRef.current + 1);\n      }\n      if ([\"ArrowUp\", \"PageUp\"].includes(e.key)) {\n        e.preventDefault();\n        setPage(pageIndexRef.current - 1);\n      }\n    }\n    function onPointerMove(e) {\n      const now = performance.now();\n      if (now - lastCursorUpdate.current > 12) {\n        cursor.current.x = e.clientX;\n        cursor.current.y = e.clientY;\n        cursor.current.active = true;\n        lastCursorUpdate.current = now;\n      }\n    }\n    function onPointerLeave() {\n      cursor.current.active = false;\n    }\n    function onPointerDown(e) {\n      const px = e.clientX;\n      const py = e.clientY;\n      cursor.current.x = px;\n      cursor.current.y = py;\n      if (bgCanvasRef.current && bgCanvasRef.current._triggerPop) bgCanvasRef.current._triggerPop(px, py);\n    }\n    const el = containerRef.current || window;\n    el.addEventListener('wheel', onWheel, {\n      passive: false\n    });\n    window.addEventListener('touchstart', onTouchStart, {\n      passive: false\n    });\n    window.addEventListener('touchend', onTouchEnd);\n    window.addEventListener('keydown', onKey);\n    window.addEventListener('pointermove', onPointerMove);\n    window.addEventListener('pointerout', onPointerLeave);\n    window.addEventListener('pointerdown', onPointerDown);\n    return () => {\n      el.removeEventListener('wheel', onWheel);\n      window.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('touchend', onTouchEnd);\n      window.removeEventListener('keydown', onKey);\n      window.removeEventListener('pointermove', onPointerMove);\n      window.removeEventListener('pointerout', onPointerLeave);\n      window.removeEventListener('pointerdown', onPointerDown);\n    };\n  }, [height, visible.length]);\n\n  /* ---------------- Bricks canvas: purple / cyan / blue with vibration ----------------\n     - Increased reactivity to pointer (b.pop / vy)\n     - Slow vibration that increases if the brick is near the active panel center.\n     - MAX_VIBRATE_AMPLITUDE controls maximum pixel vibration applied.\n  */\n  useEffect(() => {\n    const canvas = bgCanvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    let W = canvas.width = window.innerWidth;\n    let H = canvas.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.5);\n    canvas.width = W * DPR;\n    canvas.height = H * DPR;\n    canvas.style.width = `${W}px`;\n    canvas.style.height = `${H}px`;\n    ctx.scale(DPR, DPR);\n    let BRICK_W = window.innerWidth < 640 ? 120 : 96;\n    let BRICK_H = window.innerWidth < 640 ? 56 : 44;\n    let cols = Math.ceil(W / BRICK_W);\n    let rows = Math.ceil(H / BRICK_H);\n    const MAX_BRICKS = 900;\n    if (cols * rows > MAX_BRICKS) {\n      const scaleUp = Math.sqrt(cols * rows / MAX_BRICKS);\n      BRICK_W = Math.ceil(BRICK_W * scaleUp);\n      BRICK_H = Math.ceil(BRICK_H * scaleUp);\n      cols = Math.ceil(W / BRICK_W);\n      rows = Math.ceil(H / BRICK_H);\n    }\n    const bricks = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        const x = c * BRICK_W + (r % 2 ? BRICK_W / 2 : 0);\n        const y = r * BRICK_H;\n        const cx = x + BRICK_W / 2;\n        const cy = y + BRICK_H / 2;\n        // pick base mix factor (0..1) to blend purple/cyan/blue\n        const baseMix = Math.random();\n        bricks.push({\n          x,\n          y,\n          w: BRICK_W,\n          h: BRICK_H,\n          baseX: x,\n          baseY: y,\n          cx,\n          cy,\n          pop: 0,\n          vy: 0,\n          phase: Math.random() * Math.PI * 2,\n          falling: false,\n          fallY: 0,\n          fallVy: 0,\n          opacity: 1,\n          gone: false,\n          r,\n          c,\n          baseMix\n        });\n      }\n    }\n\n    // set up palette RGBs\n    const palPurple = hexToRgb(THEME.purple);\n    const palCyan = hexToRgb(THEME.cyan);\n    const palBlue = hexToRgb(THEME.blue);\n\n    // vibration control\n    const MAX_VIBRATE_AMPLITUDE = 6; // px - max wobble when fully active\n    const VIBRATE_RAMP_MS = 2200; // ms to reach full vibration after page becomes active\n\n    canvas._triggerPop = function (px, py) {\n      // stronger pop effect near pointer\n      const R = 160;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px;\n        const dy = b.cy - py;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        if (d < R) {\n          const norm = 1 - d / R;\n          b.pop = Math.max(b.pop, 0.35 * norm);\n          b.vy += 6 * norm + Math.random() * 3;\n        }\n      }\n      // provoke a small falling brick at nearest\n      let nearest = null;\n      let best = Infinity;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px;\n        const dy = b.cy - py;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        if (d < best) {\n          best = d;\n          nearest = b;\n        }\n      }\n      if (nearest && !nearest.falling && best < Math.max(120, Math.min(W, H) * 0.06)) {\n        nearest.falling = true;\n        nearest.fallVy = Math.random() * 4 + 2;\n        nearest.fallY = 0;\n      }\n    };\n    let lastT = performance.now();\n    function draw(now) {\n      let dt = Math.min(40, now - lastT) * 0.001;\n      if (dt <= 0) {\n        bgRAF.current = requestAnimationFrame(draw);\n        return;\n      }\n      lastT = now;\n      ctx.clearRect(0, 0, W, H);\n\n      // background wash so panel content is readable\n      ctx.fillStyle = 'rgba(2,4,10,0.46)';\n      ctx.fillRect(0, 0, W, H);\n      const maxD = Math.max(W, H) * 0.65;\n      const time = now * 0.001;\n\n      // compute panel center based on activeIndexRef; used to increase vibration near current page\n      const activeIdx = activeIndexRef.current || 0;\n      const panelCenterY = activeIdx * height - currentY.current + height / 2;\n      const panelCenterX = W / 2;\n      const panelW = Math.min(1120, W * 0.86);\n      const panelH = Math.min(760, height * 0.78);\n\n      // elapsed since page became active to ramp vibration\n      const elapsedSinceActive = Math.max(0, performance.now() - (activeSince.current || performance.now()));\n      const elapsedFactor = Math.min(1, elapsedSinceActive / VIBRATE_RAMP_MS);\n      for (let b of bricks) {\n        if (b.gone) continue;\n        if (b.falling) {\n          b.fallVy += 1000 * dt;\n          b.fallY += b.fallVy * dt;\n          b.opacity = Math.max(0, 1 - b.fallY / (H * 1.5));\n          if (b.fallY > H + 80) {\n            b.gone = true;\n            continue;\n          }\n        }\n\n        // proximity to pointer for lift/pop\n        const dx = b.cx - cursor.current.x;\n        const dy = b.cy - cursor.current.y;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        let t = Math.max(0, 1 - d / maxD);\n        t = Math.pow(t, 0.9);\n        const lift = b.falling ? 0 : Math.min(18, 12 * t + b.pop * 22);\n        const wobble = b.falling ? 0 : Math.sin(b.phase + time * 1.6) * 2 * t;\n\n        // natural vertical bobbing slightly\n        if (!b.falling) {\n          b.vy -= 26 * dt;\n          b.vy *= 0.92 - Math.min(0.18, t * 0.12);\n          b.pop = Math.max(0, b.pop - 0.014);\n        }\n        const yOffset = b.falling ? b.fallY : -lift + b.vy * dt * 60;\n\n        // compute color mix: combine purple/cyan/blue with per-brick baseMix + small time accent\n        const mixFactor = Math.min(1, Math.max(0, b.baseMix * 0.9 + 0.1 * Math.sin(time * 0.6 + b.phase)));\n        function mix(a, bVal, n) {\n          return Math.round((1 - n) * a + n * bVal);\n        }\n        const rMid = mix(palPurple[0], palCyan[0], mixFactor);\n        const gMid = mix(palPurple[1], palCyan[1], mixFactor);\n        const bMidCol = mix(palPurple[2], palCyan[2], mixFactor);\n        const rFinal = mix(rMid, palBlue[0], Math.abs(Math.sin(b.phase * 0.2 + time * 0.1)) * 0.35);\n        const gFinal = mix(gMid, palBlue[1], Math.abs(Math.cos(b.phase * 0.21 + time * 0.12)) * 0.35);\n        const bFinal = mix(bMidCol, palBlue[2], Math.abs(Math.sin(b.phase * 0.19 + time * 0.14)) * 0.35);\n\n        // darken under panel so text is readable\n        const dxPanel = Math.abs(b.cx - panelCenterX);\n        const dyPanel = Math.abs(b.cy - panelCenterY);\n        let panelDarkness = 0;\n        if (dxPanel < panelW / 2 && dyPanel < panelH / 2) {\n          const nx = 1 - dxPanel / (panelW / 2);\n          const ny = 1 - dyPanel / (panelH / 2);\n          panelDarkness = Math.pow(Math.max(0, Math.min(1, nx * ny)), 1.6) * 0.78;\n        }\n        const finalR = Math.max(6, Math.round(rFinal * (1 - panelDarkness)));\n        const finalG = Math.max(6, Math.round(gFinal * (1 - panelDarkness)));\n        const finalB = Math.max(6, Math.round(bFinal * (1 - panelDarkness)));\n        const finalAlpha = Math.max(0.5, b.opacity - panelDarkness * 0.28);\n\n        // vibration amplitude increases if brick is near current panel center\n        const dxPanelCenter = Math.sqrt(Math.pow(b.cx - panelCenterX, 2) + Math.pow(b.cy - panelCenterY, 2));\n        const panelRadius = Math.max(panelW, panelH) * 0.8;\n        const panelInfluence = Math.max(0, 1 - dxPanelCenter / panelRadius);\n        // amplitude ramps with elapsedFactor and panelInfluence (subtle)\n        const vibrateAmp = MAX_VIBRATE_AMPLITUDE * panelInfluence * elapsedFactor * 0.9;\n        // base slow vibration\n        const vibrate = Math.sin(time * (0.8 + b.phase % 1)) * vibrateAmp * 0.7;\n\n        // small rotation wobble\n        const rot = Math.sin(time * 0.9 + b.phase) * (vibrateAmp * 0.02);\n\n        // draw brick with per-brick gradient\n        const gx = b.baseX + 6;\n        const gy = b.baseY + 6;\n        const grad = ctx.createLinearGradient(gx, gy, gx + b.w - 12, gy + b.h - 12);\n        const colorStart = `rgba(${Math.max(0, finalR - 18)}, ${Math.max(0, finalG - 18)}, ${Math.max(0, finalB - 18)}, ${finalAlpha})`;\n        const colorEnd = `rgba(${finalR}, ${finalG}, ${finalB}, ${finalAlpha})`;\n        grad.addColorStop(0, colorStart);\n        grad.addColorStop(1, colorEnd);\n        ctx.save();\n        ctx.globalAlpha = finalAlpha;\n        ctx.fillStyle = grad;\n        if (lift > 2 && !b.falling && bricks.length < 700) {\n          ctx.shadowBlur = Math.min(26, lift * 1.3);\n          ctx.shadowColor = `rgba(56,40,120,${Math.min(0.22, 0.06 * t + 0.06 * b.pop)})`;\n        } else ctx.shadowBlur = 0;\n        const px = b.baseX + wobble * 0.6 + vibrate;\n        const py = b.baseY + yOffset;\n        // rotate slightly around center for subtle wobble\n        ctx.translate(px + (b.w - 12) / 2, py + (b.h - 12) / 2);\n        ctx.rotate(rot);\n        roundRect(ctx, -(b.w - 12) / 2, -(b.h - 12) / 2, b.w - 12, b.h - 12, 6);\n        ctx.fill();\n\n        // highlight edge for readability\n        if ((t > 0.07 || b.pop > 0.02) && !b.falling && panelDarkness < 0.6) {\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = `rgba(255,255,255,${0.03 * t + 0.04 * b.pop})`;\n          ctx.fillRect(-(b.w - 12) / 2 + 6, -(b.h - 12) / 2 + 4, b.w - 24, Math.max(3, Math.min(8, 4 * t + 6 * b.pop)));\n        }\n        ctx.restore();\n      }\n      bgRAF.current = requestAnimationFrame(draw);\n    }\n    function roundRect(ctx, x, y, w, h, r) {\n      const minr = Math.min(r, w / 2, h / 2);\n      ctx.beginPath();\n      ctx.moveTo(x + minr, y);\n      ctx.arcTo(x + w, y, x + w, y + h, minr);\n      ctx.arcTo(x + w, y + h, x, y + h, minr);\n      ctx.arcTo(x, y + h, x, y, minr);\n      ctx.arcTo(x, y, x + w, y, minr);\n      ctx.closePath();\n    }\n    function onResize() {\n      W = canvas.width = window.innerWidth;\n      H = canvas.height = window.innerHeight;\n      canvas.width = W * DPR;\n      canvas.height = H * DPR;\n      canvas.style.width = W + 'px';\n      canvas.style.height = H + 'px';\n      ctx.scale(DPR, DPR);\n    }\n    window.addEventListener('resize', onResize);\n    bgRAF.current = requestAnimationFrame(draw);\n    return () => {\n      window.removeEventListener('resize', onResize);\n      cancelAnimationFrame(bgRAF.current);\n    };\n  }, [height, activeIndex]);\n\n  // UI transform loop (smooth interpolation of translate)\n  useEffect(() => {\n    function frame() {\n      currentY.current = lerp(currentY.current, targetY.current, performance.now() - lastWheelAt.current > SNAP_DELAY ? LERP_SNAP : LERP_FAST);\n      const el = containerRef.current;\n      if (el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n      chapterRefs.current.forEach((node, i) => {\n        if (!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height;\n        const abs = Math.abs(offset);\n        const translateY = offset * 28;\n        const rotate = offset * 3.2;\n        const scale = 1 - Math.min(0.08, abs * 0.08);\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n        node.style.transform = `translate3d(0px, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) {\n        activeIndexRef.current = idx;\n        setActiveIndex(idx);\n        activeSince.current = performance.now();\n      }\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n  function scrollToIndex(i) {\n    const max = Math.max(0, (visible.length - 1) * height);\n    const dest = Math.max(0, Math.min(i * height, max));\n    targetY.current = dest;\n    lastWheelAt.current = performance.now();\n    isScrolling.current = true;\n    pageIndexRef.current = Math.round(dest / height);\n    setPageIndex(pageIndexRef.current);\n    activeSince.current = performance.now();\n  }\n  const AUTO_ADVANCE_DELAY_MS = 220;\n  function handleAnswer(qid, value) {\n    setAnswers(prev => ({\n      ...prev,\n      [qid]: value\n    }));\n    const questionDef = QUESTIONS.find(x => x.id === qid) || {};\n    let gained = 0;\n    if (questionDef.type === 'mcq' && questionDef.points) gained = questionDef.points[value] || 0;else if (questionDef.type === 'rating') gained = value * (questionDef.pointsPerStar || 1);else if (questionDef.type === 'text') gained = questionDef.points || 0;\n    if (gained) {\n      setScore(s => s + gained);\n      pulseScore();\n    }\n    if (questionDef.type === 'mcq' || questionDef.type === 'rating') {\n      const next = Math.min(activeIndexRef.current + 1, visible.length - 1);\n      setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS);\n    }\n  }\n  function pulseScore() {\n    const el = document.getElementById('score-badge');\n    if (!el) return;\n    el.animate([{\n      transform: 'translateY(0) scale(1)'\n    }, {\n      transform: 'translateY(-6px) scale(1.06)'\n    }, {\n      transform: 'translateY(0) scale(1)'\n    }], {\n      duration: 520,\n      easing: 'ease-out'\n    });\n  }\n  function onMiniGameComplete(success) {\n    if (success) {\n      setScore(s => s + 30);\n      pulseScore();\n    }\n    setAnswers(prev => ({\n      ...prev,\n      q4: success ? 'success' : 'fail'\n    }));\n    setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), 300);\n  }\n  function finish() {\n    setShowFinish(true);\n    if (canvasRef.current) confettiBurst(canvasRef.current);\n  }\n  function resetAll() {\n    if (!window.confirm('Reset survey? This clears local progress.')) return;\n    setAnswers({});\n    setScore(0);\n    setShowFinish(false);\n    targetY.current = 0;\n    currentY.current = 0;\n    pageIndexRef.current = 0;\n    setPageIndex(0);\n    if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)';\n  }\n  function ChapterContent({\n    item,\n    idx\n  }) {\n    if (item.type === 'stage') {\n      const isFirst = idx === 0;\n      const isLast = idx === Math.max(0, visible.length - 1);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          maxWidth: 720,\n          margin: '0 auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(motion.h1, {\n          initial: {\n            y: 40,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            duration: 0.8\n          },\n          style: {\n            fontSize: '2.5rem',\n            fontWeight: 800,\n            background: `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})`,\n            WebkitBackgroundClip: 'text',\n            color: 'transparent',\n            textShadow: '0 6px 30px rgba(124,58,237,0.06)'\n          },\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), item.subtitle && /*#__PURE__*/_jsxDEV(motion.p, {\n          initial: {\n            y: 20,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 0.95\n          },\n          transition: {\n            delay: 0.12\n          },\n          style: {\n            color: THEME.muted,\n            marginTop: 8\n          },\n          children: item.subtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 18,\n            padding: 18,\n            borderRadius: 12,\n            background: THEME.panel,\n            border: '1px solid rgba(255,255,255,0.03)',\n            backdropFilter: 'blur(6px)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 12,\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"44\",\n              height: \"44\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\",\n                stroke: THEME.purple,\n                strokeWidth: \"0.9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 75\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: THEME.text,\n                  fontWeight: 700\n                },\n                children: \"Experience\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: THEME.muted,\n                  fontSize: 13\n                },\n                children: \"A cinematic flow \\u2014 read the prompt, pick quickly, and earn points.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 16,\n              display: 'flex',\n              gap: 12,\n              justifyContent: 'center'\n            },\n            children: isLast ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => resetAll(),\n                className: \"btn btn-primary\",\n                children: \"Restart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 617,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowFinish(true),\n                className: \"btn btn-ghost\",\n                children: \"Finish\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => scrollToIndex(Math.min(idx + 1, visible.length - 1)),\n                className: \"btn btn-primary\",\n                children: \"Enter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 19\n              }, this), !isFirst && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => finish(),\n                className: \"btn btn-ghost\",\n                children: \"Skip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'mcq') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: 980,\n          margin: '0 auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            marginBottom: 12\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\n            gap: 14\n          },\n          children: item.choices.map(c => /*#__PURE__*/_jsxDEV(motion.button, {\n            whileHover: {\n              scale: 1.03\n            },\n            onClick: () => handleAnswer(item.id, c),\n            style: {\n              padding: 18,\n              borderRadius: 20,\n              border: answers[item.id] === c ? 'none' : '1px solid rgba(255,255,255,0.03)',\n              background: answers[item.id] === c ? `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})` : 'rgba(255,255,255,0.02)',\n              color: answers[item.id] === c ? 'black' : THEME.text,\n              boxShadow: answers[item.id] === c ? '0 12px 40px rgba(124,58,237,0.12)' : 'none'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700,\n                fontSize: 18\n              },\n              children: c\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: THEME.muted,\n                marginTop: 6\n              },\n              children: item.points && item.points[c] ? `${item.points[c]} pts` : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this)]\n          }, c, true, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'rating') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            marginBottom: 12\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 12,\n            justifyContent: 'center'\n          },\n          children: Array.from({\n            length: item.scale\n          }).map((_, i) => /*#__PURE__*/_jsxDEV(motion.button, {\n            onClick: () => handleAnswer(item.id, i + 1),\n            whileTap: {\n              scale: 0.95\n            },\n            style: {\n              width: 64,\n              height: 64,\n              borderRadius: 999,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: answers[item.id] === i + 1 ? `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})` : 'rgba(255,255,255,0.02)',\n              color: answers[item.id] === i + 1 ? 'black' : THEME.text,\n              border: '1px solid rgba(255,255,255,0.03)'\n            },\n            children: i + 1\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'text') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: 980,\n          margin: '0 auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: THEME.muted,\n            marginBottom: 12\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          maxLength: item.maxLength,\n          rows: 5,\n          value: answers[item.id] || '',\n          onChange: e => setAnswers(prev => ({\n            ...prev,\n            [item.id]: e.target.value\n          })),\n          className: \"pitch-textarea\",\n          placeholder: \"One-line pitch...\",\n          style: {\n            width: '100%',\n            padding: 16,\n            borderRadius: 12,\n            background: THEME.panel,\n            border: '1px solid rgba(255,255,255,0.03)',\n            color: THEME.text,\n            resize: 'vertical'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginTop: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: THEME.muted\n            },\n            children: [(answers[item.id] || '').length, \"/\", item.maxLength]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 665,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (item.points && (answers[item.id] || '').length > 0) {\n                  setScore(s => s + item.points);\n                  pulseScore();\n                }\n                scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1));\n              },\n              className: \"btn btn-primary\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setAnswers(prev => ({\n                ...prev,\n                [item.id]: ''\n              })),\n              className: \"btn btn-ghost\",\n              children: \"Clear\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'minigame') return /*#__PURE__*/_jsxDEV(MiniGame, {\n      timeLimit: item.timeLimit,\n      onComplete: onMiniGameComplete,\n      flavor: item.flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 42\n    }, this);\n    return null;\n  }\n  useEffect(() => {\n    if (pageIndexRef.current !== activeIndexRef.current) {/* sync */}\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      position: 'relative',\n      overflow: 'hidden',\n      background: THEME.bg,\n      color: THEME.text\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root {\n          --purple: ${THEME.purple};\n          --cyan: ${THEME.cyan};\n          --blue: ${THEME.blue};\n          --text: ${THEME.text};\n          --muted: ${THEME.muted};\n        }\n        .btn { padding: 10px 14px; border-radius: 10px; font-weight:700; cursor:pointer; border: 1px solid rgba(255,255,255,0.03); }\n        .btn-primary { background: linear-gradient(90deg, var(--purple), var(--cyan)); color: black; box-shadow: 0 8px 32px rgba(124,58,237,0.08); }\n        .btn-ghost { background: rgba(255,255,255,0.02); color: var(--text); border: 1px solid rgba(255,255,255,0.03); }\n        .pitch-textarea:focus { outline: 2px solid rgba(124,58,237,0.18); }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomCursor, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 698,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        inset: 0,\n        pointerEvents: 'none',\n        background: `linear-gradient(180deg, rgba(3,3,10,0.18), rgba(2,4,10,0.72))`,\n        zIndex: -10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: bgCanvasRef,\n      className: \"fixed inset-0 z-0 pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"fixed inset-0 z-50 pointer-events-none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        right: 18,\n        top: 18,\n        zIndex: 100,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-end',\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"score-badge\",\n        style: {\n          padding: '10px 14px',\n          borderRadius: 999,\n          background: `linear-gradient(90deg, ${THEME.purple}, ${THEME.magenta})`,\n          color: '#000',\n          fontWeight: 800\n        },\n        children: [score, \" pts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: THEME.muted,\n          fontSize: 12\n        },\n        children: [\"Level \", Math.floor(score / 50) + 1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 706,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      style: {\n        position: 'fixed',\n        left: 18,\n        top: '50%',\n        transform: 'translateY(-50%)',\n        zIndex: 100,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 10\n      },\n      children: visible.map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => scrollToIndex(i),\n        \"aria-label\": `Go to chapter ${i + 1}`,\n        style: {\n          width: 12,\n          height: 12,\n          borderRadius: 999,\n          background: i === activeIndex ? `linear-gradient(90deg, ${THEME.purple}, ${THEME.magenta})` : 'rgba(255,255,255,0.03)',\n          border: '1px solid rgba(255,255,255,0.02)'\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"fixed inset-0 top-0 left-0 w-full will-change-transform z-40\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: `${visible.length * height}px`\n        },\n        children: visible.map((item, i) => /*#__PURE__*/_jsxDEV(\"section\", {\n          ref: addChapterRef,\n          style: {\n            height: `${height}px`\n          },\n          className: \"flex items-center justify-center px-6 md:px-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              maxWidth: 1120,\n              margin: '0 auto',\n              display: 'grid',\n              gridTemplateColumns: '1fr 2fr',\n              gap: 20,\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n              style: {\n                display: window.innerWidth >= 1024 ? 'flex' : 'none',\n                flexDirection: 'column',\n                gap: 12,\n                alignItems: 'flex-start'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  color: THEME.muted,\n                  fontSize: 13\n                },\n                children: \"Chapter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                animate: {\n                  rotate: activeIndex === i ? 6 : 0\n                },\n                transition: {\n                  type: 'spring'\n                },\n                style: {\n                  fontSize: 36,\n                  fontWeight: 900,\n                  color: THEME.text\n                },\n                children: String(i + 1).padStart(2, '0')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: 6,\n                  height: '100%',\n                  background: `linear-gradient(180deg, ${THEME.purple}, ${THEME.magenta})`,\n                  opacity: 0.28,\n                  borderRadius: 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                borderRadius: 14,\n                padding: 28,\n                textAlign: 'center',\n                background: 'rgba(0,0,0,0.46)',\n                border: '1px solid rgba(255,255,255,0.03)',\n                backdropFilter: 'blur(8px)'\n              },\n              children: /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0,\n                  y: 30\n                },\n                animate: {\n                  opacity: 1,\n                  y: 0\n                },\n                transition: {\n                  duration: 0.6\n                },\n                children: /*#__PURE__*/_jsxDEV(ChapterContent, {\n                  item: item,\n                  idx: i\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 15\n          }, this)\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: showFinish && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        style: {\n          position: 'fixed',\n          inset: 0,\n          zIndex: 90,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 'min(720px,92%)',\n            padding: 28,\n            borderRadius: 18,\n            background: 'rgba(0,0,0,0.6)',\n            border: '1px solid rgba(255,255,255,0.04)',\n            backdropFilter: 'blur(8px)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              color: THEME.text,\n              fontSize: 28,\n              fontWeight: 800\n            },\n            children: \"All done \\uD83C\\uDF89\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: THEME.muted,\n              marginTop: 10\n            },\n            children: [\"You earned \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: {\n                color: THEME.text\n              },\n              children: score\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 73\n            }, this), \" points. Thanks for playing!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 742,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 18,\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => resetAll(),\n              className: \"btn btn-primary\",\n              children: \"Reset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 683,\n    columnNumber: 5\n  }, this);\n}\n_s3(GamifiedSurveyForm, \"7IuHzfRfPOmVDIXnUIPi7C8wNWo=\");\n_c3 = GamifiedSurveyForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"CustomCursor\");\n$RefreshReg$(_c2, \"MiniGame\");\n$RefreshReg$(_c3, \"GamifiedSurveyForm\");","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","AnimatePresence","jsxDEV","_jsxDEV","Fragment","_Fragment","THEME","purple","cyan","blue","magenta","bg","panel","text","muted","QUESTIONS","id","type","title","subtitle","choices","points","flavor","scale","pointsPerStar","maxLength","timeLimit","pointsOnSuccess","dependsOn","q1","lerp","a","b","n","hexToRgb","hex","h","replace","parseInt","substring","confettiBurst","canvas","ctx","getContext","W","width","window","innerWidth","H","height","innerHeight","palette","pieces","i","push","x","Math","random","y","vx","vy","r","color","floor","length","rot","PI","vr","life","frame","clearRect","alive","p","save","translate","rotate","fillStyle","fillRect","restore","requestAnimationFrame","CustomCursor","_s","dotRef","ringRef","pos","hover","rafRef","dot","current","ring","onMouseMove","e","clientX","clientY","onHoverChange","t","target","closest","addEventListener","cx","cy","ringScale","loop","style","transform","rx","parseFloat","dataset","ry","removeEventListener","cancelAnimationFrame","document","documentElement","classList","add","remove","children","ref","position","left","top","borderRadius","border","pointerEvents","transition","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","background","boxShadow","_c","MiniGame","onComplete","_s2","charge","setCharge","runningRef","raf","startedAt","manualBoost","start","performance","now","tick","elapsed","base","min","round","total","handleTap","c","display","flexDirection","alignItems","gap","fontSize","justifyContent","div","onClick","whileTap","whileHover","stiffness","cursor","fontWeight","maxWidth","marginBottom","overflow","initial","animate","damping","_c2","GamifiedSurveyForm","_s3","answers","setAnswers","raw","localStorage","getItem","JSON","parse","score","setScore","Number","showFinish","setShowFinish","canvasRef","bgCanvasRef","setHeight","setItem","stringify","String","visible","filter","q","keys","Object","every","k","onResize","prevOverflow","prevTouch","body","touchAction","containerRef","chapterRefs","addChapterRef","el","targetY","currentY","lastWheelAt","isScrolling","SNAP_DELAY","LERP_FAST","LERP_SNAP","active","lastCursorUpdate","bgRAF","activeIndexRef","activeIndex","setActiveIndex","activeSince","pageIndex","setPageIndex","pageIndexRef","wheelAccum","wheelLock","loadProgress","setLoadProgress","touchStart","vY","time","clampPage","max","setPage","onWheel","preventDefault","deltaY","THRESH","abs","dir","setTimeout","onTouchStart","touches","onTouchEnd","changedTouches","delta","SWIPE_MIN","onKey","includes","key","onPointerMove","onPointerLeave","onPointerDown","px","py","_triggerPop","passive","DPR","devicePixelRatio","BRICK_W","BRICK_H","cols","ceil","rows","MAX_BRICKS","scaleUp","sqrt","bricks","baseMix","w","baseX","baseY","pop","phase","falling","fallY","fallVy","opacity","gone","palPurple","palCyan","palBlue","MAX_VIBRATE_AMPLITUDE","VIBRATE_RAMP_MS","R","dx","dy","d","norm","nearest","best","Infinity","lastT","draw","dt","maxD","activeIdx","panelCenterY","panelCenterX","panelW","panelH","elapsedSinceActive","elapsedFactor","pow","lift","wobble","sin","yOffset","mixFactor","mix","bVal","rMid","gMid","bMidCol","rFinal","gFinal","cos","bFinal","dxPanel","dyPanel","panelDarkness","nx","ny","finalR","finalG","finalB","finalAlpha","dxPanelCenter","panelRadius","panelInfluence","vibrateAmp","vibrate","gx","gy","grad","createLinearGradient","colorStart","colorEnd","addColorStop","globalAlpha","shadowBlur","shadowColor","roundRect","fill","minr","beginPath","moveTo","arcTo","closePath","forEach","node","center","offset","translateY","idx","scrollToIndex","dest","AUTO_ADVANCE_DELAY_MS","handleAnswer","qid","value","prev","questionDef","find","gained","s","pulseScore","next","getElementById","duration","easing","onMiniGameComplete","success","q4","finish","resetAll","confirm","ChapterContent","item","isFirst","isLast","textAlign","margin","h1","WebkitBackgroundClip","textShadow","delay","marginTop","padding","backdropFilter","viewBox","stroke","strokeWidth","className","gridTemplateColumns","map","button","Array","from","_","onChange","placeholder","resize","minHeight","inset","right","padStart","exit","_c3","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/App/gamified-survey/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n/**\n * GamifiedSurveyForm - updated\n * - Removed all background video logic (per your request)\n * - Bricks canvas: purple / cyan / blue gradient palette\n * - Per-brick variation, reactive to pointer clicks & movement\n * - Subtle vibration that ramps up slowly while a page is active\n * - Page-jump scrolling (clean snaps)\n *\n * Replace your src/App.js with this file.\n */\n\nconst THEME = {\n  purple: \"#7c3aed\",\n  cyan: \"#06b6d4\",\n  blue: \"#3b82f6\",\n  magenta: \"#ff4791\",\n  bg: \"#030317\",\n  panel: \"rgba(6,8,22,0.78)\",\n  text: \"#e8f0ff\",\n  muted: \"#9aa6b2\",\n};\n\nconst QUESTIONS = [\n  { id: \"intro\", type: \"stage\", title: \"Nightfall at HackPlay\", subtitle: \"Step into a neon-lit hall. Your choices tune the journey.\" },\n  {\n    id: \"q1\",\n    type: \"mcq\",\n    title: \"Entrance — choose your mindset\",\n    choices: [\"Build something cool\", \"Learn fast\", \"Meet people\", \"Chase the prizes\"],\n    points: { \"Build something cool\": 20, \"Learn fast\": 10, \"Meet people\": 15, \"Chase the prizes\": 5 },\n    flavor: \"The doors close. A low bass. Pick the vibe that follows you.\",\n  },\n  {\n    id: \"q2\",\n    type: \"rating\",\n    title: \"Charge Meter — how hyped are you?\",\n    scale: 5,\n    pointsPerStar: 6,\n    flavor: \"The stage lights react to your energy.\",\n  },\n  {\n    id: \"q3\",\n    type: \"text\",\n    title: \"One-line pitch — what's the idea?\",\n    maxLength: 140,\n    points: 15,\n    flavor: \"A single line — the fragment your team will build around.\",\n  },\n  {\n    id: \"q4\",\n    type: \"minigame\",\n    title: \"Charge the core — tap to power your idea\",\n    timeLimit: 6000,\n    pointsOnSuccess: 30,\n    flavor: \"Fast reflexes prove prototype-ready energy.\",\n  },\n  {\n    id: \"q5\",\n    type: \"mcq\",\n    title: \"Team vibe — pick your tribe\",\n    choices: [\"Chill coders\", \"All-nighters\", \"Balanced squad\", \"Solo hero\"],\n    points: { \"Chill coders\": 10, \"All-nighters\": 20, \"Balanced squad\": 15, \"Solo hero\": 5 },\n    flavor: \"Who will you ride the night with?\",\n    dependsOn: { q1: \"Build something cool\" },\n  },\n  { id: \"end\", type: \"stage\", title: \"Curtain Call\", subtitle: \"Collect badges, revisit your pitch, and step back into the light.\" },\n];\n\nfunction lerp(a, b, n) { return (1 - n) * a + n * b; }\nfunction hexToRgb(hex) {\n  const h = hex.replace(\"#\", \"\");\n  return [parseInt(h.substring(0,2),16), parseInt(h.substring(2,4),16), parseInt(h.substring(4,6),16)];\n}\n\n/* ---------------- confetti ---------------- */\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext(\"2d\");\n  const W = (canvas.width = window.innerWidth);\n  const H = (canvas.height = window.innerHeight);\n  const palette = [THEME.purple, THEME.cyan, THEME.blue, THEME.magenta, \"#ffd93d\"];\n  const pieces = [];\n  for (let i = 0; i < 80; i++) {\n    pieces.push({\n      x: W / 2 + (Math.random() - 0.5) * 160,\n      y: H / 3 + (Math.random() - 0.5) * 80,\n      vx: (Math.random() - 0.5) * 14,\n      vy: (Math.random() - 1.5) * 10,\n      r: Math.random() * 6 + 3,\n      color: palette[Math.floor(Math.random() * palette.length)],\n      rot: Math.random() * Math.PI * 2,\n      vr: (Math.random() - 0.5) * 0.15,\n      life: 140 + Math.random() * 80,\n    });\n  }\n  function frame() {\n    ctx.clearRect(0, 0, W, H);\n    let alive = false;\n    for (let p of pieces) {\n      if (p.life > 0) {\n        alive = true;\n        p.vy += 0.18;\n        p.x += p.vx;\n        p.y += p.vy;\n        p.rot += p.vr;\n        ctx.save();\n        ctx.translate(p.x, p.y);\n        ctx.rotate(p.rot);\n        ctx.fillStyle = p.color;\n        ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r * 0.6);\n        ctx.restore();\n        p.life -= 1;\n      }\n    }\n    if (alive) requestAnimationFrame(frame);\n    else ctx.clearRect(0, 0, W, H);\n  }\n  frame();\n}\n\n/* ---------------- Custom Cursor ---------------- */\nfunction CustomCursor() {\n  const dotRef = useRef(null);\n  const ringRef = useRef(null);\n  const pos = useRef({ x: typeof window !== \"undefined\" ? window.innerWidth/2 : 0, y: typeof window !== \"undefined\" ? window.innerHeight/2 : 0 });\n  const hover = useRef(false);\n  const rafRef = useRef(null);\n\n  useEffect(() => {\n    const dot = dotRef.current; const ring = ringRef.current;\n    if (!dot || !ring) return;\n    function onMouseMove(e) { pos.current.x = e.clientX; pos.current.y = e.clientY; }\n    function onHoverChange(e) { const t = e.target; hover.current = !!(t.closest && t.closest('button, a, [role=\"button\"], input, textarea')); }\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseover', onHoverChange);\n\n    let cx = pos.current.x; let cy = pos.current.y; let ringScale = 1;\n    function loop() {\n      cx = lerp(cx, pos.current.x, 0.18);\n      cy = lerp(cy, pos.current.y, 0.18);\n      dot.style.transform = `translate3d(${cx-6}px, ${cy-6}px, 0)`;\n      const rx = lerp(parseFloat(ring.dataset.x || cx), cx, 0.08);\n      const ry = lerp(parseFloat(ring.dataset.y || cy), cy, 0.08);\n      ring.dataset.x = rx; ring.dataset.y = ry;\n      ringScale = lerp(ringScale, hover.current ? 1.9 : 1, 0.12);\n      ring.style.transform = `translate3d(${rx-18}px, ${ry-18}px, 0) scale(${ringScale})`;\n      rafRef.current = requestAnimationFrame(loop);\n    }\n    rafRef.current = requestAnimationFrame(loop);\n\n    return () => { window.removeEventListener('mousemove', onMouseMove); window.removeEventListener('mouseover', onHoverChange); cancelAnimationFrame(rafRef.current); };\n  }, []);\n\n  useEffect(() => { document.documentElement.classList.add('custom-cursor-hide'); return () => document.documentElement.classList.remove('custom-cursor-hide'); }, []);\n\n  return (\n    <>\n      <div ref={ringRef} style={{ position: 'fixed', left: 0, top: 0, width: 36, height: 36, borderRadius: 9999, border: '1.5px solid rgba(255,255,255,0.06)', pointerEvents: 'none', transform: 'translate3d(0,0,0)', transition: 'background-color 160ms, border-color 160ms', zIndex: 100000 }} />\n      <div ref={dotRef} style={{ position: 'fixed', left: 0, top: 0, width: 12, height: 12, borderRadius: 9999, background: 'radial-gradient(circle at 30% 30%, #fff, #ddd)', boxShadow: '0 6px 20px rgba(124,58,237,0.14)', pointerEvents: 'none', transform: 'translate3d(0,0,0)', zIndex: 100001 }} />\n      <style>{`.custom-cursor-hide, .custom-cursor-hide * { cursor: none !important; }`}</style>\n    </>\n  );\n}\n\n/* ---------------- MiniGame (kept) ---------------- */\nfunction MiniGame({ timeLimit = 6000, onComplete, flavor }) {\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0);\n\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n\n  function start() { if (runningRef.current) return; runningRef.current = true; manualBoost.current = 0; startedAt.current = performance.now(); tick(); }\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round((elapsed / timeLimit) * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n      if (total >= 100) { runningRef.current = false; cancelAnimationFrame(raf.current); onComplete(true); return; }\n      if (elapsed >= timeLimit) { runningRef.current = false; cancelAnimationFrame(raf.current); onComplete(total >= 60); return; }\n      tick();\n    });\n  }\n  function handleTap() { if (!runningRef.current) start(); else { manualBoost.current = Math.min(100, manualBoost.current + 12); setCharge(c => Math.min(100, c + 12)); } }\n\n  return (\n    <div style={{ width: '100%', display:'flex', flexDirection:'column', alignItems:'center', gap: 12 }}>\n      <div style={{ color: THEME.muted, fontSize: 13 }}>{flavor}</div>\n      <div style={{ width: 160, height: 160, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <motion.div onClick={handleTap} whileTap={{ scale: 0.9 }} whileHover={{ scale: 1.04 }} transition={{ type: 'spring', stiffness: 300 }} style={{ width: 140, height: 140, borderRadius: 999, display: 'flex', alignItems:'center', justifyContent:'center', cursor: 'pointer', background: `linear-gradient(135deg, ${THEME.purple}, ${THEME.magenta})`, boxShadow: '0 12px 40px rgba(124,58,237,0.09)' }}>\n          <div style={{ color: '#fff', fontWeight: 800, fontSize: 16 }}>TAP</div>\n        </motion.div>\n      </div>\n      <div style={{ width: '100%', maxWidth: 520 }}>\n        <div style={{ color: THEME.muted, marginBottom: 6 }}>Charge: {charge}%</div>\n        <div style={{ width: '100%', height: 12, borderRadius: 10, overflow: 'hidden', background: 'rgba(255,255,255,0.02)' }}>\n          <motion.div initial={{ width: 0 }} animate={{ width: `${charge}%` }} transition={{ type: 'spring', stiffness: 140, damping: 16 }} style={{ height: '100%', borderRadius: 10, background: `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})` }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ---------------- Main component ---------------- */\nexport default function GamifiedSurveyForm() {\n  const [answers, setAnswers] = useState(() => { try { const raw = localStorage.getItem('gamifiedSurveyAnswers'); return raw ? JSON.parse(raw) : {}; } catch (e) { return {}; } });\n  const [score, setScore] = useState(() => Number(localStorage.getItem('gamifiedSurveyScore')) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n\n  const canvasRef = useRef(null);   // confetti\n  const bgCanvasRef = useRef(null); // bricks\n  const [height, setHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\n\n  useEffect(() => localStorage.setItem('gamifiedSurveyAnswers', JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem('gamifiedSurveyScore', String(score)), [score]);\n\n  const visible = QUESTIONS.filter(q => { if (!q.dependsOn) return true; const keys = Object.keys(q.dependsOn); return keys.every(k => answers[k] === q.dependsOn[k]); });\n\n  useEffect(() => { function onResize(){ setHeight(window.innerHeight); } window.addEventListener('resize', onResize); return () => window.removeEventListener('resize', onResize); }, []);\n\n  // lock page-style scrolling\n  useEffect(() => {\n    const prevOverflow = document.documentElement.style.overflow;\n    const prevTouch = document.body.style.touchAction;\n    document.documentElement.style.overflow = 'hidden';\n    document.body.style.touchAction = 'none';\n    return () => { document.documentElement.style.overflow = prevOverflow; document.body.style.touchAction = prevTouch; };\n  }, []);\n\n  // refs & scrolling\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = (el) => { if (el) chapterRefs.current.push(el); };\n\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n  const isScrolling = useRef(false);\n  const SNAP_DELAY = 70;\n  const LERP_FAST = 0.42;\n  const LERP_SNAP = 0.62;\n\n  const cursor = useRef({ x: typeof window !== 'undefined' ? window.innerWidth/2 : 0, y: typeof window !== 'undefined' ? window.innerHeight/2 : 0, active: false });\n  const lastCursorUpdate = useRef(0);\n  const bgRAF = useRef(null);\n\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const activeSince = useRef(performance.now());\n\n  // pageIndex & wheel accumulator for page jumps\n  const [pageIndex, setPageIndex] = useState(0);\n  const pageIndexRef = useRef(0);\n  const wheelAccum = useRef(0);\n  const wheelLock = useRef(false);\n\n  // loading simulation (simple)\n  const [loadProgress, setLoadProgress] = useState(100);\n  useEffect(() => { setLoadProgress(100); }, []);\n\n  useEffect(() => {\n    // pointer & wheel & keyboard handling (page jumps)\n    const touchStart = { vY: 0, time: 0 };\n    function clampPage(i){ return Math.max(0, Math.min(i, visible.length - 1)); }\n    function setPage(i){\n      const c = clampPage(i);\n      pageIndexRef.current = c; setPageIndex(c);\n      targetY.current = c * height; lastWheelAt.current = performance.now(); isScrolling.current = true;\n      activeIndexRef.current = c; setActiveIndex(c); activeSince.current = performance.now();\n    }\n\n    function onWheel(e){\n      e.preventDefault();\n      if (wheelLock.current) return;\n      wheelAccum.current += e.deltaY;\n      const THRESH = 100; // tuned for predictable jumps (increase to make less sensitive)\n      if (Math.abs(wheelAccum.current) >= THRESH) {\n        const dir = wheelAccum.current > 0 ? 1 : -1;\n        setPage(pageIndexRef.current + dir);\n        wheelAccum.current = 0;\n        wheelLock.current = true;\n        setTimeout(()=> wheelLock.current = false, 320);\n      }\n      lastWheelAt.current = performance.now();\n    }\n\n    function onTouchStart(e){ touchStart.vY = e.touches[0].clientY; touchStart.time = performance.now(); }\n    function onTouchEnd(e){\n      const y = (e.changedTouches && e.changedTouches[0] && e.changedTouches[0].clientY) || touchStart.vY;\n      const delta = touchStart.vY - y;\n      const elapsed = performance.now() - touchStart.time;\n      const SWIPE_MIN = 40;\n      if (Math.abs(delta) > SWIPE_MIN) {\n        const dir = delta > 0 ? 1 : -1;\n        setPage(pageIndexRef.current + dir);\n      }\n    }\n\n    function onKey(e){\n      if ([\"ArrowDown\",\"PageDown\",\" \"].includes(e.key)) { e.preventDefault(); setPage(pageIndexRef.current + 1); }\n      if ([\"ArrowUp\",\"PageUp\"].includes(e.key)) { e.preventDefault(); setPage(pageIndexRef.current - 1); }\n    }\n\n    function onPointerMove(e){ const now = performance.now(); if (now - lastCursorUpdate.current > 12) { cursor.current.x = e.clientX; cursor.current.y = e.clientY; cursor.current.active = true; lastCursorUpdate.current = now; } }\n    function onPointerLeave(){ cursor.current.active = false; }\n    function onPointerDown(e){ const px = e.clientX; const py = e.clientY; cursor.current.x = px; cursor.current.y = py; if (bgCanvasRef.current && bgCanvasRef.current._triggerPop) bgCanvasRef.current._triggerPop(px, py); }\n\n    const el = containerRef.current || window;\n    el.addEventListener('wheel', onWheel, { passive: false });\n    window.addEventListener('touchstart', onTouchStart, { passive: false });\n    window.addEventListener('touchend', onTouchEnd);\n    window.addEventListener('keydown', onKey);\n    window.addEventListener('pointermove', onPointerMove);\n    window.addEventListener('pointerout', onPointerLeave);\n    window.addEventListener('pointerdown', onPointerDown);\n\n    return () => {\n      el.removeEventListener('wheel', onWheel);\n      window.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('touchend', onTouchEnd);\n      window.removeEventListener('keydown', onKey);\n      window.removeEventListener('pointermove', onPointerMove);\n      window.removeEventListener('pointerout', onPointerLeave);\n      window.removeEventListener('pointerdown', onPointerDown);\n    };\n  }, [height, visible.length]);\n\n  /* ---------------- Bricks canvas: purple / cyan / blue with vibration ----------------\n     - Increased reactivity to pointer (b.pop / vy)\n     - Slow vibration that increases if the brick is near the active panel center.\n     - MAX_VIBRATE_AMPLITUDE controls maximum pixel vibration applied.\n  */\n  useEffect(() => {\n    const canvas = bgCanvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    let W = canvas.width = window.innerWidth;\n    let H = canvas.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.5);\n    canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = `${W}px`; canvas.style.height = `${H}px`; ctx.scale(DPR, DPR);\n\n    let BRICK_W = window.innerWidth < 640 ? 120 : 96;\n    let BRICK_H = window.innerWidth < 640 ? 56 : 44;\n    let cols = Math.ceil(W / BRICK_W); let rows = Math.ceil(H / BRICK_H);\n    const MAX_BRICKS = 900;\n    if (cols * rows > MAX_BRICKS) {\n      const scaleUp = Math.sqrt((cols * rows) / MAX_BRICKS);\n      BRICK_W = Math.ceil(BRICK_W * scaleUp);\n      BRICK_H = Math.ceil(BRICK_H * scaleUp);\n      cols = Math.ceil(W / BRICK_W); rows = Math.ceil(H / BRICK_H);\n    }\n\n    const bricks = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        const x = c * BRICK_W + (r % 2 ? BRICK_W / 2 : 0);\n        const y = r * BRICK_H;\n        const cx = x + BRICK_W / 2;\n        const cy = y + BRICK_H / 2;\n        // pick base mix factor (0..1) to blend purple/cyan/blue\n        const baseMix = Math.random();\n        bricks.push({\n          x, y, w: BRICK_W, h: BRICK_H, baseX: x, baseY: y, cx, cy,\n          pop: 0, vy: 0, phase: Math.random() * Math.PI * 2,\n          falling: false, fallY: 0, fallVy: 0, opacity: 1, gone: false,\n          r, c, baseMix,\n        });\n      }\n    }\n\n    // set up palette RGBs\n    const palPurple = hexToRgb(THEME.purple);\n    const palCyan = hexToRgb(THEME.cyan);\n    const palBlue = hexToRgb(THEME.blue);\n\n    // vibration control\n    const MAX_VIBRATE_AMPLITUDE = 6; // px - max wobble when fully active\n    const VIBRATE_RAMP_MS = 2200; // ms to reach full vibration after page becomes active\n\n    canvas._triggerPop = function(px, py) {\n      // stronger pop effect near pointer\n      const R = 160;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px; const dy = b.cy - py; const d = Math.sqrt(dx*dx + dy*dy);\n        if (d < R) {\n          const norm = 1 - d / R;\n          b.pop = Math.max(b.pop, 0.35 * norm);\n          b.vy += (6 * norm) + (Math.random() * 3);\n        }\n      }\n      // provoke a small falling brick at nearest\n      let nearest = null; let best = Infinity;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px; const dy = b.cy - py; const d = Math.sqrt(dx*dx + dy*dy);\n        if (d < best) { best = d; nearest = b; }\n      }\n      if (nearest && !nearest.falling && best < Math.max(120, Math.min(W, H) * 0.06)) {\n        nearest.falling = true; nearest.fallVy = Math.random() * 4 + 2; nearest.fallY = 0;\n      }\n    };\n\n    let lastT = performance.now();\n    function draw(now) {\n      let dt = Math.min(40, now - lastT) * 0.001;\n      if (dt <= 0) { bgRAF.current = requestAnimationFrame(draw); return; }\n      lastT = now;\n      ctx.clearRect(0, 0, W, H);\n\n      // background wash so panel content is readable\n      ctx.fillStyle = 'rgba(2,4,10,0.46)';\n      ctx.fillRect(0, 0, W, H);\n\n      const maxD = Math.max(W, H) * 0.65;\n      const time = now * 0.001;\n\n      // compute panel center based on activeIndexRef; used to increase vibration near current page\n      const activeIdx = activeIndexRef.current || 0;\n      const panelCenterY = (activeIdx * height - currentY.current) + (height / 2);\n      const panelCenterX = W / 2;\n      const panelW = Math.min(1120, W * 0.86);\n      const panelH = Math.min(760, height * 0.78);\n\n      // elapsed since page became active to ramp vibration\n      const elapsedSinceActive = Math.max(0, performance.now() - (activeSince.current || performance.now()));\n      const elapsedFactor = Math.min(1, elapsedSinceActive / VIBRATE_RAMP_MS);\n\n      for (let b of bricks) {\n        if (b.gone) continue;\n\n        if (b.falling) {\n          b.fallVy += 1000 * dt;\n          b.fallY += b.fallVy * dt;\n          b.opacity = Math.max(0, 1 - (b.fallY / (H * 1.5)));\n          if (b.fallY > H + 80) { b.gone = true; continue; }\n        }\n\n        // proximity to pointer for lift/pop\n        const dx = b.cx - cursor.current.x; const dy = b.cy - cursor.current.y; const d = Math.sqrt(dx*dx + dy*dy);\n        let t = Math.max(0, 1 - d / maxD); t = Math.pow(t, 0.9);\n        const lift = b.falling ? 0 : Math.min(18, 12 * t + b.pop * 22);\n        const wobble = b.falling ? 0 : Math.sin(b.phase + time * 1.6) * 2 * t;\n\n        // natural vertical bobbing slightly\n        if (!b.falling) { b.vy -= 26 * dt; b.vy *= (0.92 - Math.min(0.18, t * 0.12)); b.pop = Math.max(0, b.pop - 0.014); }\n        const yOffset = b.falling ? b.fallY : (-lift + b.vy * dt * 60);\n\n        // compute color mix: combine purple/cyan/blue with per-brick baseMix + small time accent\n        const mixFactor = Math.min(1, Math.max(0, b.baseMix * 0.9 + 0.1 * Math.sin(time * 0.6 + b.phase)));\n        function mix(a,bVal,n){ return Math.round((1-n)*a + n*bVal); }\n        const rMid = mix(palPurple[0], palCyan[0], mixFactor);\n        const gMid = mix(palPurple[1], palCyan[1], mixFactor);\n        const bMidCol = mix(palPurple[2], palCyan[2], mixFactor);\n        const rFinal = mix(rMid, palBlue[0], Math.abs(Math.sin(b.phase * 0.2 + time * 0.1)) * 0.35);\n        const gFinal = mix(gMid, palBlue[1], Math.abs(Math.cos(b.phase * 0.21 + time * 0.12)) * 0.35);\n        const bFinal = mix(bMidCol, palBlue[2], Math.abs(Math.sin(b.phase * 0.19 + time * 0.14)) * 0.35);\n\n        // darken under panel so text is readable\n        const dxPanel = Math.abs(b.cx - panelCenterX);\n        const dyPanel = Math.abs(b.cy - panelCenterY);\n        let panelDarkness = 0;\n        if (dxPanel < panelW/2 && dyPanel < panelH/2) {\n          const nx = 1 - (dxPanel / (panelW/2));\n          const ny = 1 - (dyPanel / (panelH/2));\n          panelDarkness = Math.pow(Math.max(0, Math.min(1, nx * ny)), 1.6) * 0.78;\n        }\n\n        const finalR = Math.max(6, Math.round(rFinal * (1 - panelDarkness)));\n        const finalG = Math.max(6, Math.round(gFinal * (1 - panelDarkness)));\n        const finalB = Math.max(6, Math.round(bFinal * (1 - panelDarkness)));\n        const finalAlpha = Math.max(0.5, b.opacity - (panelDarkness * 0.28));\n\n        // vibration amplitude increases if brick is near current panel center\n        const dxPanelCenter = Math.sqrt(Math.pow(b.cx - panelCenterX, 2) + Math.pow(b.cy - panelCenterY, 2));\n        const panelRadius = Math.max(panelW, panelH) * 0.8;\n        const panelInfluence = Math.max(0, 1 - dxPanelCenter / panelRadius);\n        // amplitude ramps with elapsedFactor and panelInfluence (subtle)\n        const vibrateAmp = MAX_VIBRATE_AMPLITUDE * panelInfluence * elapsedFactor * 0.9;\n        // base slow vibration\n        const vibrate = Math.sin(time * (0.8 + (b.phase % 1))) * vibrateAmp * 0.7;\n\n        // small rotation wobble\n        const rot = Math.sin(time * 0.9 + b.phase) * (vibrateAmp * 0.02);\n\n        // draw brick with per-brick gradient\n        const gx = b.baseX + 6;\n        const gy = b.baseY + 6;\n        const grad = ctx.createLinearGradient(gx, gy, gx + b.w - 12, gy + b.h - 12);\n        const colorStart = `rgba(${Math.max(0, finalR-18)}, ${Math.max(0, finalG-18)}, ${Math.max(0, finalB-18)}, ${finalAlpha})`;\n        const colorEnd = `rgba(${finalR}, ${finalG}, ${finalB}, ${finalAlpha})`;\n        grad.addColorStop(0, colorStart);\n        grad.addColorStop(1, colorEnd);\n\n        ctx.save();\n        ctx.globalAlpha = finalAlpha;\n        ctx.fillStyle = grad;\n        if (lift > 2 && !b.falling && bricks.length < 700) {\n          ctx.shadowBlur = Math.min(26, lift * 1.3);\n          ctx.shadowColor = `rgba(56,40,120,${Math.min(0.22, 0.06 * t + 0.06 * b.pop)})`;\n        } else ctx.shadowBlur = 0;\n\n        const px = b.baseX + wobble * 0.6 + vibrate;\n        const py = b.baseY + yOffset;\n        // rotate slightly around center for subtle wobble\n        ctx.translate(px + (b.w - 12)/2, py + (b.h - 12)/2);\n        ctx.rotate(rot);\n        roundRect(ctx, -(b.w - 12)/2, -(b.h - 12)/2, b.w - 12, b.h - 12, 6);\n        ctx.fill();\n\n        // highlight edge for readability\n        if ((t > 0.07 || b.pop > 0.02) && !b.falling && panelDarkness < 0.6) {\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = `rgba(255,255,255,${0.03 * t + 0.04 * b.pop})`;\n          ctx.fillRect(- (b.w - 12)/2 + 6, - (b.h - 12)/2 + 4, b.w - 24, Math.max(3, Math.min(8, 4 * t + 6 * b.pop)));\n        }\n        ctx.restore();\n      }\n\n      bgRAF.current = requestAnimationFrame(draw);\n    }\n\n    function roundRect(ctx, x, y, w, h, r) { const minr = Math.min(r, w/2, h/2); ctx.beginPath(); ctx.moveTo(x + minr, y); ctx.arcTo(x + w, y, x + w, y + h, minr); ctx.arcTo(x + w, y + h, x, y + h, minr); ctx.arcTo(x, y + h, x, y, minr); ctx.arcTo(x, y, x + w, y, minr); ctx.closePath(); }\n\n    function onResize() { W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = W + 'px'; canvas.style.height = H + 'px'; ctx.scale(DPR, DPR); }\n    window.addEventListener('resize', onResize);\n    bgRAF.current = requestAnimationFrame(draw);\n\n    return () => { window.removeEventListener('resize', onResize); cancelAnimationFrame(bgRAF.current); };\n  }, [height, activeIndex]);\n\n  // UI transform loop (smooth interpolation of translate)\n  useEffect(() => {\n    function frame() {\n      currentY.current = lerp(currentY.current, targetY.current, (performance.now() - lastWheelAt.current > SNAP_DELAY) ? LERP_SNAP : LERP_FAST);\n      const el = containerRef.current; if (el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n\n      chapterRefs.current.forEach((node, i) => {\n        if (!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height;\n        const abs = Math.abs(offset);\n        const translateY = offset * 28;\n        const rotate = offset * 3.2;\n        const scale = 1 - Math.min(0.08, abs * 0.08);\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n        node.style.transform = `translate3d(0px, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) {\n        activeIndexRef.current = idx; setActiveIndex(idx); activeSince.current = performance.now();\n      }\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n\n  function scrollToIndex(i) { const max = Math.max(0, (visible.length - 1) * height); const dest = Math.max(0, Math.min(i * height, max)); targetY.current = dest; lastWheelAt.current = performance.now(); isScrolling.current = true; pageIndexRef.current = Math.round(dest / height); setPageIndex(pageIndexRef.current); activeSince.current = performance.now(); }\n\n  const AUTO_ADVANCE_DELAY_MS = 220;\n  function handleAnswer(qid, value) {\n    setAnswers(prev => ({ ...prev, [qid]: value }));\n    const questionDef = QUESTIONS.find(x => x.id === qid) || {};\n    let gained = 0;\n    if (questionDef.type === 'mcq' && questionDef.points) gained = questionDef.points[value] || 0;\n    else if (questionDef.type === 'rating') gained = value * (questionDef.pointsPerStar || 1);\n    else if (questionDef.type === 'text') gained = questionDef.points || 0;\n    if (gained) { setScore(s => s + gained); pulseScore(); }\n    if (questionDef.type === 'mcq' || questionDef.type === 'rating') {\n      const next = Math.min(activeIndexRef.current + 1, visible.length - 1);\n      setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS);\n    }\n  }\n\n  function pulseScore() {\n    const el = document.getElementById('score-badge'); if (!el) return;\n    el.animate([{ transform: 'translateY(0) scale(1)' }, { transform: 'translateY(-6px) scale(1.06)' }, { transform: 'translateY(0) scale(1)' }], { duration: 520, easing: 'ease-out' });\n  }\n\n  function onMiniGameComplete(success) { if (success) { setScore(s => s + 30); pulseScore(); } setAnswers(prev => ({ ...prev, q4: success ? 'success' : 'fail' })); setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), 300); }\n\n  function finish() { setShowFinish(true); if (canvasRef.current) confettiBurst(canvasRef.current); }\n\n  function resetAll() { if (!window.confirm('Reset survey? This clears local progress.')) return; setAnswers({}); setScore(0); setShowFinish(false); targetY.current = 0; currentY.current = 0; pageIndexRef.current = 0; setPageIndex(0); if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)'; }\n\n  function ChapterContent({ item, idx }) {\n    if (item.type === 'stage') {\n      const isFirst = idx === 0;\n      const isLast = idx === Math.max(0, visible.length - 1);\n      return (\n        <div style={{ textAlign: 'center', maxWidth: 720, margin: '0 auto' }}>\n          <motion.h1 initial={{ y: 40, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ duration: 0.8 }} style={{ fontSize: '2.5rem', fontWeight: 800, background: `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})`, WebkitBackgroundClip: 'text', color: 'transparent', textShadow: '0 6px 30px rgba(124,58,237,0.06)' }}>{item.title}</motion.h1>\n          {item.subtitle && <motion.p initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 0.95 }} transition={{ delay: 0.12 }} style={{ color: THEME.muted, marginTop: 8 }}>{item.subtitle}</motion.p>}\n          <div style={{ marginTop: 18, padding: 18, borderRadius: 12, background: THEME.panel, border: '1px solid rgba(255,255,255,0.03)', backdropFilter: 'blur(6px)' }}>\n            <div style={{ display: 'flex', gap: 12, alignItems: 'center', justifyContent: 'center' }}>\n              <svg width=\"44\" height=\"44\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\" stroke={THEME.purple} strokeWidth=\"0.9\" /></svg>\n              <div>\n                <div style={{ color: THEME.text, fontWeight: 700 }}>Experience</div>\n                <div style={{ color: THEME.muted, fontSize: 13 }}>A cinematic flow — read the prompt, pick quickly, and earn points.</div>\n              </div>\n            </div>\n            <div style={{ marginTop: 16, display: 'flex', gap: 12, justifyContent: 'center' }}>\n              {isLast ? (\n                <>\n                  <button onClick={() => resetAll()} className=\"btn btn-primary\">Restart</button>\n                  <button onClick={() => setShowFinish(true)} className=\"btn btn-ghost\">Finish</button>\n                </>\n              ) : (\n                <>\n                  <button onClick={() => scrollToIndex(Math.min(idx + 1, visible.length - 1))} className=\"btn btn-primary\">Enter</button>\n                  {!isFirst && <button onClick={() => finish()} className=\"btn btn-ghost\">Skip</button>}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (item.type === 'mcq') {\n      return (\n        <div style={{ maxWidth: 980, margin: '0 auto' }}>\n          <div style={{ color: THEME.muted, marginBottom: 12 }}>{item.flavor}</div>\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))', gap: 14 }}>\n            {item.choices.map(c => (\n              <motion.button key={c} whileHover={{ scale: 1.03 }} onClick={() => handleAnswer(item.id, c)} style={{ padding: 18, borderRadius: 20, border: answers[item.id] === c ? 'none' : '1px solid rgba(255,255,255,0.03)', background: answers[item.id] === c ? `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})` : 'rgba(255,255,255,0.02)', color: answers[item.id] === c ? 'black' : THEME.text, boxShadow: answers[item.id] === c ? '0 12px 40px rgba(124,58,237,0.12)' : 'none' }}>\n                <div style={{ fontWeight: 700, fontSize: 18 }}>{c}</div>\n                <div style={{ color: THEME.muted, marginTop: 6 }}>{item.points && item.points[c] ? `${item.points[c]} pts` : ''}</div>\n              </motion.button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    if (item.type === 'rating') {\n      return (\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ color: THEME.muted, marginBottom: 12 }}>{item.flavor}</div>\n          <div style={{ display: 'flex', gap: 12, justifyContent: 'center' }}>{Array.from({ length: item.scale }).map((_, i) => (\n            <motion.button key={i} onClick={() => handleAnswer(item.id, i+1)} whileTap={{ scale: 0.95 }} style={{ width: 64, height: 64, borderRadius: 999, display: 'flex', alignItems: 'center', justifyContent: 'center', background: answers[item.id] === i+1 ? `linear-gradient(90deg, ${THEME.purple}, ${THEME.cyan})` : 'rgba(255,255,255,0.02)', color: answers[item.id] === i+1 ? 'black' : THEME.text, border: '1px solid rgba(255,255,255,0.03)' }}>{i+1}</motion.button>\n          ))}</div>\n        </div>\n      );\n    }\n\n    if (item.type === 'text') {\n      return (\n        <div style={{ maxWidth: 980, margin: '0 auto' }}>\n          <div style={{ color: THEME.muted, marginBottom: 12 }}>{item.flavor}</div>\n          <textarea maxLength={item.maxLength} rows={5} value={answers[item.id] || ''} onChange={(e) => setAnswers(prev => ({ ...prev, [item.id]: e.target.value }))} className=\"pitch-textarea\" placeholder=\"One-line pitch...\" style={{ width: '100%', padding: 16, borderRadius: 12, background: THEME.panel, border: '1px solid rgba(255,255,255,0.03)', color: THEME.text, resize: 'vertical' }} />\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: 10 }}>\n            <div style={{ color: THEME.muted }}>{(answers[item.id] || '').length}/{item.maxLength}</div>\n            <div style={{ display: 'flex', gap: 10 }}>\n              <button onClick={() => { if (item.points && (answers[item.id] || '').length > 0) { setScore(s => s + item.points); pulseScore(); } scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)); }} className=\"btn btn-primary\">Submit</button>\n              <button onClick={() => setAnswers(prev => ({ ...prev, [item.id]: '' }))} className=\"btn btn-ghost\">Clear</button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (item.type === 'minigame') return <MiniGame timeLimit={item.timeLimit} onComplete={onMiniGameComplete} flavor={item.flavor} />;\n\n    return null;\n  }\n\n  useEffect(() => { if (pageIndexRef.current !== activeIndexRef.current) { /* sync */ } }, []);\n\n  return (\n    <div style={{ minHeight: '100vh', position: 'relative', overflow: 'hidden', background: THEME.bg, color: THEME.text }}>\n      <style>{`\n        :root {\n          --purple: ${THEME.purple};\n          --cyan: ${THEME.cyan};\n          --blue: ${THEME.blue};\n          --text: ${THEME.text};\n          --muted: ${THEME.muted};\n        }\n        .btn { padding: 10px 14px; border-radius: 10px; font-weight:700; cursor:pointer; border: 1px solid rgba(255,255,255,0.03); }\n        .btn-primary { background: linear-gradient(90deg, var(--purple), var(--cyan)); color: black; box-shadow: 0 8px 32px rgba(124,58,237,0.08); }\n        .btn-ghost { background: rgba(255,255,255,0.02); color: var(--text); border: 1px solid rgba(255,255,255,0.03); }\n        .pitch-textarea:focus { outline: 2px solid rgba(124,58,237,0.18); }\n      `}</style>\n\n      <CustomCursor />\n\n      {/* subtle gradient overlay */}\n      <div style={{ position: 'fixed', inset: 0, pointerEvents: 'none', background: `linear-gradient(180deg, rgba(3,3,10,0.18), rgba(2,4,10,0.72))`, zIndex: -10 }} />\n\n      <canvas ref={bgCanvasRef} className=\"fixed inset-0 z-0 pointer-events-none\" />\n      <canvas ref={canvasRef} className=\"fixed inset-0 z-50 pointer-events-none\" />\n\n      <div style={{ position: 'fixed', right: 18, top: 18, zIndex: 100, display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: 8 }}>\n        <div id=\"score-badge\" style={{ padding: '10px 14px', borderRadius: 999, background: `linear-gradient(90deg, ${THEME.purple}, ${THEME.magenta})`, color: '#000', fontWeight: 800 }}>{score} pts</div>\n        <div style={{ color: THEME.muted, fontSize: 12 }}>Level {Math.floor(score / 50) + 1}</div>\n      </div>\n\n      <nav style={{ position: 'fixed', left: 18, top: '50%', transform: 'translateY(-50%)', zIndex: 100, display: 'flex', flexDirection: 'column', gap: 10 }}>\n        {visible.map((_, i) => (\n          <button key={i} onClick={() => scrollToIndex(i)} aria-label={`Go to chapter ${i+1}`} style={{ width: 12, height: 12, borderRadius: 999, background: i === activeIndex ? `linear-gradient(90deg, ${THEME.purple}, ${THEME.magenta})` : 'rgba(255,255,255,0.03)', border: '1px solid rgba(255,255,255,0.02)' }} />\n        ))}\n      </nav>\n\n      <div ref={containerRef} className=\"fixed inset-0 top-0 left-0 w-full will-change-transform z-40\">\n        <div style={{ height: `${visible.length * height}px` }}>\n          {visible.map((item, i) => (\n            <section key={item.id} ref={addChapterRef} style={{ height: `${height}px` }} className=\"flex items-center justify-center px-6 md:px-12\">\n              <div style={{ width: '100%', maxWidth: 1120, margin: '0 auto', display: 'grid', gridTemplateColumns: '1fr 2fr', gap: 20, alignItems: 'center' }}>\n                <aside style={{ display: window.innerWidth >= 1024 ? 'flex' : 'none', flexDirection: 'column', gap: 12, alignItems: 'flex-start' }}>\n                  <div style={{ color: THEME.muted, fontSize: 13 }}>Chapter</div>\n                  <motion.div animate={{ rotate: activeIndex === i ? 6 : 0 }} transition={{ type: 'spring' }} style={{ fontSize: 36, fontWeight: 900, color: THEME.text }}>{String(i+1).padStart(2, '0')}</motion.div>\n                  <div style={{ width: 6, height: '100%', background: `linear-gradient(180deg, ${THEME.purple}, ${THEME.magenta})`, opacity: 0.28, borderRadius: 4 }} />\n                </aside>\n                <div style={{ borderRadius: 14, padding: 28, textAlign: 'center', background: 'rgba(0,0,0,0.46)', border: '1px solid rgba(255,255,255,0.03)', backdropFilter: 'blur(8px)' }}>\n                  <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.6 }}>\n                    <ChapterContent item={item} idx={i} />\n                  </motion.div>\n                </div>\n              </div>\n            </section>\n          ))}\n        </div>\n      </div>\n\n      <AnimatePresence>{showFinish && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} style={{ position: 'fixed', inset: 0, zIndex: 90, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n          <div style={{ width: 'min(720px,92%)', padding: 28, borderRadius: 18, background: 'rgba(0,0,0,0.6)', border: '1px solid rgba(255,255,255,0.04)', backdropFilter: 'blur(8px)' }}>\n            <h2 style={{ color: THEME.text, fontSize: 28, fontWeight: 800 }}>All done 🎉</h2>\n            <p style={{ color: THEME.muted, marginTop: 10 }}>You earned <strong style={{ color: THEME.text }}>{score}</strong> points. Thanks for playing!</p>\n            <div style={{ marginTop: 18, display: 'flex', justifyContent: 'center' }}>\n              <button onClick={() => resetAll()} className=\"btn btn-primary\">Reset</button>\n            </div>\n          </div>\n        </motion.div>\n      )}</AnimatePresence>\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}