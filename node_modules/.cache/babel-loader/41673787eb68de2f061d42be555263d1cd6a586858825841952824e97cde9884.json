{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\App\\\\gamified-survey\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n/**\n * GamifiedSurveyForm — improved bricks contrast + animated title reveal particles.\n * - Put video at public/opening.mp4 or change OPENING_VIDEO_SRC.\n * - This file includes:\n *    - bricks color variation and darkening under active panel\n *    - particle burst at chapter title on active change\n *    - robust video readiness & retry\n */\n\n// CONFIG\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OPENING_VIDEO_SRC = \"/opening.mp4\";\nconst REMOTE_FALLBACK = \"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4\";\n\n// Theme\nconst THEME = {\n  indigo: \"#8b5cf6\",\n  cyan: \"#06b6d4\",\n  accent: \"#ec4899\",\n  background: \"#050612\",\n  panel: \"rgba(6,8,22,0.7)\",\n  mutedText: \"#9aa6b2\",\n  text: \"#e6eef8\"\n};\nconst QUESTIONS = [{\n  id: \"intro\",\n  type: \"stage\",\n  title: \"Nightfall at HackPlay\",\n  subtitle: \"Step into a neon-lit hall. Your choices tune the journey.\"\n}, {\n  id: \"q1\",\n  type: \"mcq\",\n  title: \"Entrance — choose your mindset\",\n  choices: [\"Build something cool\", \"Learn fast\", \"Meet people\", \"Chase the prizes\"],\n  points: {\n    \"Build something cool\": 20,\n    \"Learn fast\": 10,\n    \"Meet people\": 15,\n    \"Chase the prizes\": 5\n  },\n  flavor: \"The doors close. A low bass. Pick the vibe that follows you.\"\n}, {\n  id: \"q2\",\n  type: \"rating\",\n  title: \"Charge Meter — how hyped are you?\",\n  scale: 5,\n  pointsPerStar: 6,\n  flavor: \"The stage lights react to your energy.\"\n}, {\n  id: \"q3\",\n  type: \"text\",\n  title: \"One-line pitch — what's the idea?\",\n  maxLength: 140,\n  points: 15,\n  flavor: \"A single line — the fragment your team will build around.\"\n}, {\n  id: \"q4\",\n  type: \"minigame\",\n  title: \"Charge the core — tap to power your idea\",\n  timeLimit: 6000,\n  pointsOnSuccess: 30,\n  flavor: \"Fast reflexes prove prototype-ready energy.\"\n}, {\n  id: \"q5\",\n  type: \"mcq\",\n  title: \"Team vibe — pick your tribe\",\n  choices: [\"Chill coders\", \"All-nighters\", \"Balanced squad\", \"Solo hero\"],\n  points: {\n    \"Chill coders\": 10,\n    \"All-nighters\": 20,\n    \"Balanced squad\": 15,\n    \"Solo hero\": 5\n  },\n  flavor: \"Who will you ride the night with?\",\n  dependsOn: {\n    q1: \"Build something cool\"\n  }\n}, {\n  id: \"end\",\n  type: \"stage\",\n  title: \"Curtain Call\",\n  subtitle: \"Collect badges, revisit your pitch, and step back into the light.\"\n}];\nfunction lerp(a, b, n) {\n  return (1 - n) * a + n * b;\n}\nfunction hexToRgb(hex) {\n  const h = hex.replace(\"#\", \"\");\n  return [parseInt(h.substring(0, 2), 16), parseInt(h.substring(2, 4), 16), parseInt(h.substring(4, 6), 16)];\n}\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext(\"2d\");\n  const W = canvas.width = window.innerWidth;\n  const H = canvas.height = window.innerHeight;\n  const pieces = [];\n  for (let i = 0; i < 80; i++) pieces.push({\n    x: W / 2,\n    y: H / 3,\n    vx: (Math.random() - 0.5) * 12,\n    vy: (Math.random() - 1.5) * 10,\n    r: Math.random() * 6 + 3,\n    color: [\"#ff6b6b\", \"#ffd93d\", \"#6bcB77\", \"#6b8aff\", \"#ff85e3\"][Math.floor(Math.random() * 5)],\n    rot: Math.random() * 360,\n    vr: Math.random() * 8 - 4\n  });\n  let t = 0;\n  function frame() {\n    t++;\n    ctx.clearRect(0, 0, W, H);\n    for (let p of pieces) {\n      p.x += p.vx;\n      p.y += p.vy + 0.3;\n      p.vy += 0.06;\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate(p.rot * Math.PI / 180);\n      ctx.fillStyle = p.color;\n      ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 0.6);\n      ctx.restore();\n    }\n    if (t < 180) requestAnimationFrame(frame);else ctx.clearRect(0, 0, W, H);\n  }\n  frame();\n}\n\n// Video background (robust)\nfunction VideoBackground({\n  src,\n  videoRef,\n  onReady,\n  onError,\n  keyOverride\n}) {\n  _s();\n  const internalRef = useRef(null);\n  const ref = videoRef || internalRef;\n  useEffect(() => {\n    const v = ref.current;\n    if (!v) return;\n    v.muted = true;\n    v.playsInline = true;\n    v.preload = \"auto\";\n    const p = v.play && v.play();\n    if (p && p.catch) p.catch(() => {});\n    let fired = false;\n    function markReady() {\n      if (fired) return;\n      fired = true;\n      onReady && onReady();\n    }\n    function markError(e) {\n      if (fired) return;\n      fired = true;\n      onError && onError(e);\n    }\n    function onCanPlay() {\n      markReady();\n    }\n    function onErr(e) {\n      console.warn(\"video error\", e);\n      markError(e);\n    }\n    v.addEventListener(\"canplaythrough\", onCanPlay);\n    v.addEventListener(\"canplay\", onCanPlay);\n    v.addEventListener(\"loadeddata\", onCanPlay);\n    v.addEventListener(\"loadedmetadata\", onCanPlay);\n    v.addEventListener(\"error\", onErr);\n    v.addEventListener(\"click\", () => markReady());\n    const safety = setTimeout(() => {\n      if (!fired) markError(new Error(\"video-timeout\"));\n    }, 4500);\n    return () => {\n      v.removeEventListener(\"canplaythrough\", onCanPlay);\n      v.removeEventListener(\"canplay\", onCanPlay);\n      v.removeEventListener(\"loadeddata\", onCanPlay);\n      v.removeEventListener(\"loadedmetadata\", onCanPlay);\n      v.removeEventListener(\"error\", onErr);\n      clearTimeout(safety);\n    };\n  }, [src, onReady, onError, ref, keyOverride]);\n  return /*#__PURE__*/_jsxDEV(\"video\", {\n    ref: ref,\n    src: src,\n    muted: true,\n    loop: true,\n    playsInline: true,\n    autoPlay: true,\n    preload: \"auto\",\n    style: {\n      position: \"fixed\",\n      inset: 0,\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"cover\",\n      zIndex: -50,\n      pointerEvents: \"auto\",\n      opacity: 1\n    }\n  }, keyOverride, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n\n// Loading overlay\n_s(VideoBackground, \"mOFHOaD1fnrRagX7BRa/3b2m2Gk=\");\n_c = VideoBackground;\nfunction LoadingOverlay({\n  progress\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 flex items-center justify-center\",\n    style: {\n      zIndex: 99999,\n      pointerEvents: \"none\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-2xl px-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 text-center font-medium select-none\",\n        style: {\n          color: \"var(--text)\"\n        },\n        children: \"Booting the neon hall\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-4 rounded-full overflow-hidden shadow-inner\",\n        style: {\n          background: \"rgba(255,255,255,0.02)\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-full rounded-full\",\n          style: {\n            width: `${progress}%`,\n            background: \"linear-gradient(90deg,var(--indigo),var(--cyan))\",\n            transition: \"width 200ms linear\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 text-xs text-center\",\n        style: {\n          color: \"var(--muted)\"\n        },\n        children: [Math.round(progress), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n}\n\n// Custom cursor kept\n_c2 = LoadingOverlay;\nfunction CustomCursor() {\n  _s2();\n  const dotRef = useRef(null);\n  const ringRef = useRef(null);\n  const pos = useRef({\n    x: typeof window !== \"undefined\" ? window.innerWidth / 2 : 0,\n    y: typeof window !== \"undefined\" ? window.innerHeight / 2 : 0\n  });\n  const hover = useRef(false);\n  const rafRef = useRef(null);\n  useEffect(() => {\n    const dot = dotRef.current;\n    const ring = ringRef.current;\n    if (!dot || !ring) return;\n    function onMouseMove(e) {\n      pos.current.x = e.clientX;\n      pos.current.y = e.clientY;\n    }\n    function onHoverChange(e) {\n      const t = e.target;\n      const should = !!t.closest && t.closest('button, a, [role=\"button\"], input, textarea') != null;\n      hover.current = should;\n    }\n    window.addEventListener(\"mousemove\", onMouseMove);\n    window.addEventListener(\"mouseover\", onHoverChange);\n    let cx = pos.current.x;\n    let cy = pos.current.y;\n    let ringScale = 1;\n    function loop() {\n      cx = lerp(cx, pos.current.x, 0.18);\n      cy = lerp(cy, pos.current.y, 0.18);\n      dot.style.transform = `translate3d(${cx - 6}px, ${cy - 6}px, 0)`;\n      const rx = lerp(parseFloat(ring.dataset.x || cx), cx, 0.08);\n      const ry = lerp(parseFloat(ring.dataset.y || cy), cy, 0.08);\n      ring.dataset.x = rx;\n      ring.dataset.y = ry;\n      ringScale = lerp(ringScale, hover.current ? 1.9 : 1, 0.12);\n      ring.style.transform = `translate3d(${rx - 18}px, ${ry - 18}px, 0) scale(${ringScale})`;\n      ring.style.opacity = 0.95;\n      rafRef.current = requestAnimationFrame(loop);\n    }\n    rafRef.current = requestAnimationFrame(loop);\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseover', onHoverChange);\n      cancelAnimationFrame(rafRef.current);\n    };\n  }, []);\n  useEffect(() => {\n    document.documentElement.classList.add(\"custom-cursor-hide\");\n    return () => document.documentElement.classList.remove(\"custom-cursor-hide\");\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ringRef,\n      style: {\n        position: \"fixed\",\n        left: 0,\n        top: 0,\n        width: 36,\n        height: 36,\n        borderRadius: 9999,\n        border: \"1.5px solid rgba(255,255,255,0.06)\",\n        pointerEvents: \"none\",\n        zIndex: 100000,\n        boxShadow: \"0 6px 30px rgba(99,102,241,0.06)\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: dotRef,\n      style: {\n        position: \"fixed\",\n        left: 0,\n        top: 0,\n        width: 12,\n        height: 12,\n        borderRadius: 9999,\n        background: \"radial-gradient(circle at 30% 30%, #fff, #ddd)\",\n        boxShadow: \"0 8px 26px rgba(99,102,241,0.12)\",\n        pointerEvents: \"none\",\n        zIndex: 100001\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `.custom-cursor-hide, .custom-cursor-hide * { cursor: none !important; }`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s2(CustomCursor, \"LoSzrrPz4LpO8t37NOY+jhfx8TI=\");\n_c3 = CustomCursor;\nfunction MiniGame({\n  timeLimit = 6000,\n  onComplete,\n  flavor\n}) {\n  _s3();\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n  function start() {\n    if (runningRef.current) return;\n    runningRef.current = true;\n    manualBoost.current = 0;\n    startedAt.current = performance.now();\n    tick();\n  }\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round(elapsed / timeLimit * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n      if (total >= 100) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(true);\n        return;\n      }\n      if (elapsed >= timeLimit) {\n        runningRef.current = false;\n        cancelAnimationFrame(raf.current);\n        onComplete(total >= 60);\n        return;\n      }\n      tick();\n    });\n  }\n  function handleTap() {\n    if (!runningRef.current) start();else {\n      manualBoost.current = Math.min(100, manualBoost.current + 12);\n      setCharge(c => Math.min(100, c + 12));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full flex flex-col items-center gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm italic\",\n      style: {\n        color: \"var(--muted)\"\n      },\n      children: flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-56 h-56 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        onClick: handleTap,\n        whileTap: {\n          scale: 0.9\n        },\n        whileHover: {\n          scale: 1.04\n        },\n        transition: {\n          type: \"spring\",\n          stiffness: 300\n        },\n        className: \"w-40 h-40 rounded-full shadow-2xl flex items-center justify-center cursor-pointer relative overflow-hidden\",\n        style: {\n          background: \"linear-gradient(135deg,var(--indigo),var(--accent))\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(motion.div, {\n          animate: {\n            rotate: [0, 360]\n          },\n          transition: {\n            repeat: Infinity,\n            duration: 8,\n            ease: \"linear\"\n          },\n          className: \"absolute inset-0 opacity-20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-white font-extrabold text-xl\",\n          children: \"TAP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm mb-2\",\n        style: {\n          color: \"var(--muted)\"\n        },\n        children: [\"Charge: \", charge, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-4 rounded-full overflow-hidden border\",\n        style: {\n          background: \"rgba(255,255,255,0.03)\",\n          borderColor: \"rgba(255,255,255,0.04)\"\n        },\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"h-full rounded-full\",\n          style: {\n            background: \"linear-gradient(90deg,var(--indigo),var(--cyan))\"\n          },\n          animate: {\n            width: `${charge}%`\n          },\n          transition: {\n            type: \"spring\",\n            stiffness: 140,\n            damping: 16\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 5\n  }, this);\n}\n_s3(MiniGame, \"7W1Gbp5uQvXAuYfcKgP+cnkG9w8=\");\n_c4 = MiniGame;\nexport default function GamifiedSurveyForm() {\n  _s4();\n  // States\n  const [answers, setAnswers] = useState(() => {\n    try {\n      const raw = localStorage.getItem(\"gamifiedSurveyAnswers\");\n      return raw ? JSON.parse(raw) : {};\n    } catch {\n      return {};\n    }\n  });\n  const [score, setScore] = useState(() => Number(localStorage.getItem(\"gamifiedSurveyScore\")) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n  const [openingDone, setOpeningDone] = useState(false);\n  const [showResponses, setShowResponses] = useState(false);\n  const [videoError, setVideoError] = useState(false);\n  const [useFallback, setUseFallback] = useState(false);\n  const [videoKey, setVideoKey] = useState(0);\n\n  // Refs\n  const canvasRef = useRef(null); // confetti\n  const bgCanvasRef = useRef(null); // bricks\n  const particleCanvasRef = useRef(null); // particles for title\n  const videoRef = useRef(null);\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyAnswers\", JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyScore\", String(score)), [score]);\n\n  // visible chapters\n  const visible = QUESTIONS.filter(q => {\n    if (!q.dependsOn) return true;\n    const keys = Object.keys(q.dependsOn);\n    return keys.every(k => answers[k] === q.dependsOn[k]);\n  });\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = el => {\n    if (el) chapterRefs.current.push(el);\n  };\n\n  // layout\n  const [height, setHeight] = useState(typeof window !== \"undefined\" ? window.innerHeight : 800);\n  useEffect(() => {\n    function onResize() {\n      setHeight(window.innerHeight);\n    }\n    window.addEventListener(\"resize\", onResize);\n    return () => window.removeEventListener(\"resize\", onResize);\n  }, []);\n\n  // lock scroll for cinematic experience\n  useEffect(() => {\n    const prev = {\n      overflow: document.documentElement.style.overflow,\n      touchAction: document.body.style.touchAction\n    };\n    document.documentElement.style.overflow = \"hidden\";\n    document.body.style.touchAction = \"none\";\n    return () => {\n      document.documentElement.style.overflow = prev.overflow;\n      document.body.style.touchAction = prev.touchAction;\n    };\n  }, []);\n\n  // scrolling\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n  const isScrolling = useRef(false);\n  const SNAP_DELAY = 70;\n  const LERP_FAST = 0.42;\n  const LERP_SNAP = 0.62;\n  const cursor = useRef({\n    x: typeof window !== \"undefined\" ? window.innerWidth / 2 : 0,\n    y: typeof window !== \"undefined\" ? window.innerHeight / 2 : 0,\n    active: false\n  });\n  const lastCursorUpdate = useRef(0);\n  const bgRAF = useRef(null);\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  // particles state used for title reveal\n  const particles = useRef([]);\n\n  // loading\n  const [loadProgress, setLoadProgress] = useState(0);\n  useEffect(() => {\n    let raf = null;\n    let start = performance.now();\n    let simulated = 0;\n    function tick() {\n      const now = performance.now();\n      simulated = Math.min(92, simulated + (100 - simulated) * 0.06 + 0.8);\n      setLoadProgress(prev => Math.min(92, Math.max(prev, simulated)));\n      raf = requestAnimationFrame(tick);\n    }\n    raf = requestAnimationFrame(tick);\n    return () => cancelAnimationFrame(raf);\n  }, []);\n\n  // Video callbacks\n  function handleVideoReady() {\n    setLoadProgress(100);\n    setTimeout(() => {\n      setOpeningDone(true);\n      setVideoError(false);\n    }, 280);\n  }\n  function handleVideoError(err) {\n    console.warn(\"Video failed to play:\", err);\n    setVideoError(true);\n    setTimeout(() => setLoadProgress(100), 300);\n    setTimeout(() => setOpeningDone(true), 640);\n  }\n\n  // Input handlers (wheel/touch/pointer)\n  useEffect(() => {\n    const isTouching = {\n      v: false\n    };\n    const touchStartY = {\n      v: 0\n    };\n    function clampTarget() {\n      const max = Math.max(0, (visible.length - 1) * height);\n      if (targetY.current < 0) targetY.current = 0;\n      if (targetY.current > max) targetY.current = max;\n    }\n    function onWheel(e) {\n      e.preventDefault();\n      targetY.current += e.deltaY * 1.2;\n      clampTarget();\n      lastWheelAt.current = performance.now();\n      isScrolling.current = true;\n    }\n    function onTouchStart(e) {\n      touchStartY.v = e.touches[0].clientY;\n      isTouching.v = true;\n    }\n    function onTouchMove(e) {\n      if (!isTouching.v) return;\n      const y = e.touches[0].clientY;\n      const delta = touchStartY.v - y;\n      targetY.current += delta;\n      touchStartY.v = y;\n      clampTarget();\n      lastWheelAt.current = performance.now();\n      isScrolling.current = true;\n    }\n    function onTouchEnd() {\n      isTouching.v = false;\n    }\n    function onKey(e) {\n      if (e.key === \"ArrowDown\") {\n        targetY.current += height * 0.95;\n        clampTarget();\n        lastWheelAt.current = performance.now();\n        isScrolling.current = true;\n      }\n      if (e.key === \"ArrowUp\") {\n        targetY.current -= height * 0.95;\n        clampTarget();\n        lastWheelAt.current = performance.now();\n        isScrolling.current = true;\n      }\n    }\n    const el = containerRef.current || window;\n    el.addEventListener(\"wheel\", onWheel, {\n      passive: false\n    });\n    window.addEventListener(\"touchstart\", onTouchStart, {\n      passive: false\n    });\n    window.addEventListener(\"touchmove\", onTouchMove, {\n      passive: false\n    });\n    window.addEventListener(\"touchend\", onTouchEnd);\n    window.addEventListener(\"keydown\", onKey);\n    function onPointer(e) {\n      const now = performance.now();\n      if (now - lastCursorUpdate.current > 12) {\n        cursor.current.x = e.clientX;\n        cursor.current.y = e.clientY;\n        cursor.current.active = true;\n        lastCursorUpdate.current = now;\n      }\n    }\n    function onPointerLeave() {\n      cursor.current.active = false;\n    }\n    function onPointerDown(e) {\n      const px = e.clientX;\n      const py = e.clientY;\n      cursor.current.x = px;\n      cursor.current.y = py;\n      if (bgCanvasRef.current && bgCanvasRef.current._triggerPop) bgCanvasRef.current._triggerPop(px, py);\n    }\n    window.addEventListener(\"pointermove\", onPointer);\n    window.addEventListener(\"pointerout\", onPointerLeave);\n    window.addEventListener(\"pointerdown\", onPointerDown);\n    return () => {\n      el.removeEventListener(\"wheel\", onWheel);\n      window.removeEventListener(\"touchstart\", onTouchStart);\n      window.removeEventListener(\"touchmove\", onTouchMove);\n      window.removeEventListener(\"touchend\", onTouchEnd);\n      window.removeEventListener(\"keydown\", onKey);\n      window.removeEventListener(\"pointermove\", onPointer);\n      window.removeEventListener(\"pointerout\", onPointerLeave);\n      window.removeEventListener(\"pointerdown\", onPointerDown);\n    };\n  }, [height, visible.length]);\n\n  // --- BRICKS CANVAS: now with variation + darkening behind active panel ---\n  useEffect(() => {\n    const canvas = bgCanvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    let W = canvas.width = window.innerWidth;\n    let H = canvas.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.5);\n    canvas.width = W * DPR;\n    canvas.height = H * DPR;\n    canvas.style.width = W + \"px\";\n    canvas.style.height = H + \"px\";\n    ctx.scale(DPR, DPR);\n\n    // brick sizing\n    let BRICK_W = window.innerWidth < 640 ? 120 : 96;\n    let BRICK_H = window.innerWidth < 640 ? 56 : 44;\n    let cols = Math.ceil(W / BRICK_W);\n    let rows = Math.ceil(H / BRICK_H);\n    const MAX_BRICKS = 900;\n    if (cols * rows > MAX_BRICKS) {\n      const scaleUp = Math.sqrt(cols * rows / MAX_BRICKS);\n      BRICK_W = Math.ceil(BRICK_W * scaleUp);\n      BRICK_H = Math.ceil(BRICK_H * scaleUp);\n      cols = Math.ceil(W / BRICK_W);\n      rows = Math.ceil(H / BRICK_H);\n    }\n    const bricks = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        const x = c * BRICK_W + (r % 2 ? BRICK_W / 2 : 0);\n        const y = r * BRICK_H;\n        const cx = x + BRICK_W / 2;\n        const cy = y + BRICK_H / 2;\n        // add slightly different base hue per row/col to break monotony\n        bricks.push({\n          x,\n          y,\n          w: BRICK_W,\n          h: BRICK_H,\n          baseX: x,\n          baseY: y,\n          cx,\n          cy,\n          pop: 0,\n          vy: 0,\n          phase: Math.random() * Math.PI * 2,\n          falling: false,\n          fallY: 0,\n          fallVy: 0,\n          opacity: 1,\n          gone: false,\n          r,\n          c\n        });\n      }\n    }\n    canvas._triggerPop = function (px, py) {\n      let nearest = null;\n      let best = Infinity;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px;\n        const dy = b.cy - py;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        if (d < best) {\n          best = d;\n          nearest = b;\n        }\n      }\n      if (nearest && !nearest.falling && best < Math.max(120, Math.min(window.innerWidth, window.innerHeight) * 0.06)) {\n        nearest.falling = true;\n        nearest.fallVy = Math.random() * 4 + 2;\n        nearest.fallY = 0;\n      }\n      const R = 120;\n      for (let b of bricks) {\n        if (b.falling || b.gone) continue;\n        const dx = b.cx - px;\n        const dy = b.cy - py;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        if (d < R) {\n          const norm = 1 - d / R;\n          b.pop = Math.max(b.pop, 0.3 * norm);\n          b.vy += 4 * norm + Math.random() * 2;\n        }\n      }\n    };\n\n    // theme palettes\n    const palA = hexToRgb(THEME.indigo);\n    const palB = hexToRgb(THEME.cyan);\n    const palC = hexToRgb(THEME.accent);\n    let lastT = performance.now();\n    function draw(now) {\n      let dt = Math.min(40, now - lastT) * 0.001;\n      if (dt <= 0) {\n        bgRAF.current = requestAnimationFrame(draw);\n        return;\n      }\n      lastT = now;\n      ctx.clearRect(0, 0, W, H);\n\n      // translucent wash always, but reduce darkness when openingDone so video reads better\n      ctx.fillStyle = openingDone ? \"rgba(2,4,10,0.42)\" : \"rgba(2,4,10,0.08)\";\n      ctx.fillRect(0, 0, W, H);\n      const maxD = Math.max(W, H) * 0.65;\n      const time = now * 0.001;\n      const skipShadows = bricks.length > 700;\n\n      // compute panel center on canvas coordinates so we can darken bricks under it\n      const panelCenterX = W / 2;\n      const activeIdx = activeIndexRef.current || 0;\n      const panelCenterY = activeIdx * height - currentY.current + height / 2; // where the active chapter center sits on screen/canvas\n\n      // approximate panel dims (matches max-w-6xl from layout)\n      const panelW = Math.min(1120, W * 0.86);\n      const panelH = Math.min(760, height * 0.78);\n      for (let b of bricks) {\n        if (b.gone) continue;\n        if (b.falling) {\n          b.fallVy += 900 * dt;\n          b.fallY += b.fallVy * dt;\n          b.opacity = Math.max(0, 1 - b.fallY / (H * 1.4));\n          if (b.fallY > H + 100) {\n            b.gone = true;\n            continue;\n          }\n        }\n        const dx = b.cx - cursor.current.x;\n        const dy = b.cy - cursor.current.y;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        let t = Math.max(0, 1 - d / maxD);\n        t = Math.pow(t, 0.9);\n        const lift = b.falling ? 0 : Math.min(14, 10 * t + b.pop * 18);\n        const wobble = b.falling ? 0 : Math.sin(b.phase + time * 1.2) * 3 * t;\n        if (!b.falling) {\n          b.vy -= 30 * dt;\n          b.vy *= 0.92 - Math.min(0.18, t * 0.12);\n          b.pop = Math.max(0, b.pop - 0.012);\n        }\n        const yOffset = b.falling ? b.fallY : -lift + b.vy * dt * 60;\n\n        // per-row/col variation factor to break uniformity\n        const posFactor = b.r % 7 / 7 * 0.22 + b.c % 5 / 5 * 0.12;\n        const anim = 0.45 + 0.55 * Math.sin(b.phase * 1.2 + time * (0.45 + posFactor));\n        const mixFactor = Math.min(1, Math.max(0, t * 0.9 + anim * 0.25 + posFactor * 0.12));\n        function mix(a, bVal, n) {\n          return Math.round((1 - n) * a + n * bVal);\n        }\n        const rAB = mix(palA[0], palB[0], mixFactor);\n        const gAB = mix(palA[1], palB[1], mixFactor);\n        const bAB = mix(palA[2], palB[2], mixFactor);\n        const accent = 0.12 * (0.5 + 0.5 * Math.sin(time * 1.8 + b.phase + posFactor));\n        let baseR = Math.min(255, Math.round(rAB * (1 - accent) + palC[0] * accent));\n        let baseG = Math.min(255, Math.round(gAB * (1 - accent) + palC[1] * accent));\n        let baseB = Math.min(255, Math.round(bAB * (1 - accent) + palC[2] * accent));\n\n        // decrease brightness slightly for bricks farther from top (adds depth)\n        const depthMul = 0.9 + 0.22 * (1 - b.cy / H);\n        baseR = Math.round(baseR * depthMul);\n        baseG = Math.round(baseG * depthMul);\n        baseB = Math.round(baseB * depthMul);\n\n        // compute darkening if the brick is under the active panel center area\n        const dxPanel = Math.abs(b.cx - panelCenterX);\n        const dyPanel = Math.abs(b.cy - panelCenterY);\n        let panelDarkness = 0;\n        if (dxPanel < panelW / 2 && dyPanel < panelH / 2) {\n          // stronger near center, eased\n          const nx = 1 - dxPanel / (panelW / 2);\n          const ny = 1 - dyPanel / (panelH / 2);\n          panelDarkness = Math.pow(Math.max(0, Math.min(1, nx * ny)), 1.4) * 0.68; // up to 0.68 darkening\n        }\n\n        // apply panel darkening to base color and alpha for readability\n        const finalR = Math.max(8, Math.round(baseR * (1 - panelDarkness)));\n        const finalG = Math.max(8, Math.round(baseG * (1 - panelDarkness)));\n        const finalB = Math.max(8, Math.round(baseB * (1 - panelDarkness)));\n        const finalAlpha = Math.max(0.55, b.opacity - panelDarkness * 0.22); // slightly reduce alpha when panel over it\n\n        ctx.save();\n        ctx.globalAlpha = finalAlpha;\n        ctx.fillStyle = `rgb(${finalR}, ${finalG}, ${finalB})`;\n        if (lift > 2 && !b.falling && !skipShadows) {\n          ctx.shadowBlur = Math.min(28, lift * 1.6);\n          ctx.shadowColor = `rgba(40,60,160,${Math.min(0.22, 0.06 * t + 0.06 * b.pop)})`;\n        } else ctx.shadowBlur = 0;\n        const px = b.baseX + wobble * 0.6;\n        const py = b.baseY + yOffset;\n        roundRect(ctx, px + 6, py + 6, b.w - 12, b.h - 12, 6);\n        ctx.fill();\n\n        // subtle highlight stripe for depth (only when not heavily darkened)\n        if ((t > 0.08 || b.pop > 0.02) && !b.falling && panelDarkness < 0.5) {\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = `rgba(255,255,255,${0.03 * t + 0.04 * b.pop})`;\n          ctx.fillRect(px + 12, py + 10, b.w - 24, Math.max(3, Math.min(8, 4 * t + 6 * b.pop)));\n        }\n        ctx.restore();\n      }\n      bgRAF.current = requestAnimationFrame(draw);\n    }\n    function roundRect(ctx, x, y, w, h, r) {\n      const minr = Math.min(r, w / 2, h / 2);\n      ctx.beginPath();\n      ctx.moveTo(x + minr, y);\n      ctx.arcTo(x + w, y, x + w, y + h, minr);\n      ctx.arcTo(x + w, y + h, x, y + h, minr);\n      ctx.arcTo(x, y + h, x, y, minr);\n      ctx.arcTo(x, y, x + w, y, minr);\n      ctx.closePath();\n    }\n    function onResize() {\n      W = canvas.width = window.innerWidth;\n      H = canvas.height = window.innerHeight;\n      canvas.width = W * DPR;\n      canvas.height = H * DPR;\n      canvas.style.width = W + 'px';\n      canvas.style.height = H + 'px';\n      ctx.scale(DPR, DPR);\n    }\n    window.addEventListener(\"resize\", onResize);\n    bgRAF.current = requestAnimationFrame(draw);\n    return () => {\n      window.removeEventListener(\"resize\", onResize);\n      cancelAnimationFrame(bgRAF.current);\n    };\n  }, [openingDone]); // re-run when openingDone toggles\n\n  // --- PARTICLE CANVAS: title reveal particles triggered on activeIndex change ---\n  useEffect(() => {\n    const pc = particleCanvasRef.current;\n    if (!pc) return;\n    const ctx = pc.getContext(\"2d\");\n    let W = pc.width = window.innerWidth;\n    let H = pc.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.5);\n    pc.width = W * DPR;\n    pc.height = H * DPR;\n    pc.style.width = W + \"px\";\n    pc.style.height = H + \"px\";\n    ctx.scale(DPR, DPR);\n    let animId = null;\n    function resize() {\n      W = pc.width = window.innerWidth;\n      H = pc.height = window.innerHeight;\n      pc.width = W * DPR;\n      pc.height = H * DPR;\n      pc.style.width = W + \"px\";\n      pc.style.height = H + \"px\";\n      ctx.scale(DPR, DPR);\n    }\n    function render() {\n      ctx.clearRect(0, 0, W, H);\n      // fade background slightly to create trailing effect\n      ctx.fillStyle = \"rgba(0,0,0,0)\";\n      ctx.fillRect(0, 0, W, H);\n      const now = performance.now();\n      // update particles\n      for (let i = particles.current.length - 1; i >= 0; i--) {\n        const p = particles.current[i];\n        p.vx *= 0.998;\n        p.vy += p.gravity || 0.02;\n        p.x += p.vx;\n        p.y += p.vy;\n        p.life -= 1;\n        ctx.beginPath();\n        ctx.globalAlpha = Math.max(0, p.life / p.maxLife);\n        ctx.fillStyle = p.color;\n        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);\n        ctx.fill();\n        // draw a faint trail\n        ctx.globalAlpha = Math.max(0, p.life / p.maxLife * 0.18);\n        ctx.fillStyle = p.color;\n        ctx.fillRect(p.x - p.vx * 2, p.y - p.vy * 2, 2, 2);\n        if (p.life <= 0) particles.current.splice(i, 1);\n      }\n      ctx.globalAlpha = 1;\n      animId = requestAnimationFrame(render);\n    }\n    animId = requestAnimationFrame(render);\n    window.addEventListener(\"resize\", resize);\n    return () => {\n      cancelAnimationFrame(animId);\n      window.removeEventListener(\"resize\", resize);\n    };\n  }, []);\n\n  // emit particle burst at top-center of active chapter when activeIndex changes\n  useEffect(() => {\n    const centerX = window.innerWidth / 2;\n    const titleY = 120; // approximate heading vertical location where particles should emit\n    const emit = (count = 28) => {\n      for (let i = 0; i < count; i++) {\n        const angle = (Math.random() - 0.5) * Math.PI * 2;\n        const speed = 1 + Math.random() * 6;\n        const r = 1 + Math.random() * 3;\n        const hueChoice = Math.random();\n        const col = hueChoice < 0.45 ? THEME.indigo : hueChoice < 0.85 ? THEME.cyan : THEME.accent;\n        particles.current.push({\n          x: centerX + (Math.random() - 0.5) * 120,\n          y: titleY + (Math.random() - 0.5) * 22,\n          vx: Math.cos(angle) * speed,\n          vy: Math.sin(angle) * speed * -0.6,\n          r,\n          color: col,\n          life: 36 + Math.random() * 28,\n          maxLife: 36 + Math.random() * 28,\n          gravity: 0.03\n        });\n      }\n    };\n    // small delay to coordinate with reveal animation\n    const t = setTimeout(() => emit(36), 120);\n    return () => clearTimeout(t);\n  }, [activeIndex]); // run when chapter index changes\n\n  // UI transform loop & active index update\n  useEffect(() => {\n    function frame(now) {\n      currentY.current = lerp(currentY.current, targetY.current, performance.now() - lastWheelAt.current > SNAP_DELAY ? LERP_SNAP : LERP_FAST);\n      const el = containerRef.current;\n      if (el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n      chapterRefs.current.forEach((node, i) => {\n        if (!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height;\n        const abs = Math.abs(offset);\n        const translateY = offset * 34;\n        const rotate = offset * 3.6;\n        const scale = 1 - Math.min(0.08, abs * 0.08);\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n        node.style.transform = `translate3d(0px, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) {\n        activeIndexRef.current = idx;\n        setActiveIndex(idx);\n      }\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n  function scrollToIndex(i) {\n    const max = Math.max(0, (visible.length - 1) * height);\n    const dest = Math.max(0, Math.min(i * height, max));\n    targetY.current = dest;\n    lastWheelAt.current = performance.now();\n    isScrolling.current = true;\n  }\n  const AUTO_ADVANCE_DELAY_MS = 240;\n  const MINIGAME_ADVANCE_MS = 300;\n  function handleAnswer(qid, value) {\n    setAnswers(prev => ({\n      ...prev,\n      [qid]: value\n    }));\n    const questionDef = QUESTIONS.find(x => x.id === qid) || {};\n    let gained = 0;\n    if (questionDef.type === \"mcq\" && questionDef.points) gained = questionDef.points[value] || 0;else if (questionDef.type === \"rating\") gained = value * (questionDef.pointsPerStar || 1);else if (questionDef.type === \"text\") gained = questionDef.points || 0;\n    if (gained) {\n      setScore(s => s + gained);\n      pulseScore();\n    }\n    if (questionDef.type === \"mcq\" || questionDef.type === \"rating\") {\n      const next = Math.min(activeIndexRef.current + 1, visible.length - 1);\n      setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS);\n    }\n  }\n  function pulseScore() {\n    const el = document.getElementById('score-badge');\n    if (!el) return;\n    el.animate([{\n      transform: 'translateY(0) scale(1)'\n    }, {\n      transform: 'translateY(-6px) scale(1.06)'\n    }, {\n      transform: 'translateY(0) scale(1)'\n    }], {\n      duration: 520,\n      easing: 'ease-out'\n    });\n  }\n  function onMiniGameComplete(success) {\n    if (success) {\n      setScore(s => s + 30);\n      pulseScore();\n    }\n    setAnswers(prev => ({\n      ...prev,\n      q4: success ? 'success' : 'fail'\n    }));\n    setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), MINIGAME_ADVANCE_MS);\n  }\n  function finish() {\n    setShowFinish(true);\n    if (canvasRef.current) confettiBurst(canvasRef.current);\n  }\n  function resetAll() {\n    if (!window.confirm('Reset survey? This clears local progress.')) return;\n    setAnswers({});\n    setScore(0);\n    setShowFinish(false);\n    targetY.current = 0;\n    currentY.current = 0;\n    if (containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)';\n  }\n  function ChapterContent({\n    item,\n    idx\n  }) {\n    if (item.type === 'stage') {\n      const isFirst = idx === 0;\n      const isLast = idx === Math.max(0, visible.length - 1);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center max-w-3xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(motion.h1, {\n          initial: {\n            y: 40,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            duration: 0.8\n          },\n          className: \"text-5xl md:text-7xl font-extrabold tracking-tight\",\n          style: {\n            background: 'linear-gradient(90deg,var(--indigo),var(--cyan))',\n            WebkitBackgroundClip: 'text',\n            color: 'transparent',\n            textShadow: '0 8px 36px rgba(99,102,241,0.06)'\n          },\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 11\n        }, this), item.subtitle && /*#__PURE__*/_jsxDEV(motion.p, {\n          initial: {\n            y: 20,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 0.95\n          },\n          transition: {\n            delay: 0.15\n          },\n          className: \"mt-4 text-lg\",\n          style: {\n            color: 'var(--muted)'\n          },\n          children: item.subtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 mx-auto w-full max-w-md\",\n          style: {\n            background: THEME.panel,\n            borderRadius: 16,\n            padding: 20,\n            border: '1px solid rgba(255,255,255,0.03)',\n            backdropFilter: 'blur(8px)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"40\",\n              height: \"40\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              className: \"opacity-95\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\",\n                stroke: THEME.indigo,\n                strokeWidth: \"0.9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 98\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold text-lg\",\n                style: {\n                  color: 'var(--text)'\n                },\n                children: \"Experience\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm\",\n                style: {\n                  color: 'var(--muted)'\n                },\n                children: \"A cinematic flow \\u2014 read the prompt, pick quickly, and earn points.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 flex gap-3 justify-center\",\n            children: isLast ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => resetAll(),\n                className: \"btn btn-primary\",\n                children: \"Restart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowResponses(true),\n                className: \"btn btn-ghost\",\n                children: \"View responses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 684,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => scrollToIndex(Math.min(idx + 1, visible.length - 1)),\n                className: \"btn btn-primary\",\n                children: \"Enter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 688,\n                columnNumber: 19\n              }, this), !isFirst && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => finish(),\n                className: \"btn btn-ghost\",\n                children: \"Skip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'mcq') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl w-full mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-400 italic mb-4\",\n          style: {\n            color: 'var(--muted)'\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: item.choices.map(c => /*#__PURE__*/_jsxDEV(motion.button, {\n            whileHover: {\n              scale: 1.04\n            },\n            onClick: () => handleAnswer(item.id, c),\n            className: \"py-7 px-6 rounded-3xl border transform-gpu\",\n            style: {\n              borderColor: answers[item.id] === c ? 'transparent' : 'rgba(255,255,255,0.03)',\n              background: answers[item.id] === c ? 'linear-gradient(90deg,var(--indigo),var(--cyan))' : 'rgba(255,255,255,0.02)',\n              color: answers[item.id] === c ? 'black' : 'var(--text)',\n              boxShadow: answers[item.id] === c ? '0 12px 40px rgba(99,102,241,0.14)' : 'none'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold text-xl\",\n              children: c\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-muted mt-1\",\n              style: {\n                color: 'var(--muted)'\n              },\n              children: item.points && item.points[c] ? `${item.points[c]} pts` : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 17\n            }, this)]\n          }, c, true, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'rating') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-400 italic mb-4\",\n          style: {\n            color: 'var(--muted)'\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-4\",\n          children: Array.from({\n            length: item.scale\n          }).map((_, i) => /*#__PURE__*/_jsxDEV(motion.button, {\n            onClick: () => handleAnswer(item.id, i + 1),\n            whileTap: {\n              scale: 0.95\n            },\n            className: \"w-16 h-16 rounded-full flex items-center justify-center\",\n            style: {\n              background: answers[item.id] === i + 1 ? 'linear-gradient(90deg,var(--indigo),var(--cyan))' : 'rgba(255,255,255,0.02)',\n              color: answers[item.id] === i + 1 ? 'black' : 'var(--text)',\n              border: '1px solid rgba(255,255,255,0.03)'\n            },\n            children: i + 1\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'text') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-3xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-400 italic mb-4\",\n          style: {\n            color: 'var(--muted)'\n          },\n          children: item.flavor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          maxLength: item.maxLength,\n          rows: 5,\n          value: answers[item.id] || '',\n          onChange: e => setAnswers(prev => ({\n            ...prev,\n            [item.id]: e.target.value\n          })),\n          className: \"w-full p-4 rounded-xl\",\n          style: {\n            background: THEME.panel,\n            border: '1px solid rgba(255,255,255,0.03)',\n            color: 'var(--text)',\n            backdropFilter: 'blur(6px)'\n          },\n          placeholder: \"One-line pitch...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs mt-2\",\n          style: {\n            color: 'var(--muted)'\n          },\n          children: [(answers[item.id] || '').length, \"/\", item.maxLength]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex gap-4 justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (item.points && (answers[item.id] || '').length > 0) {\n                setScore(s => s + item.points);\n                pulseScore();\n              }\n              scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1));\n            },\n            className: \"btn btn-primary\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAnswers(prev => ({\n              ...prev,\n              [item.id]: ''\n            })),\n            className: \"btn btn-ghost\",\n            children: \"Clear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 744,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this);\n    }\n    if (item.type === 'minigame') return /*#__PURE__*/_jsxDEV(MiniGame, {\n      timeLimit: item.timeLimit,\n      onComplete: onMiniGameComplete,\n      flavor: item.flavor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 750,\n      columnNumber: 41\n    }, this);\n    return null;\n  }\n\n  // choose video src (fallback behavior)\n  function currentVideoSrc() {\n    return useFallback ? REMOTE_FALLBACK : OPENING_VIDEO_SRC;\n  }\n  function retryVideo(useRemote = false) {\n    setVideoError(false);\n    setUseFallback(useRemote);\n    setVideoKey(k => k + 1);\n    setOpeningDone(false);\n    setLoadProgress(0);\n  }\n\n  // small decorative orbs\n  const Orbs = () => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pointer-events-none fixed -left-24 -top-24 w-72 h-72 rounded-full blur-3xl opacity-30\",\n      style: {\n        background: `radial-gradient(circle at 30% 30%, ${THEME.indigo}, transparent)`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 761,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pointer-events-none fixed -right-28 top-1/3 w-96 h-96 rounded-full blur-3xl opacity-20\",\n      style: {\n        background: `radial-gradient(circle at 70% 70%, ${THEME.accent}, transparent)`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 762,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen relative overflow-hidden\",\n    style: {\n      background: THEME.background\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root{\n          --indigo: ${THEME.indigo};\n          --cyan: ${THEME.cyan};\n          --accent: ${THEME.accent};\n          --bg: ${THEME.background};\n          --panel: ${THEME.panel};\n          --muted: ${THEME.mutedText};\n          --text: ${THEME.text};\n        }\n        .btn { padding: 0.6rem 1rem; border-radius: 0.625rem; font-weight:600; cursor:pointer; box-shadow: 0 6px 30px rgba(4,6,24,0.6); border: 1px solid rgba(255,255,255,0.035); }\n        .btn-primary { background: linear-gradient(90deg,var(--indigo),var(--cyan)); color: black; }\n        .btn-ghost { background: rgba(255,255,255,0.02); color: var(--text); border: 1px solid rgba(255,255,255,0.03); }\n        .btn:active { transform: translateY(1px); }\n        .glow { box-shadow: 0 8px 40px rgba(99,102,241,0.12); }\n        .panel-frost { border-radius: 12px; border: 1px solid rgba(255,255,255,0.03); }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomCursor, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 786,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Orbs, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 787,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: particleCanvasRef,\n      className: \"pointer-events-none fixed inset-0 z-20\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 790,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VideoBackground, {\n      keyOverride: videoKey,\n      src: currentVideoSrc(),\n      videoRef: videoRef,\n      onReady: handleVideoReady,\n      onError: handleVideoError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 793,\n      columnNumber: 7\n    }, this), videoError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-60 flex items-center justify-center p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-frost p-6 rounded-xl text-center\",\n        style: {\n          background: THEME.panel,\n          width: \"min(720px,92%)\",\n          backdropFilter: \"blur(8px)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: THEME.text,\n            fontSize: \"1.25rem\",\n            fontWeight: 700\n          },\n          children: \"Video failed to play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: THEME.mutedText,\n            marginTop: 8\n          },\n          children: \"This can happen if the file path is wrong, the file's codec is unsupported, or CORS prevented loading.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex gap-3 justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => retryVideo(false),\n            children: \"Retry local video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-ghost\",\n            onClick: () => retryVideo(true),\n            children: \"Use fallback video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 803,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 text-xs\",\n          style: {\n            color: THEME.mutedText\n          },\n          children: [\"Tip: Confirm \", /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"public/opening.mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 805,\n            columnNumber: 91\n          }, this), \" exists and is H.264/AAC for best browser compatibility.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 798,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 797,\n      columnNumber: 9\n    }, this), !openingDone && !videoError && /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n      progress: loadProgress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 811,\n      columnNumber: 39\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: bgCanvasRef,\n      className: \"pointer-events-none fixed inset-0 z-0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"pointer-events-none fixed inset-0 z-50\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed right-6 top-6 z-60 flex flex-col gap-3 items-end\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"score-badge\",\n        className: \"px-4 py-2 rounded-full glow\",\n        style: {\n          background: `linear-gradient(90deg,${THEME.indigo},${THEME.accent})`,\n          color: \"black\",\n          fontWeight: 700\n        },\n        children: [score, \" pts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 819,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs\",\n        style: {\n          color: THEME.mutedText\n        },\n        children: [\"Level \", Math.floor(score / 50) + 1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 820,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 818,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"fixed left-6 top-1/2 -translate-y-1/2 z-60 hidden md:flex flex-col gap-3\",\n      children: visible.map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => scrollToIndex(i),\n        \"aria-label\": `Go to chapter ${i + 1}`,\n        style: {\n          width: 12,\n          height: 12,\n          background: i === activeIndex ? `linear-gradient(90deg,${THEME.indigo},${THEME.accent})` : \"rgba(255,255,255,0.03)\",\n          boxShadow: i === activeIndex ? \"0 8px 30px rgba(99,102,241,0.12)\" : \"none\",\n          border: \"1px solid rgba(255,255,255,0.02)\",\n          borderRadius: 9999\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 825,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 823,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"fixed inset-0 top-0 left-0 w-full will-change-transform z-40 cinema-stack\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: `${visible.length * height}px`\n        },\n        children: visible.map((item, i) => /*#__PURE__*/_jsxDEV(\"section\", {\n          ref: addChapterRef,\n          style: {\n            height: `${height}px`\n          },\n          className: \"flex items-center justify-center px-6 md:px-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 items-center chapter-node\",\n            children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n              className: \"col-span-1 hidden lg:flex flex-col gap-4 items-start\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm\",\n                style: {\n                  color: THEME.mutedText\n                },\n                children: \"Chapter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n                animate: {\n                  rotate: activeIndex === i ? 6 : 0\n                },\n                transition: {\n                  type: 'spring'\n                },\n                className: \"text-4xl md:text-5xl font-extrabold\",\n                style: {\n                  color: THEME.text\n                },\n                children: String(i + 1).padStart(2, '0')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 842,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1 h-full rounded-full\",\n                style: {\n                  background: `linear-gradient(180deg,${THEME.indigo},${THEME.accent})`,\n                  opacity: 0.28\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 843,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-2 rounded-xl p-8 text-center panel-frost\",\n              style: {\n                background: THEME.panel,\n                border: '1px solid rgba(255,255,255,0.03)',\n                backdropFilter: 'blur(10px)'\n              },\n              children: /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0,\n                  y: 30\n                },\n                animate: {\n                  opacity: 1,\n                  y: 0\n                },\n                transition: {\n                  duration: 0.8\n                },\n                children: /*#__PURE__*/_jsxDEV(ChapterContent, {\n                  item: item,\n                  idx: i\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 847,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 845,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 15\n          }, this)\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 836,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 835,\n      columnNumber: 7\n    }, this), showFinish && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-70 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-frost rounded-xl p-8 text-center\",\n        style: {\n          background: THEME.panel,\n          width: \"min(680px,92%)\",\n          backdropFilter: \"blur(8px)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold\",\n          style: {\n            color: THEME.text\n          },\n          children: \"All done \\uD83C\\uDF89\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 860,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3\",\n          style: {\n            color: THEME.mutedText\n          },\n          children: [\"You earned \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 700,\n              color: THEME.text\n            },\n            children: score\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 861,\n            columnNumber: 79\n          }, this), \" points. Thanks for playing!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex gap-3 justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetAll,\n            className: \"btn btn-primary\",\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 862,\n            columnNumber: 61\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 859,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 858,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: showResponses && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        className: \"fixed inset-0 z-90 flex items-center justify-center p-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel-frost rounded-xl p-6 max-w-3xl w-full\",\n          style: {\n            background: THEME.panel,\n            backdropFilter: \"blur(8px)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                color: THEME.text,\n                fontWeight: 700\n              },\n              children: \"Your Responses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 871,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowResponses(false),\n              className: \"text-sm\",\n              style: {\n                color: THEME.mutedText\n              },\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 872,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 responses-pre text-sm\",\n            style: {\n              color: THEME.text,\n              background: \"rgba(0,0,0,0.22)\",\n              padding: 12,\n              borderRadius: 8\n            },\n            children: JSON.stringify(answers, null, 2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 874,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 flex gap-3 justify-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setShowResponses(false);\n                resetAll();\n              },\n              className: \"btn btn-primary\",\n              children: \"Restart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 876,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 875,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 868,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 867,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 767,\n    columnNumber: 5\n  }, this);\n}\n_s4(GamifiedSurveyForm, \"bcIrKlyJcMq7LjQ4ZWjVEir68cA=\");\n_c5 = GamifiedSurveyForm;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"VideoBackground\");\n$RefreshReg$(_c2, \"LoadingOverlay\");\n$RefreshReg$(_c3, \"CustomCursor\");\n$RefreshReg$(_c4, \"MiniGame\");\n$RefreshReg$(_c5, \"GamifiedSurveyForm\");","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","AnimatePresence","jsxDEV","_jsxDEV","Fragment","_Fragment","OPENING_VIDEO_SRC","REMOTE_FALLBACK","THEME","indigo","cyan","accent","background","panel","mutedText","text","QUESTIONS","id","type","title","subtitle","choices","points","flavor","scale","pointsPerStar","maxLength","timeLimit","pointsOnSuccess","dependsOn","q1","lerp","a","b","n","hexToRgb","hex","h","replace","parseInt","substring","confettiBurst","canvas","ctx","getContext","W","width","window","innerWidth","H","height","innerHeight","pieces","i","push","x","y","vx","Math","random","vy","r","color","floor","rot","vr","t","frame","clearRect","p","save","translate","rotate","PI","fillStyle","fillRect","restore","requestAnimationFrame","VideoBackground","src","videoRef","onReady","onError","keyOverride","_s","internalRef","ref","v","current","muted","playsInline","preload","play","catch","fired","markReady","markError","e","onCanPlay","onErr","console","warn","addEventListener","safety","setTimeout","Error","removeEventListener","clearTimeout","loop","autoPlay","style","position","inset","objectFit","zIndex","pointerEvents","opacity","fileName","_jsxFileName","lineNumber","columnNumber","_c","LoadingOverlay","progress","className","children","transition","round","_c2","CustomCursor","_s2","dotRef","ringRef","pos","hover","rafRef","dot","ring","onMouseMove","clientX","clientY","onHoverChange","target","should","closest","cx","cy","ringScale","transform","rx","parseFloat","dataset","ry","cancelAnimationFrame","document","documentElement","classList","add","remove","left","top","borderRadius","border","boxShadow","_c3","MiniGame","onComplete","_s3","charge","setCharge","runningRef","raf","startedAt","manualBoost","start","performance","now","tick","elapsed","base","min","total","handleTap","c","div","onClick","whileTap","whileHover","stiffness","animate","repeat","Infinity","duration","ease","borderColor","damping","_c4","GamifiedSurveyForm","_s4","answers","setAnswers","raw","localStorage","getItem","JSON","parse","score","setScore","Number","showFinish","setShowFinish","openingDone","setOpeningDone","showResponses","setShowResponses","videoError","setVideoError","useFallback","setUseFallback","videoKey","setVideoKey","canvasRef","bgCanvasRef","particleCanvasRef","setItem","stringify","String","visible","filter","q","keys","Object","every","k","containerRef","chapterRefs","addChapterRef","el","setHeight","onResize","prev","overflow","touchAction","body","targetY","currentY","lastWheelAt","isScrolling","SNAP_DELAY","LERP_FAST","LERP_SNAP","cursor","active","lastCursorUpdate","bgRAF","activeIndexRef","activeIndex","setActiveIndex","particles","loadProgress","setLoadProgress","simulated","max","handleVideoReady","handleVideoError","err","isTouching","touchStartY","clampTarget","length","onWheel","preventDefault","deltaY","onTouchStart","touches","onTouchMove","delta","onTouchEnd","onKey","key","passive","onPointer","onPointerLeave","onPointerDown","px","py","_triggerPop","DPR","devicePixelRatio","BRICK_W","BRICK_H","cols","ceil","rows","MAX_BRICKS","scaleUp","sqrt","bricks","w","baseX","baseY","pop","phase","falling","fallY","fallVy","gone","nearest","best","dx","dy","d","R","norm","palA","palB","palC","lastT","draw","dt","maxD","time","skipShadows","panelCenterX","activeIdx","panelCenterY","panelW","panelH","pow","lift","wobble","sin","yOffset","posFactor","anim","mixFactor","mix","bVal","rAB","gAB","bAB","baseR","baseG","baseB","depthMul","dxPanel","abs","dyPanel","panelDarkness","nx","ny","finalR","finalG","finalB","finalAlpha","globalAlpha","shadowBlur","shadowColor","roundRect","fill","minr","beginPath","moveTo","arcTo","closePath","pc","animId","resize","render","gravity","life","maxLife","arc","splice","centerX","titleY","emit","count","angle","speed","hueChoice","col","cos","forEach","node","center","offset","translateY","idx","scrollToIndex","dest","AUTO_ADVANCE_DELAY_MS","MINIGAME_ADVANCE_MS","handleAnswer","qid","value","questionDef","find","gained","s","pulseScore","next","getElementById","easing","onMiniGameComplete","success","q4","finish","resetAll","confirm","ChapterContent","item","isFirst","isLast","h1","initial","WebkitBackgroundClip","textShadow","delay","padding","backdropFilter","viewBox","stroke","strokeWidth","map","button","Array","from","_","onChange","placeholder","currentVideoSrc","retryVideo","useRemote","Orbs","fontSize","fontWeight","marginTop","padStart","exit","_c5","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/App/gamified-survey/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n/**\n * GamifiedSurveyForm — improved bricks contrast + animated title reveal particles.\n * - Put video at public/opening.mp4 or change OPENING_VIDEO_SRC.\n * - This file includes:\n *    - bricks color variation and darkening under active panel\n *    - particle burst at chapter title on active change\n *    - robust video readiness & retry\n */\n\n// CONFIG\nconst OPENING_VIDEO_SRC = \"/opening.mp4\";\nconst REMOTE_FALLBACK = \"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4\";\n\n// Theme\nconst THEME = {\n  indigo: \"#8b5cf6\",\n  cyan: \"#06b6d4\",\n  accent: \"#ec4899\",\n  background: \"#050612\",\n  panel: \"rgba(6,8,22,0.7)\",\n  mutedText: \"#9aa6b2\",\n  text: \"#e6eef8\",\n};\n\nconst QUESTIONS = [\n  { id: \"intro\", type: \"stage\", title: \"Nightfall at HackPlay\", subtitle: \"Step into a neon-lit hall. Your choices tune the journey.\" },\n  {\n    id: \"q1\",\n    type: \"mcq\",\n    title: \"Entrance — choose your mindset\",\n    choices: [\"Build something cool\", \"Learn fast\", \"Meet people\", \"Chase the prizes\"],\n    points: { \"Build something cool\": 20, \"Learn fast\": 10, \"Meet people\": 15, \"Chase the prizes\": 5 },\n    flavor: \"The doors close. A low bass. Pick the vibe that follows you.\",\n  },\n  {\n    id: \"q2\",\n    type: \"rating\",\n    title: \"Charge Meter — how hyped are you?\",\n    scale: 5,\n    pointsPerStar: 6,\n    flavor: \"The stage lights react to your energy.\",\n  },\n  {\n    id: \"q3\",\n    type: \"text\",\n    title: \"One-line pitch — what's the idea?\",\n    maxLength: 140,\n    points: 15,\n    flavor: \"A single line — the fragment your team will build around.\",\n  },\n  {\n    id: \"q4\",\n    type: \"minigame\",\n    title: \"Charge the core — tap to power your idea\",\n    timeLimit: 6000,\n    pointsOnSuccess: 30,\n    flavor: \"Fast reflexes prove prototype-ready energy.\",\n  },\n  {\n    id: \"q5\",\n    type: \"mcq\",\n    title: \"Team vibe — pick your tribe\",\n    choices: [\"Chill coders\", \"All-nighters\", \"Balanced squad\", \"Solo hero\"],\n    points: { \"Chill coders\": 10, \"All-nighters\": 20, \"Balanced squad\": 15, \"Solo hero\": 5 },\n    flavor: \"Who will you ride the night with?\",\n    dependsOn: { q1: \"Build something cool\" },\n  },\n  { id: \"end\", type: \"stage\", title: \"Curtain Call\", subtitle: \"Collect badges, revisit your pitch, and step back into the light.\" },\n];\n\nfunction lerp(a, b, n) { return (1 - n) * a + n * b; }\nfunction hexToRgb(hex) {\n  const h = hex.replace(\"#\", \"\");\n  return [parseInt(h.substring(0, 2), 16), parseInt(h.substring(2, 4), 16), parseInt(h.substring(4, 6), 16)];\n}\n\nfunction confettiBurst(canvas) {\n  if (!canvas) return;\n  const ctx = canvas.getContext(\"2d\");\n  const W = (canvas.width = window.innerWidth);\n  const H = (canvas.height = window.innerHeight);\n  const pieces = [];\n  for (let i = 0; i < 80; i++) pieces.push({ x: W/2, y: H/3, vx: (Math.random()-0.5)*12, vy: (Math.random()-1.5)*10, r: Math.random()*6+3, color: [\"#ff6b6b\",\"#ffd93d\",\"#6bcB77\",\"#6b8aff\",\"#ff85e3\"][Math.floor(Math.random()*5)], rot: Math.random()*360, vr: Math.random()*8-4 });\n  let t = 0;\n  function frame() {\n    t++;\n    ctx.clearRect(0,0,W,H);\n    for (let p of pieces) {\n      p.x += p.vx;\n      p.y += p.vy + 0.3;\n      p.vy += 0.06;\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate((p.rot * Math.PI)/180);\n      ctx.fillStyle = p.color;\n      ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);\n      ctx.restore();\n    }\n    if (t < 180) requestAnimationFrame(frame); else ctx.clearRect(0,0,W,H);\n  }\n  frame();\n}\n\n// Video background (robust)\nfunction VideoBackground({ src, videoRef, onReady, onError, keyOverride }) {\n  const internalRef = useRef(null);\n  const ref = videoRef || internalRef;\n\n  useEffect(() => {\n    const v = ref.current;\n    if (!v) return;\n    v.muted = true;\n    v.playsInline = true;\n    v.preload = \"auto\";\n    const p = v.play && v.play();\n    if (p && p.catch) p.catch(() => {});\n\n    let fired = false;\n    function markReady(){ if(fired) return; fired = true; onReady && onReady(); }\n    function markError(e){ if(fired) return; fired = true; onError && onError(e); }\n\n    function onCanPlay(){ markReady(); }\n    function onErr(e){ console.warn(\"video error\", e); markError(e); }\n\n    v.addEventListener(\"canplaythrough\", onCanPlay);\n    v.addEventListener(\"canplay\", onCanPlay);\n    v.addEventListener(\"loadeddata\", onCanPlay);\n    v.addEventListener(\"loadedmetadata\", onCanPlay);\n    v.addEventListener(\"error\", onErr);\n    v.addEventListener(\"click\", () => markReady());\n\n    const safety = setTimeout(() => { if(!fired) markError(new Error(\"video-timeout\")); }, 4500);\n    return () => {\n      v.removeEventListener(\"canplaythrough\", onCanPlay);\n      v.removeEventListener(\"canplay\", onCanPlay);\n      v.removeEventListener(\"loadeddata\", onCanPlay);\n      v.removeEventListener(\"loadedmetadata\", onCanPlay);\n      v.removeEventListener(\"error\", onErr);\n      clearTimeout(safety);\n    };\n  }, [src, onReady, onError, ref, keyOverride]);\n\n  return (\n    <video\n      key={keyOverride}\n      ref={ref}\n      src={src}\n      muted\n      loop\n      playsInline\n      autoPlay\n      preload=\"auto\"\n      style={{ position: \"fixed\", inset: 0, width: \"100%\", height: \"100%\", objectFit: \"cover\", zIndex: -50, pointerEvents: \"auto\", opacity: 1 }}\n    />\n  );\n}\n\n// Loading overlay\nfunction LoadingOverlay({ progress }) {\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center\" style={{ zIndex: 99999, pointerEvents: \"none\" }}>\n      <div className=\"w-full max-w-2xl px-6\">\n        <div className=\"mb-4 text-center font-medium select-none\" style={{ color: \"var(--text)\" }}>Booting the neon hall</div>\n        <div className=\"w-full h-4 rounded-full overflow-hidden shadow-inner\" style={{ background: \"rgba(255,255,255,0.02)\" }}>\n          <div className=\"h-full rounded-full\" style={{ width: `${progress}%`, background: \"linear-gradient(90deg,var(--indigo),var(--cyan))\", transition: \"width 200ms linear\" }} />\n        </div>\n        <div className=\"mt-3 text-xs text-center\" style={{ color: \"var(--muted)\" }}>{Math.round(progress)}%</div>\n      </div>\n    </div>\n  );\n}\n\n// Custom cursor kept\nfunction CustomCursor() {\n  const dotRef = useRef(null);\n  const ringRef = useRef(null);\n  const pos = useRef({ x: typeof window !== \"undefined\" ? window.innerWidth/2 : 0, y: typeof window !== \"undefined\" ? window.innerHeight/2 : 0 });\n  const hover = useRef(false);\n  const rafRef = useRef(null);\n\n  useEffect(() => {\n    const dot = dotRef.current; const ring = ringRef.current;\n    if(!dot || !ring) return;\n\n    function onMouseMove(e){ pos.current.x = e.clientX; pos.current.y = e.clientY; }\n    function onHoverChange(e){ const t = e.target; const should = !!t.closest && (t.closest('button, a, [role=\"button\"], input, textarea') != null); hover.current = should; }\n\n    window.addEventListener(\"mousemove\", onMouseMove);\n    window.addEventListener(\"mouseover\", onHoverChange);\n\n    let cx = pos.current.x; let cy = pos.current.y; let ringScale = 1;\n    function loop(){\n      cx = lerp(cx, pos.current.x, 0.18);\n      cy = lerp(cy, pos.current.y, 0.18);\n      dot.style.transform = `translate3d(${cx-6}px, ${cy-6}px, 0)`;\n      const rx = lerp(parseFloat(ring.dataset.x || cx), cx, 0.08);\n      const ry = lerp(parseFloat(ring.dataset.y || cy), cy, 0.08);\n      ring.dataset.x = rx; ring.dataset.y = ry;\n      ringScale = lerp(ringScale, hover.current ? 1.9 : 1, 0.12);\n      ring.style.transform = `translate3d(${rx-18}px, ${ry-18}px, 0) scale(${ringScale})`;\n      ring.style.opacity = 0.95;\n      rafRef.current = requestAnimationFrame(loop);\n    }\n    rafRef.current = requestAnimationFrame(loop);\n\n    return () => { window.removeEventListener('mousemove', onMouseMove); window.removeEventListener('mouseover', onHoverChange); cancelAnimationFrame(rafRef.current); };\n  }, []);\n\n  useEffect(() => { document.documentElement.classList.add(\"custom-cursor-hide\"); return () => document.documentElement.classList.remove(\"custom-cursor-hide\"); }, []);\n\n  return (\n    <>\n      <div ref={ringRef} style={{ position: \"fixed\", left: 0, top: 0, width: 36, height: 36, borderRadius: 9999, border: \"1.5px solid rgba(255,255,255,0.06)\", pointerEvents: \"none\", zIndex: 100000, boxShadow: \"0 6px 30px rgba(99,102,241,0.06)\" }} />\n      <div ref={dotRef} style={{ position: \"fixed\", left: 0, top: 0, width: 12, height: 12, borderRadius: 9999, background: \"radial-gradient(circle at 30% 30%, #fff, #ddd)\", boxShadow: \"0 8px 26px rgba(99,102,241,0.12)\", pointerEvents: \"none\", zIndex: 100001 }} />\n      <style>{`.custom-cursor-hide, .custom-cursor-hide * { cursor: none !important; }`}</style>\n    </>\n  );\n}\n\nfunction MiniGame({ timeLimit = 6000, onComplete, flavor }) {\n  const [charge, setCharge] = useState(0);\n  const runningRef = useRef(false);\n  const raf = useRef(null);\n  const startedAt = useRef(0);\n  const manualBoost = useRef(0);\n  useEffect(() => () => cancelAnimationFrame(raf.current), []);\n\n  function start() { if (runningRef.current) return; runningRef.current = true; manualBoost.current = 0; startedAt.current = performance.now(); tick(); }\n  function tick() {\n    raf.current = requestAnimationFrame(() => {\n      const elapsed = performance.now() - startedAt.current;\n      const base = Math.min(100, Math.round((elapsed / timeLimit) * 100));\n      const total = Math.min(100, base + manualBoost.current);\n      setCharge(total);\n      if (total >= 100) { runningRef.current = false; cancelAnimationFrame(raf.current); onComplete(true); return; }\n      if (elapsed >= timeLimit) { runningRef.current = false; cancelAnimationFrame(raf.current); onComplete(total >= 60); return; }\n      tick();\n    });\n  }\n  function handleTap() { if (!runningRef.current) start(); else { manualBoost.current = Math.min(100, manualBoost.current + 12); setCharge(c => Math.min(100, c + 12)); } }\n\n  return (\n    <div className=\"w-full flex flex-col items-center gap-4\">\n      <div className=\"text-sm italic\" style={{ color: \"var(--muted)\" }}>{flavor}</div>\n      <div className=\"relative w-56 h-56 flex items-center justify-center\">\n        <motion.div onClick={handleTap} whileTap={{ scale: 0.9 }} whileHover={{ scale: 1.04 }} transition={{ type: \"spring\", stiffness: 300 }} className=\"w-40 h-40 rounded-full shadow-2xl flex items-center justify-center cursor-pointer relative overflow-hidden\" style={{ background: \"linear-gradient(135deg,var(--indigo),var(--accent))\" }}>\n          <motion.div animate={{ rotate: [0, 360] }} transition={{ repeat: Infinity, duration: 8, ease: \"linear\" }} className=\"absolute inset-0 opacity-20\" />\n          <div className=\"text-white font-extrabold text-xl\">TAP</div>\n        </motion.div>\n      </div>\n      <div className=\"w-full max-w-xl\">\n        <div className=\"text-sm mb-2\" style={{ color: \"var(--muted)\" }}>Charge: {charge}%</div>\n        <div className=\"w-full h-4 rounded-full overflow-hidden border\" style={{ background: \"rgba(255,255,255,0.03)\", borderColor: \"rgba(255,255,255,0.04)\" }}>\n          <motion.div className=\"h-full rounded-full\" style={{ background: \"linear-gradient(90deg,var(--indigo),var(--cyan))\" }} animate={{ width: `${charge}%` }} transition={{ type: \"spring\", stiffness: 140, damping: 16 }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function GamifiedSurveyForm() {\n  // States\n  const [answers, setAnswers] = useState(() => { try { const raw = localStorage.getItem(\"gamifiedSurveyAnswers\"); return raw ? JSON.parse(raw) : {}; } catch { return {}; } });\n  const [score, setScore] = useState(() => Number(localStorage.getItem(\"gamifiedSurveyScore\")) || 0);\n  const [showFinish, setShowFinish] = useState(false);\n  const [openingDone, setOpeningDone] = useState(false);\n  const [showResponses, setShowResponses] = useState(false);\n  const [videoError, setVideoError] = useState(false);\n  const [useFallback, setUseFallback] = useState(false);\n  const [videoKey, setVideoKey] = useState(0);\n\n  // Refs\n  const canvasRef = useRef(null);        // confetti\n  const bgCanvasRef = useRef(null);      // bricks\n  const particleCanvasRef = useRef(null);// particles for title\n  const videoRef = useRef(null);\n\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyAnswers\", JSON.stringify(answers)), [answers]);\n  useEffect(() => localStorage.setItem(\"gamifiedSurveyScore\", String(score)), [score]);\n\n  // visible chapters\n  const visible = QUESTIONS.filter(q => { if (!q.dependsOn) return true; const keys = Object.keys(q.dependsOn); return keys.every(k => answers[k] === q.dependsOn[k]); });\n\n  const containerRef = useRef(null);\n  const chapterRefs = useRef([]);\n  chapterRefs.current = [];\n  const addChapterRef = (el) => { if (el) chapterRefs.current.push(el); };\n\n  // layout\n  const [height, setHeight] = useState(typeof window !== \"undefined\" ? window.innerHeight : 800);\n  useEffect(() => { function onResize(){ setHeight(window.innerHeight); } window.addEventListener(\"resize\", onResize); return () => window.removeEventListener(\"resize\", onResize); }, []);\n\n  // lock scroll for cinematic experience\n  useEffect(() => {\n    const prev = { overflow: document.documentElement.style.overflow, touchAction: document.body.style.touchAction };\n    document.documentElement.style.overflow = \"hidden\";\n    document.body.style.touchAction = \"none\";\n    return () => { document.documentElement.style.overflow = prev.overflow; document.body.style.touchAction = prev.touchAction; };\n  }, []);\n\n  // scrolling\n  const targetY = useRef(0);\n  const currentY = useRef(0);\n  const rafRef = useRef(null);\n  const lastWheelAt = useRef(0);\n  const isScrolling = useRef(false);\n\n  const SNAP_DELAY = 70;\n  const LERP_FAST = 0.42;\n  const LERP_SNAP = 0.62;\n\n  const cursor = useRef({ x: typeof window !== \"undefined\" ? window.innerWidth/2 : 0, y: typeof window !== \"undefined\" ? window.innerHeight/2 : 0, active: false });\n  const lastCursorUpdate = useRef(0);\n  const bgRAF = useRef(null);\n\n  const activeIndexRef = useRef(0);\n  const [activeIndex, setActiveIndex] = useState(0);\n\n  // particles state used for title reveal\n  const particles = useRef([]);\n\n  // loading\n  const [loadProgress, setLoadProgress] = useState(0);\n  useEffect(() => {\n    let raf = null; let start = performance.now(); let simulated = 0;\n    function tick() {\n      const now = performance.now();\n      simulated = Math.min(92, simulated + (100 - simulated) * 0.06 + 0.8);\n      setLoadProgress(prev => Math.min(92, Math.max(prev, simulated)));\n      raf = requestAnimationFrame(tick);\n    }\n    raf = requestAnimationFrame(tick);\n    return () => cancelAnimationFrame(raf);\n  }, []);\n\n  // Video callbacks\n  function handleVideoReady() {\n    setLoadProgress(100);\n    setTimeout(() => { setOpeningDone(true); setVideoError(false); }, 280);\n  }\n  function handleVideoError(err) {\n    console.warn(\"Video failed to play:\", err);\n    setVideoError(true);\n    setTimeout(() => setLoadProgress(100), 300);\n    setTimeout(() => setOpeningDone(true), 640);\n  }\n\n  // Input handlers (wheel/touch/pointer)\n  useEffect(() => {\n    const isTouching = { v: false };\n    const touchStartY = { v: 0 };\n\n    function clampTarget(){ const max = Math.max(0, (visible.length - 1) * height); if (targetY.current < 0) targetY.current = 0; if (targetY.current > max) targetY.current = max; }\n\n    function onWheel(e){ e.preventDefault(); targetY.current += e.deltaY * 1.2; clampTarget(); lastWheelAt.current = performance.now(); isScrolling.current = true; }\n    function onTouchStart(e){ touchStartY.v = e.touches[0].clientY; isTouching.v = true; }\n    function onTouchMove(e){ if(!isTouching.v) return; const y = e.touches[0].clientY; const delta = touchStartY.v - y; targetY.current += delta; touchStartY.v = y; clampTarget(); lastWheelAt.current = performance.now(); isScrolling.current = true; }\n    function onTouchEnd(){ isTouching.v = false; }\n    function onKey(e){ if(e.key === \"ArrowDown\"){ targetY.current += height * 0.95; clampTarget(); lastWheelAt.current = performance.now(); isScrolling.current = true; } if(e.key === \"ArrowUp\"){ targetY.current -= height * 0.95; clampTarget(); lastWheelAt.current = performance.now(); isScrolling.current = true; } }\n\n    const el = containerRef.current || window;\n    el.addEventListener(\"wheel\", onWheel, { passive: false });\n    window.addEventListener(\"touchstart\", onTouchStart, { passive: false });\n    window.addEventListener(\"touchmove\", onTouchMove, { passive: false });\n    window.addEventListener(\"touchend\", onTouchEnd);\n    window.addEventListener(\"keydown\", onKey);\n\n    function onPointer(e){ const now = performance.now(); if (now - lastCursorUpdate.current > 12) { cursor.current.x = e.clientX; cursor.current.y = e.clientY; cursor.current.active = true; lastCursorUpdate.current = now; } }\n    function onPointerLeave(){ cursor.current.active = false; }\n    function onPointerDown(e){ const px = e.clientX; const py = e.clientY; cursor.current.x = px; cursor.current.y = py; if (bgCanvasRef.current && bgCanvasRef.current._triggerPop) bgCanvasRef.current._triggerPop(px, py); }\n\n    window.addEventListener(\"pointermove\", onPointer);\n    window.addEventListener(\"pointerout\", onPointerLeave);\n    window.addEventListener(\"pointerdown\", onPointerDown);\n\n    return () => { el.removeEventListener(\"wheel\", onWheel); window.removeEventListener(\"touchstart\", onTouchStart); window.removeEventListener(\"touchmove\", onTouchMove); window.removeEventListener(\"touchend\", onTouchEnd); window.removeEventListener(\"keydown\", onKey); window.removeEventListener(\"pointermove\", onPointer); window.removeEventListener(\"pointerout\", onPointerLeave); window.removeEventListener(\"pointerdown\", onPointerDown); };\n  }, [height, visible.length]);\n\n  // --- BRICKS CANVAS: now with variation + darkening behind active panel ---\n  useEffect(() => {\n    const canvas = bgCanvasRef.current; if(!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    let W = canvas.width = window.innerWidth;\n    let H = canvas.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.5);\n    canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = W + \"px\"; canvas.style.height = H + \"px\"; ctx.scale(DPR, DPR);\n\n    // brick sizing\n    let BRICK_W = window.innerWidth < 640 ? 120 : 96;\n    let BRICK_H = window.innerWidth < 640 ? 56 : 44;\n    let cols = Math.ceil(W / BRICK_W);\n    let rows = Math.ceil(H / BRICK_H);\n    const MAX_BRICKS = 900;\n    if (cols * rows > MAX_BRICKS) {\n      const scaleUp = Math.sqrt((cols * rows) / MAX_BRICKS);\n      BRICK_W = Math.ceil(BRICK_W * scaleUp);\n      BRICK_H = Math.ceil(BRICK_H * scaleUp);\n      cols = Math.ceil(W / BRICK_W); rows = Math.ceil(H / BRICK_H);\n    }\n\n    const bricks = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        const x = c * BRICK_W + (r % 2 ? BRICK_W / 2 : 0);\n        const y = r * BRICK_H;\n        const cx = x + BRICK_W/2;\n        const cy = y + BRICK_H/2;\n        // add slightly different base hue per row/col to break monotony\n        bricks.push({ x, y, w: BRICK_W, h: BRICK_H, baseX: x, baseY: y, cx, cy, pop: 0, vy: 0, phase: Math.random() * Math.PI * 2, falling: false, fallY: 0, fallVy: 0, opacity: 1, gone: false, r, c });\n      }\n    }\n\n    canvas._triggerPop = function(px, py) {\n      let nearest = null; let best = Infinity;\n      for (let b of bricks) {\n        if (b.gone) continue;\n        const dx = b.cx - px; const dy = b.cy - py; const d = Math.sqrt(dx*dx + dy*dy);\n        if (d < best) { best = d; nearest = b; }\n      }\n      if (nearest && !nearest.falling && best < Math.max(120, Math.min(window.innerWidth, window.innerHeight) * 0.06)) {\n        nearest.falling = true; nearest.fallVy = Math.random() * 4 + 2; nearest.fallY = 0;\n      }\n      const R = 120;\n      for (let b of bricks) {\n        if (b.falling || b.gone) continue;\n        const dx = b.cx - px; const dy = b.cy - py; const d = Math.sqrt(dx*dx + dy*dy);\n        if (d < R) {\n          const norm = 1 - d / R;\n          b.pop = Math.max(b.pop, 0.3 * norm);\n          b.vy += (4 * norm) + (Math.random() * 2);\n        }\n      }\n    };\n\n    // theme palettes\n    const palA = hexToRgb(THEME.indigo);\n    const palB = hexToRgb(THEME.cyan);\n    const palC = hexToRgb(THEME.accent);\n\n    let lastT = performance.now();\n    function draw(now) {\n      let dt = Math.min(40, now - lastT) * 0.001; if (dt <= 0) { bgRAF.current = requestAnimationFrame(draw); return; } lastT = now;\n      ctx.clearRect(0,0,W,H);\n\n      // translucent wash always, but reduce darkness when openingDone so video reads better\n      ctx.fillStyle = openingDone ? \"rgba(2,4,10,0.42)\" : \"rgba(2,4,10,0.08)\";\n      ctx.fillRect(0,0,W,H);\n\n      const maxD = Math.max(W, H) * 0.65;\n      const time = now * 0.001;\n      const skipShadows = bricks.length > 700;\n\n      // compute panel center on canvas coordinates so we can darken bricks under it\n      const panelCenterX = W/2;\n      const activeIdx = activeIndexRef.current || 0;\n      const panelCenterY = (activeIdx * height - currentY.current) + (height / 2); // where the active chapter center sits on screen/canvas\n\n      // approximate panel dims (matches max-w-6xl from layout)\n      const panelW = Math.min(1120, W * 0.86);\n      const panelH = Math.min(760, height * 0.78);\n\n      for (let b of bricks) {\n        if (b.gone) continue;\n        if (b.falling) {\n          b.fallVy += 900 * dt; b.fallY += b.fallVy * dt; b.opacity = Math.max(0, 1 - (b.fallY / (H * 1.4)));\n          if (b.fallY > H + 100) { b.gone = true; continue; }\n        }\n\n        const dx = b.cx - cursor.current.x; const dy = b.cy - cursor.current.y; const d = Math.sqrt(dx*dx + dy*dy);\n        let t = Math.max(0, 1 - d / maxD); t = Math.pow(t, 0.9);\n        const lift = b.falling ? 0 : Math.min(14, 10 * t + b.pop * 18);\n        const wobble = b.falling ? 0 : Math.sin(b.phase + time * 1.2) * 3 * t;\n        if (!b.falling) { b.vy -= 30 * dt; b.vy *= (0.92 - Math.min(0.18, t * 0.12)); b.pop = Math.max(0, b.pop - 0.012); }\n        const yOffset = b.falling ? b.fallY : (-lift + b.vy * dt * 60);\n\n        // per-row/col variation factor to break uniformity\n        const posFactor = ( (b.r % 7) / 7 ) * 0.22 + ( (b.c % 5) / 5 ) * 0.12;\n        const anim = 0.45 + 0.55 * Math.sin(b.phase * 1.2 + time * (0.45 + posFactor));\n        const mixFactor = Math.min(1, Math.max(0, t * 0.9 + anim * 0.25 + posFactor * 0.12));\n\n        function mix(a, bVal, n) { return Math.round((1 - n) * a + n * bVal); }\n        const rAB = mix(palA[0], palB[0], mixFactor);\n        const gAB = mix(palA[1], palB[1], mixFactor);\n        const bAB = mix(palA[2], palB[2], mixFactor);\n        const accent = 0.12 * (0.5 + 0.5 * Math.sin(time * 1.8 + b.phase + posFactor));\n        let baseR = Math.min(255, Math.round(rAB * (1 - accent) + palC[0] * accent));\n        let baseG = Math.min(255, Math.round(gAB * (1 - accent) + palC[1] * accent));\n        let baseB = Math.min(255, Math.round(bAB * (1 - accent) + palC[2] * accent));\n\n        // decrease brightness slightly for bricks farther from top (adds depth)\n        const depthMul = 0.9 + 0.22 * (1 - (b.cy / H));\n        baseR = Math.round(baseR * depthMul); baseG = Math.round(baseG * depthMul); baseB = Math.round(baseB * depthMul);\n\n        // compute darkening if the brick is under the active panel center area\n        const dxPanel = Math.abs(b.cx - panelCenterX);\n        const dyPanel = Math.abs(b.cy - panelCenterY);\n        let panelDarkness = 0;\n        if (dxPanel < panelW/2 && dyPanel < panelH/2) {\n          // stronger near center, eased\n          const nx = 1 - (dxPanel / (panelW/2));\n          const ny = 1 - (dyPanel / (panelH/2));\n          panelDarkness = Math.pow(Math.max(0, Math.min(1, (nx * ny))), 1.4) * 0.68; // up to 0.68 darkening\n        }\n\n        // apply panel darkening to base color and alpha for readability\n        const finalR = Math.max(8, Math.round(baseR * (1 - panelDarkness)));\n        const finalG = Math.max(8, Math.round(baseG * (1 - panelDarkness)));\n        const finalB = Math.max(8, Math.round(baseB * (1 - panelDarkness)));\n        const finalAlpha = Math.max(0.55, b.opacity - (panelDarkness * 0.22)); // slightly reduce alpha when panel over it\n\n        ctx.save();\n        ctx.globalAlpha = finalAlpha;\n        ctx.fillStyle = `rgb(${finalR}, ${finalG}, ${finalB})`;\n        if (lift > 2 && !b.falling && !skipShadows) {\n          ctx.shadowBlur = Math.min(28, lift * 1.6);\n          ctx.shadowColor = `rgba(40,60,160,${Math.min(0.22, 0.06 * t + 0.06 * b.pop)})`;\n        } else ctx.shadowBlur = 0;\n\n        const px = b.baseX + wobble * 0.6;\n        const py = b.baseY + yOffset;\n        roundRect(ctx, px + 6, py + 6, b.w - 12, b.h - 12, 6);\n        ctx.fill();\n\n        // subtle highlight stripe for depth (only when not heavily darkened)\n        if ((t > 0.08 || b.pop > 0.02) && !b.falling && panelDarkness < 0.5) {\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = `rgba(255,255,255,${0.03 * t + 0.04 * b.pop})`;\n          ctx.fillRect(px + 12, py + 10, b.w - 24, Math.max(3, Math.min(8, 4 * t + 6 * b.pop)));\n        }\n        ctx.restore();\n      }\n\n      bgRAF.current = requestAnimationFrame(draw);\n    }\n\n    function roundRect(ctx, x, y, w, h, r) { const minr = Math.min(r, w/2, h/2); ctx.beginPath(); ctx.moveTo(x + minr, y); ctx.arcTo(x + w, y, x + w, y + h, minr); ctx.arcTo(x + w, y + h, x, y + h, minr); ctx.arcTo(x, y + h, x, y, minr); ctx.arcTo(x, y, x + w, y, minr); ctx.closePath(); }\n\n    function onResize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; canvas.width = W * DPR; canvas.height = H * DPR; canvas.style.width = W + 'px'; canvas.style.height = H + 'px'; ctx.scale(DPR, DPR); }\n    window.addEventListener(\"resize\", onResize);\n    bgRAF.current = requestAnimationFrame(draw);\n\n    return () => { window.removeEventListener(\"resize\", onResize); cancelAnimationFrame(bgRAF.current); };\n  }, [openingDone]); // re-run when openingDone toggles\n\n  // --- PARTICLE CANVAS: title reveal particles triggered on activeIndex change ---\n  useEffect(() => {\n    const pc = particleCanvasRef.current;\n    if (!pc) return;\n    const ctx = pc.getContext(\"2d\");\n    let W = pc.width = window.innerWidth;\n    let H = pc.height = window.innerHeight;\n    const DPR = Math.min(window.devicePixelRatio || 1, 1.5);\n    pc.width = W * DPR; pc.height = H * DPR; pc.style.width = W + \"px\"; pc.style.height = H + \"px\"; ctx.scale(DPR, DPR);\n\n    let animId = null;\n    function resize() { W = pc.width = window.innerWidth; H = pc.height = window.innerHeight; pc.width = W * DPR; pc.height = H * DPR; pc.style.width = W + \"px\"; pc.style.height = H + \"px\"; ctx.scale(DPR, DPR); }\n\n    function render() {\n      ctx.clearRect(0,0,W,H);\n      // fade background slightly to create trailing effect\n      ctx.fillStyle = \"rgba(0,0,0,0)\";\n      ctx.fillRect(0,0,W,H);\n      const now = performance.now();\n      // update particles\n      for (let i = particles.current.length - 1; i >= 0; i--) {\n        const p = particles.current[i];\n        p.vx *= 0.998;\n        p.vy += (p.gravity || 0.02);\n        p.x += p.vx; p.y += p.vy;\n        p.life -= 1;\n        ctx.beginPath();\n        ctx.globalAlpha = Math.max(0, p.life / p.maxLife);\n        ctx.fillStyle = p.color;\n        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);\n        ctx.fill();\n        // draw a faint trail\n        ctx.globalAlpha = Math.max(0, (p.life / p.maxLife) * 0.18);\n        ctx.fillStyle = p.color;\n        ctx.fillRect(p.x - p.vx * 2, p.y - p.vy * 2, 2, 2);\n        if (p.life <= 0) particles.current.splice(i, 1);\n      }\n      ctx.globalAlpha = 1;\n      animId = requestAnimationFrame(render);\n    }\n    animId = requestAnimationFrame(render);\n    window.addEventListener(\"resize\", resize);\n    return () => { cancelAnimationFrame(animId); window.removeEventListener(\"resize\", resize); };\n  }, []);\n\n  // emit particle burst at top-center of active chapter when activeIndex changes\n  useEffect(() => {\n    const centerX = window.innerWidth / 2;\n    const titleY = 120; // approximate heading vertical location where particles should emit\n    const emit = (count = 28) => {\n      for (let i = 0; i < count; i++) {\n        const angle = (Math.random() - 0.5) * Math.PI * 2;\n        const speed = 1 + Math.random() * 6;\n        const r = 1 + Math.random() * 3;\n        const hueChoice = Math.random();\n        const col = hueChoice < 0.45 ? THEME.indigo : hueChoice < 0.85 ? THEME.cyan : THEME.accent;\n        particles.current.push({ x: centerX + (Math.random()-0.5)*120, y: titleY + (Math.random()-0.5)*22, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed * -0.6, r, color: col, life: 36 + Math.random()*28, maxLife: 36 + Math.random()*28, gravity: 0.03 });\n      }\n    };\n    // small delay to coordinate with reveal animation\n    const t = setTimeout(() => emit(36), 120);\n    return () => clearTimeout(t);\n  }, [activeIndex]); // run when chapter index changes\n\n  // UI transform loop & active index update\n  useEffect(() => {\n    function frame(now){\n      currentY.current = lerp(currentY.current, targetY.current, (performance.now() - lastWheelAt.current > SNAP_DELAY) ? LERP_SNAP : LERP_FAST);\n      const el = containerRef.current; if(el) el.style.transform = `translate3d(0, ${-currentY.current}px, 0)`;\n\n      chapterRefs.current.forEach((node, i) => {\n        if(!node) return;\n        const center = i * height;\n        const offset = (currentY.current - center) / height;\n        const abs = Math.abs(offset);\n        const translateY = offset * 34;\n        const rotate = offset * 3.6;\n        const scale = 1 - Math.min(0.08, abs * 0.08);\n        const opacity = 1 - Math.min(0.9, abs * 0.9);\n        node.style.transform = `translate3d(0px, ${translateY}px, 0) rotate(${rotate}deg) scale(${scale})`;\n        node.style.opacity = String(opacity);\n      });\n\n      const idx = Math.round(currentY.current / height);\n      if (activeIndexRef.current !== idx) { activeIndexRef.current = idx; setActiveIndex(idx); }\n      rafRef.current = requestAnimationFrame(frame);\n    }\n    rafRef.current = requestAnimationFrame(frame);\n    return () => cancelAnimationFrame(rafRef.current);\n  }, [height, visible.length]);\n\n  function scrollToIndex(i){ const max = Math.max(0, (visible.length - 1) * height); const dest = Math.max(0, Math.min(i * height, max)); targetY.current = dest; lastWheelAt.current = performance.now(); isScrolling.current = true; }\n\n  const AUTO_ADVANCE_DELAY_MS = 240; const MINIGAME_ADVANCE_MS = 300;\n\n  function handleAnswer(qid, value){\n    setAnswers(prev => ({ ...prev, [qid]: value }));\n    const questionDef = QUESTIONS.find(x => x.id === qid) || {};\n    let gained = 0;\n    if(questionDef.type === \"mcq\" && questionDef.points) gained = questionDef.points[value] || 0;\n    else if(questionDef.type === \"rating\") gained = value * (questionDef.pointsPerStar || 1);\n    else if(questionDef.type === \"text\") gained = questionDef.points || 0;\n    if(gained){ setScore(s => s + gained); pulseScore(); }\n    if(questionDef.type === \"mcq\" || questionDef.type === \"rating\"){ const next = Math.min(activeIndexRef.current + 1, visible.length - 1); setTimeout(() => scrollToIndex(next), AUTO_ADVANCE_DELAY_MS); }\n  }\n\n  function pulseScore(){ const el = document.getElementById('score-badge'); if(!el) return; el.animate([{ transform: 'translateY(0) scale(1)' }, { transform: 'translateY(-6px) scale(1.06)' }, { transform: 'translateY(0) scale(1)' }], { duration: 520, easing: 'ease-out' }); }\n\n  function onMiniGameComplete(success){ if(success){ setScore(s => s + 30); pulseScore(); } setAnswers(prev => ({ ...prev, q4: success ? 'success' : 'fail' })); setTimeout(() => scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)), MINIGAME_ADVANCE_MS); }\n\n  function finish(){ setShowFinish(true); if(canvasRef.current) confettiBurst(canvasRef.current); }\n\n  function resetAll(){ if(!window.confirm('Reset survey? This clears local progress.')) return; setAnswers({}); setScore(0); setShowFinish(false); targetY.current = 0; currentY.current = 0; if(containerRef.current) containerRef.current.style.transform = 'translate3d(0,0,0)'; }\n\n  function ChapterContent({ item, idx }){\n    if(item.type === 'stage'){\n      const isFirst = idx === 0;\n      const isLast = idx === Math.max(0, visible.length - 1);\n      return (\n        <div className=\"text-center max-w-3xl mx-auto\">\n          <motion.h1 initial={{ y: 40, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ duration: 0.8 }} className=\"text-5xl md:text-7xl font-extrabold tracking-tight\" style={{ background: 'linear-gradient(90deg,var(--indigo),var(--cyan))', WebkitBackgroundClip: 'text', color: 'transparent', textShadow: '0 8px 36px rgba(99,102,241,0.06)' }}>{item.title}</motion.h1>\n          {item.subtitle && <motion.p initial={{ y:20, opacity:0 }} animate={{ y:0, opacity:0.95 }} transition={{ delay:0.15 }} className=\"mt-4 text-lg\" style={{ color: 'var(--muted)' }}>{item.subtitle}</motion.p>}\n\n          <div className=\"mt-8 mx-auto w-full max-w-md\" style={{ background: THEME.panel, borderRadius: 16, padding: 20, border: '1px solid rgba(255,255,255,0.03)', backdropFilter: 'blur(8px)' }}>\n            <div className=\"flex items-center gap-3\">\n              <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" className=\"opacity-95\"><path d=\"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7l3-7z\" stroke={THEME.indigo} strokeWidth=\"0.9\"/></svg>\n              <div className=\"text-left\">\n                <div className=\"font-semibold text-lg\" style={{ color: 'var(--text)' }}>Experience</div>\n                <div className=\"text-sm\" style={{ color: 'var(--muted)' }}>A cinematic flow — read the prompt, pick quickly, and earn points.</div>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex gap-3 justify-center\">\n              {isLast ? (\n                <>\n                  <button onClick={() => resetAll()} className=\"btn btn-primary\">Restart</button>\n                  <button onClick={() => setShowResponses(true)} className=\"btn btn-ghost\">View responses</button>\n                </>\n              ) : (\n                <>\n                  <button onClick={() => scrollToIndex(Math.min(idx + 1, visible.length - 1))} className=\"btn btn-primary\">Enter</button>\n                  {!isFirst && <button onClick={() => finish()} className=\"btn btn-ghost\">Skip</button>}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if(item.type === 'mcq'){\n      return (\n        <div className=\"max-w-3xl w-full mx-auto\">\n          <div className=\"text-sm text-gray-400 italic mb-4\" style={{ color: 'var(--muted)' }}>{item.flavor}</div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {item.choices.map(c => (\n              <motion.button key={c} whileHover={{ scale: 1.04 }} onClick={() => handleAnswer(item.id, c)} className=\"py-7 px-6 rounded-3xl border transform-gpu\" style={{\n                borderColor: answers[item.id] === c ? 'transparent' : 'rgba(255,255,255,0.03)',\n                background: answers[item.id] === c ? 'linear-gradient(90deg,var(--indigo),var(--cyan))' : 'rgba(255,255,255,0.02)',\n                color: answers[item.id] === c ? 'black' : 'var(--text)',\n                boxShadow: answers[item.id] === c ? '0 12px 40px rgba(99,102,241,0.14)' : 'none'\n              }}>\n                <div className=\"font-semibold text-xl\">{c}</div>\n                <div className=\"text-sm text-muted mt-1\" style={{ color: 'var(--muted)' }}>{item.points && item.points[c] ? `${item.points[c]} pts` : ''}</div>\n              </motion.button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    if(item.type === 'rating'){\n      return (\n        <div className=\"text-center\">\n          <div className=\"text-sm text-gray-400 italic mb-4\" style={{ color: 'var(--muted)' }}>{item.flavor}</div>\n          <div className=\"flex items-center justify-center gap-4\">\n            {Array.from({ length: item.scale }).map((_, i) => (\n              <motion.button key={i} onClick={() => handleAnswer(item.id, i+1)} whileTap={{ scale: 0.95 }} className=\"w-16 h-16 rounded-full flex items-center justify-center\" style={{\n                background: answers[item.id] === i+1 ? 'linear-gradient(90deg,var(--indigo),var(--cyan))' : 'rgba(255,255,255,0.02)',\n                color: answers[item.id] === i+1 ? 'black' : 'var(--text)',\n                border: '1px solid rgba(255,255,255,0.03)'\n              }}>{i+1}</motion.button>\n            ))}\n          </div>\n        </div>\n      );\n    }\n\n    if(item.type === 'text'){\n      return (\n        <div className=\"w-full max-w-3xl mx-auto\">\n          <div className=\"text-sm text-gray-400 italic mb-4\" style={{ color: 'var(--muted)' }}>{item.flavor}</div>\n          <textarea maxLength={item.maxLength} rows={5} value={answers[item.id] || ''} onChange={(e) => setAnswers(prev => ({ ...prev, [item.id]: e.target.value }))} className=\"w-full p-4 rounded-xl\" style={{ background: THEME.panel, border: '1px solid rgba(255,255,255,0.03)', color: 'var(--text)', backdropFilter: 'blur(6px)' }} placeholder=\"One-line pitch...\" />\n          <div className=\"text-xs mt-2\" style={{ color: 'var(--muted)' }}>{(answers[item.id] || '').length}/{item.maxLength}</div>\n          <div className=\"mt-4 flex gap-4 justify-center\">\n            <button onClick={() => { if(item.points && (answers[item.id] || '').length > 0) { setScore(s => s + item.points); pulseScore(); } scrollToIndex(Math.min(activeIndexRef.current + 1, visible.length - 1)); }} className=\"btn btn-primary\">Submit</button>\n            <button onClick={() => setAnswers(prev => ({ ...prev, [item.id]: '' }))} className=\"btn btn-ghost\">Clear</button>\n          </div>\n        </div>\n      );\n    }\n\n    if(item.type === 'minigame') return <MiniGame timeLimit={item.timeLimit} onComplete={onMiniGameComplete} flavor={item.flavor} />;\n    return null;\n  }\n\n  // choose video src (fallback behavior)\n  function currentVideoSrc() { return useFallback ? REMOTE_FALLBACK : OPENING_VIDEO_SRC; }\n  function retryVideo(useRemote = false) { setVideoError(false); setUseFallback(useRemote); setVideoKey(k => k + 1); setOpeningDone(false); setLoadProgress(0); }\n\n  // small decorative orbs\n  const Orbs = () => (\n    <>\n      <div className=\"pointer-events-none fixed -left-24 -top-24 w-72 h-72 rounded-full blur-3xl opacity-30\" style={{ background: `radial-gradient(circle at 30% 30%, ${THEME.indigo}, transparent)` }} />\n      <div className=\"pointer-events-none fixed -right-28 top-1/3 w-96 h-96 rounded-full blur-3xl opacity-20\" style={{ background: `radial-gradient(circle at 70% 70%, ${THEME.accent}, transparent)` }} />\n    </>\n  );\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden\" style={{ background: THEME.background }}>\n      <style>{`\n        :root{\n          --indigo: ${THEME.indigo};\n          --cyan: ${THEME.cyan};\n          --accent: ${THEME.accent};\n          --bg: ${THEME.background};\n          --panel: ${THEME.panel};\n          --muted: ${THEME.mutedText};\n          --text: ${THEME.text};\n        }\n        .btn { padding: 0.6rem 1rem; border-radius: 0.625rem; font-weight:600; cursor:pointer; box-shadow: 0 6px 30px rgba(4,6,24,0.6); border: 1px solid rgba(255,255,255,0.035); }\n        .btn-primary { background: linear-gradient(90deg,var(--indigo),var(--cyan)); color: black; }\n        .btn-ghost { background: rgba(255,255,255,0.02); color: var(--text); border: 1px solid rgba(255,255,255,0.03); }\n        .btn:active { transform: translateY(1px); }\n        .glow { box-shadow: 0 8px 40px rgba(99,102,241,0.12); }\n        .panel-frost { border-radius: 12px; border: 1px solid rgba(255,255,255,0.03); }\n      `}</style>\n\n      <CustomCursor />\n      <Orbs />\n\n      {/* Particle canvas for title reveal (top) */}\n      <canvas ref={particleCanvasRef} className=\"pointer-events-none fixed inset-0 z-20\" />\n\n      {/* Video */}\n      <VideoBackground keyOverride={videoKey} src={currentVideoSrc()} videoRef={videoRef} onReady={handleVideoReady} onError={handleVideoError} />\n\n      {/* Video error overlay */}\n      {videoError && (\n        <div className=\"fixed inset-0 z-60 flex items-center justify-center p-6\">\n          <div className=\"panel-frost p-6 rounded-xl text-center\" style={{ background: THEME.panel, width: \"min(720px,92%)\", backdropFilter: \"blur(8px)\" }}>\n            <h3 style={{ color: THEME.text, fontSize: \"1.25rem\", fontWeight: 700 }}>Video failed to play</h3>\n            <p style={{ color: THEME.mutedText, marginTop: 8 }}>This can happen if the file path is wrong, the file's codec is unsupported, or CORS prevented loading.</p>\n            <div className=\"mt-4 flex gap-3 justify-center\">\n              <button className=\"btn btn-primary\" onClick={() => retryVideo(false)}>Retry local video</button>\n              <button className=\"btn btn-ghost\" onClick={() => retryVideo(true)}>Use fallback video</button>\n            </div>\n            <div className=\"mt-3 text-xs\" style={{ color: THEME.mutedText }}>Tip: Confirm <code>public/opening.mp4</code> exists and is H.264/AAC for best browser compatibility.</div>\n          </div>\n        </div>\n      )}\n\n      {/* Loading overlay */}\n      {!openingDone && !videoError && <LoadingOverlay progress={loadProgress} />}\n\n      {/* canvases */}\n      <canvas ref={bgCanvasRef} className=\"pointer-events-none fixed inset-0 z-0\" />\n      <canvas ref={canvasRef} className=\"pointer-events-none fixed inset-0 z-50\" />\n\n      {/* Score & nav */}\n      <div className=\"fixed right-6 top-6 z-60 flex flex-col gap-3 items-end\">\n        <div id=\"score-badge\" className=\"px-4 py-2 rounded-full glow\" style={{ background: `linear-gradient(90deg,${THEME.indigo},${THEME.accent})`, color: \"black\", fontWeight: 700 }}>{score} pts</div>\n        <div className=\"text-xs\" style={{ color: THEME.mutedText }}>Level {Math.floor(score / 50) + 1}</div>\n      </div>\n\n      <nav className=\"fixed left-6 top-1/2 -translate-y-1/2 z-60 hidden md:flex flex-col gap-3\">\n        {visible.map((_, i) => (\n          <button key={i} onClick={() => scrollToIndex(i)} aria-label={`Go to chapter ${i+1}`} style={{\n            width: 12, height: 12,\n            background: i === activeIndex ? `linear-gradient(90deg,${THEME.indigo},${THEME.accent})` : \"rgba(255,255,255,0.03)\",\n            boxShadow: i === activeIndex ? \"0 8px 30px rgba(99,102,241,0.12)\" : \"none\",\n            border: \"1px solid rgba(255,255,255,0.02)\", borderRadius: 9999\n          }} />\n        ))}\n      </nav>\n\n      {/* stacked chapters */}\n      <div ref={containerRef} className=\"fixed inset-0 top-0 left-0 w-full will-change-transform z-40 cinema-stack\">\n        <div style={{ height: `${visible.length * height}px` }}>\n          {visible.map((item, i) => (\n            <section key={item.id} ref={addChapterRef} style={{ height: `${height}px` }} className=\"flex items-center justify-center px-6 md:px-12\">\n              <div className=\"w-full max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 items-center chapter-node\">\n                <aside className=\"col-span-1 hidden lg:flex flex-col gap-4 items-start\">\n                  <div className=\"text-sm\" style={{ color: THEME.mutedText }}>Chapter</div>\n                  <motion.div animate={{ rotate: activeIndex === i ? 6 : 0 }} transition={{ type: 'spring' }} className=\"text-4xl md:text-5xl font-extrabold\" style={{ color: THEME.text }}>{String(i+1).padStart(2,'0')}</motion.div>\n                  <div className=\"w-1 h-full rounded-full\" style={{ background: `linear-gradient(180deg,${THEME.indigo},${THEME.accent})`, opacity: 0.28 }} />\n                </aside>\n                <div className=\"col-span-2 rounded-xl p-8 text-center panel-frost\" style={{ background: THEME.panel, border: '1px solid rgba(255,255,255,0.03)', backdropFilter: 'blur(10px)' }}>\n                  <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.8 }}>\n                    <ChapterContent item={item} idx={i} />\n                  </motion.div>\n                </div>\n              </div>\n            </section>\n          ))}\n        </div>\n      </div>\n\n      {/* finish modal */}\n      {showFinish && (\n        <div className=\"fixed inset-0 z-70 flex items-center justify-center\">\n          <div className=\"panel-frost rounded-xl p-8 text-center\" style={{ background: THEME.panel, width: \"min(680px,92%)\", backdropFilter: \"blur(8px)\" }}>\n            <h2 className=\"text-3xl font-bold\" style={{ color: THEME.text }}>All done 🎉</h2>\n            <p className=\"mt-3\" style={{ color: THEME.mutedText }}>You earned <span style={{ fontWeight: 700, color: THEME.text }}>{score}</span> points. Thanks for playing!</p>\n            <div className=\"mt-6 flex gap-3 justify-center\"><button onClick={resetAll} className=\"btn btn-primary\">Reset</button></div>\n          </div>\n        </div>\n      )}\n\n      <AnimatePresence>{showResponses && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className=\"fixed inset-0 z-90 flex items-center justify-center p-6\">\n          <div className=\"panel-frost rounded-xl p-6 max-w-3xl w-full\" style={{ background: THEME.panel, backdropFilter: \"blur(8px)\" }}>\n            <div className=\"flex justify-between items-center\">\n              <h3 style={{ color: THEME.text, fontWeight: 700 }}>Your Responses</h3>\n              <button onClick={() => setShowResponses(false)} className=\"text-sm\" style={{ color: THEME.mutedText }}>Close</button>\n            </div>\n            <div className=\"mt-4 responses-pre text-sm\" style={{ color: THEME.text, background: \"rgba(0,0,0,0.22)\", padding: 12, borderRadius: 8 }}>{JSON.stringify(answers, null, 2)}</div>\n            <div className=\"mt-4 flex gap-3 justify-end\">\n              <button onClick={() => { setShowResponses(false); resetAll(); }} className=\"btn btn-primary\">Restart</button>\n            </div>\n          </div>\n        </motion.div>\n      )}</AnimatePresence>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}